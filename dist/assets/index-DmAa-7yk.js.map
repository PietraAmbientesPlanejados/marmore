{"version":3,"file":"index-DmAa-7yk.js","sources":["../../node_modules/react/cjs/react-jsx-runtime.production.min.js","../../node_modules/react/jsx-runtime.js","../../node_modules/react-dom/client.js","../../src/constants/config.js","../../src/utils/storage.js","../../src/components/auth/TelaLogin.jsx","../../src/utils/formatters.js","../../src/utils/calculations.js","../../src/hooks/usePrecos.js","../../src/hooks/useMaterials.js","../../src/hooks/useBudgets.js","../../src/SistemaOrcamentoMarmore.jsx","../../src/App.jsx","../../src/main.jsx"],"sourcesContent":["/**\n * @license React\n * react-jsx-runtime.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var f=require(\"react\"),k=Symbol.for(\"react.element\"),l=Symbol.for(\"react.fragment\"),m=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};\nfunction q(c,a,g){var b,d={},e=null,h=null;void 0!==g&&(e=\"\"+g);void 0!==a.key&&(e=\"\"+a.key);void 0!==a.ref&&(h=a.ref);for(b in a)m.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps,a)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:k,type:c,key:e,ref:h,props:d,_owner:n.current}}exports.Fragment=l;exports.jsx=q;exports.jsxs=q;\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-jsx-runtime.production.min.js');\n} else {\n  module.exports = require('./cjs/react-jsx-runtime.development.js');\n}\n","'use strict';\n\nvar m = require('react-dom');\nif (process.env.NODE_ENV === 'production') {\n  exports.createRoot = m.createRoot;\n  exports.hydrateRoot = m.hydrateRoot;\n} else {\n  var i = m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n  exports.createRoot = function(c, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.createRoot(c, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n  exports.hydrateRoot = function(c, h, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.hydrateRoot(c, h, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n}\n","// Configura√ß√µes do sistema\r\nexport const SENHA_DO_SISTEMA = 'pietra2025';\r\n\r\n// Chaves do localStorage\r\nexport const STORAGE_KEYS = {\r\n  MATERIAIS: 'pietra_materiais',\r\n  ORCAMENTOS: 'pietra_orcamentos',\r\n  PRECOS: 'pietra_precos',\r\n  LOGADO: 'pietra_logado'\r\n};\r\n\r\n// Configura√ß√£o padr√£o de pre√ßos\r\nexport const PRECOS_PADRAO = {\r\n  // Acabamentos (por metro linear)\r\n  polimento: 22,\r\n  esquadria: 35,\r\n  boleado: 15,\r\n  canal: 15,\r\n  // Recortes (por unidade)\r\n  pia: 100,\r\n  cubaEsculpida: 630,\r\n  cooktop: 150,\r\n  recorte: 60,\r\n  pes: 200\r\n};\r\n\r\n// Espa√ßamento entre pe√ßas nas chapas (mm)\r\nexport const ESPACAMENTO_CHAPAS = 4;\r\n","import { STORAGE_KEYS, PRECOS_PADRAO } from '../constants/config';\r\n\r\n// Utilit√°rios para gerenciar localStorage\r\nexport const storage = {\r\n  // Materiais\r\n  getMateriais: () => {\r\n    try {\r\n      const data = localStorage.getItem(STORAGE_KEYS.MATERIAIS);\r\n      return data ? JSON.parse(data) : [];\r\n    } catch (error) {\r\n      console.error('Erro ao carregar materiais:', error);\r\n      return [];\r\n    }\r\n  },\r\n\r\n  setMateriais: (materiais) => {\r\n    try {\r\n      localStorage.setItem(STORAGE_KEYS.MATERIAIS, JSON.stringify(materiais));\r\n    } catch (error) {\r\n      console.error('Erro ao salvar materiais:', error);\r\n    }\r\n  },\r\n\r\n  // Or√ßamentos\r\n  getOrcamentos: () => {\r\n    try {\r\n      const data = localStorage.getItem(STORAGE_KEYS.ORCAMENTOS);\r\n      return data ? JSON.parse(data) : [];\r\n    } catch (error) {\r\n      console.error('Erro ao carregar or√ßamentos:', error);\r\n      return [];\r\n    }\r\n  },\r\n\r\n  setOrcamentos: (orcamentos) => {\r\n    try {\r\n      localStorage.setItem(STORAGE_KEYS.ORCAMENTOS, JSON.stringify(orcamentos));\r\n    } catch (error) {\r\n      console.error('Erro ao salvar or√ßamentos:', error);\r\n    }\r\n  },\r\n\r\n  // Pre√ßos\r\n  getPrecos: () => {\r\n    try {\r\n      const data = localStorage.getItem(STORAGE_KEYS.PRECOS);\r\n      return data ? JSON.parse(data) : PRECOS_PADRAO;\r\n    } catch (error) {\r\n      console.error('Erro ao carregar pre√ßos:', error);\r\n      return PRECOS_PADRAO;\r\n    }\r\n  },\r\n\r\n  setPrecos: (precos) => {\r\n    try {\r\n      localStorage.setItem(STORAGE_KEYS.PRECOS, JSON.stringify(precos));\r\n    } catch (error) {\r\n      console.error('Erro ao salvar pre√ßos:', error);\r\n    }\r\n  },\r\n\r\n  // Login\r\n  isLogado: () => {\r\n    return localStorage.getItem(STORAGE_KEYS.LOGADO) === 'true';\r\n  },\r\n\r\n  setLogado: (logado) => {\r\n    localStorage.setItem(STORAGE_KEYS.LOGADO, logado ? 'true' : 'false');\r\n  },\r\n\r\n  logout: () => {\r\n    localStorage.removeItem(STORAGE_KEYS.LOGADO);\r\n  }\r\n};\r\n","import { useState, useEffect } from 'react';\r\nimport { SENHA_DO_SISTEMA } from '../../constants/config';\r\nimport { storage } from '../../utils/storage';\r\n\r\nexport const TelaLogin = ({ aoEntrar }) => {\r\n  const [senha, setSenha] = useState('');\r\n  const [erro, setErro] = useState(false);\r\n  const [tentativas, setTentativas] = useState(0);\r\n  const [bloqueado, setBloqueado] = useState(false);\r\n  const [segundosRestantes, setSegundosRestantes] = useState(0);\r\n\r\n  useEffect(() => {\r\n    let timer;\r\n    if (bloqueado && segundosRestantes > 0) {\r\n      timer = setTimeout(() => setSegundosRestantes(s => s - 1), 1000);\r\n    }\r\n    if (segundosRestantes === 0 && bloqueado) {\r\n      setBloqueado(false);\r\n      setTentativas(0);\r\n    }\r\n    return () => clearTimeout(timer);\r\n  }, [bloqueado, segundosRestantes]);\r\n\r\n  const tentar = () => {\r\n    if (bloqueado || !senha) return;\r\n    if (senha === SENHA_DO_SISTEMA) {\r\n      storage.setLogado(true);\r\n      aoEntrar();\r\n    } else {\r\n      const novas = tentativas + 1;\r\n      setTentativas(novas);\r\n      setErro(true);\r\n      setSenha('');\r\n      setTimeout(() => setErro(false), 2500);\r\n      if (novas >= 5) {\r\n        setBloqueado(true);\r\n        setSegundosRestantes(30);\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        minHeight: '100vh',\r\n        background: 'linear-gradient(135deg, #1e293b 0%, #0f172a 50%, #1e1b4b 100%)',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        padding: '16px',\r\n        fontFamily: 'system-ui, sans-serif'\r\n      }}\r\n    >\r\n      <div style={{ width: '100%', maxWidth: '380px' }}>\r\n        {/* √çcone */}\r\n        <div style={{ display: 'flex', justifyContent: 'center', marginBottom: '24px' }}>\r\n          <div\r\n            style={{\r\n              width: '80px',\r\n              height: '80px',\r\n              background: 'linear-gradient(135deg, #3b82f6, #2563eb)',\r\n              borderRadius: '20px',\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              justifyContent: 'center',\r\n              boxShadow: '0 10px 40px rgba(59,130,246,0.3)',\r\n              fontSize: '38px'\r\n            }}\r\n          >\r\n            ‚äû\r\n          </div>\r\n        </div>\r\n\r\n        {/* T√≠tulo */}\r\n        <h1\r\n          style={{\r\n            color: '#fff',\r\n            fontSize: '28px',\r\n            fontWeight: 'bold',\r\n            textAlign: 'center',\r\n            margin: '0 0 4px 0'\r\n          }}\r\n        >\r\n          Pietra Ambientes\r\n        </h1>\r\n        <p\r\n          style={{\r\n            color: '#94a3b8',\r\n            textAlign: 'center',\r\n            margin: '0 0 32px 0',\r\n            fontSize: '14px'\r\n          }}\r\n        >\r\n          Sistema de Or√ßamentos\r\n        </p>\r\n\r\n        {/* Card */}\r\n        <div\r\n          style={{\r\n            background: '#1e293b',\r\n            borderRadius: '20px',\r\n            border: '1px solid #334155',\r\n            padding: '32px',\r\n            boxShadow: '0 25px 50px rgba(0,0,0,0.4)'\r\n          }}\r\n        >\r\n          <label\r\n            style={{\r\n              display: 'block',\r\n              color: '#cbd5e1',\r\n              fontSize: '13px',\r\n              fontWeight: '600',\r\n              marginBottom: '8px'\r\n            }}\r\n          >\r\n            Senha de Acesso\r\n          </label>\r\n\r\n          <input\r\n            type=\"password\"\r\n            value={senha}\r\n            onChange={(e) => setSenha(e.target.value)}\r\n            onKeyDown={(e) => {\r\n              if (e.key === 'Enter') tentar();\r\n            }}\r\n            placeholder={bloqueado ? `Bloqueado... ${segundosRestantes}s` : '‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢'}\r\n            disabled={bloqueado}\r\n            autoFocus\r\n            style={{\r\n              width: '100%',\r\n              padding: '12px 16px',\r\n              borderRadius: '12px',\r\n              border: erro ? '2px solid #ef4444' : '1px solid #475569',\r\n              background: bloqueado ? '#1e293b' : '#334155',\r\n              color: '#fff',\r\n              fontSize: '16px',\r\n              outline: 'none',\r\n              boxSizing: 'border-box',\r\n              cursor: bloqueado ? 'not-allowed' : 'text',\r\n              transition: 'border 0.2s'\r\n            }}\r\n          />\r\n\r\n          {/* Erro */}\r\n          {erro && (\r\n            <p\r\n              style={{\r\n                color: '#f87171',\r\n                fontSize: '13px',\r\n                marginTop: '8px',\r\n                margin: '8px 0 0 0'\r\n              }}\r\n            >\r\n              ‚ö†Ô∏è Senha incorreta. Tentativas restantes: {5 - tentativas}\r\n            </p>\r\n          )}\r\n\r\n          {/* Bloqueado */}\r\n          {bloqueado && (\r\n            <p\r\n              style={{\r\n                color: '#fbbf24',\r\n                fontSize: '13px',\r\n                marginTop: '8px',\r\n                margin: '8px 0 0 0'\r\n              }}\r\n            >\r\n              üîí Bloqueado por tentativas. Aguarde {segundosRestantes}s\r\n            </p>\r\n          )}\r\n\r\n          {/* Bot√£o */}\r\n          <button\r\n            onClick={tentar}\r\n            disabled={bloqueado || !senha}\r\n            style={{\r\n              width: '100%',\r\n              marginTop: '24px',\r\n              padding: '13px',\r\n              borderRadius: '12px',\r\n              border: 'none',\r\n              background:\r\n                bloqueado || !senha\r\n                  ? '#475569'\r\n                  : 'linear-gradient(135deg, #3b82f6, #2563eb)',\r\n              color: '#fff',\r\n              fontSize: '15px',\r\n              fontWeight: '700',\r\n              cursor: bloqueado || !senha ? 'not-allowed' : 'pointer',\r\n              boxShadow:\r\n                bloqueado || !senha ? 'none' : '0 4px 15px rgba(59,130,246,0.4)',\r\n              transition: 'all 0.2s'\r\n            }}\r\n          >\r\n            {bloqueado ? 'üîí Bloqueado' : 'Entrar'}\r\n          </button>\r\n        </div>\r\n\r\n        {/* Rodap√© */}\r\n        <p\r\n          style={{\r\n            color: '#475569',\r\n            textAlign: 'center',\r\n            fontSize: '12px',\r\n            marginTop: '20px'\r\n          }}\r\n        >\r\n          Acesso restrito ¬∑ Fale com o administrador para obter a senha\r\n        </p>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","// Formatar valor em R$ brasileiro (R$ 1.234,56)\r\nexport const formatBRL = (valor) => {\r\n  return 'R$ ' + Number(valor).toLocaleString('pt-BR', {\r\n    minimumFractionDigits: 2,\r\n    maximumFractionDigits: 2\r\n  });\r\n};\r\n","import { ESPACAMENTO_CHAPAS } from '../constants/config';\r\n\r\n/**\r\n * Converte √°rea de mm¬≤ para m¬≤\r\n */\r\nexport const mm2ToM2 = (areaMm2) => {\r\n  return areaMm2 / 1000000;\r\n};\r\n\r\n/**\r\n * Calcula √°rea em m¬≤ a partir de dimens√µes em mm\r\n */\r\nexport const calcularAreaM2 = (comprimentoMm, alturaMm) => {\r\n  return mm2ToM2(comprimentoMm * alturaMm);\r\n};\r\n\r\n/**\r\n * Converte pre√ßo por chapa para pre√ßo por m¬≤\r\n */\r\nexport const converterPrecoParaM2 = (precoChapa, comprimentoMm, alturaMm) => {\r\n  const areaM2 = calcularAreaM2(comprimentoMm, alturaMm);\r\n  return precoChapa / areaM2;\r\n};\r\n\r\n/**\r\n * Calcula os custos detalhados de uma √∫nica pe√ßa\r\n */\r\nexport const calcularCustosPeca = (peca, material, precos) => {\r\n  if (!peca || !material) return { area: 0, custoMaterial: 0, acabamentos: 0, recortes: 0, total: 0, detalhesAcabamentos: [], detalhesRecortes: [] };\r\n\r\n  const largura = peca.rotacao === 90 ? peca.altura : peca.comprimento;\r\n  const altura = peca.rotacao === 90 ? peca.comprimento : peca.altura;\r\n  const area = calcularAreaM2(largura, altura);\r\n\r\n  // Custo do material (√°rea √ó pre√ßo de venda)\r\n  const custoMaterial = area * (material.venda || material.custo);\r\n\r\n  // Calcular acabamentos\r\n  let totalAcabamentos = 0;\r\n  const detalhesAcabamentos = [];\r\n\r\n  if (peca.acabamentos) {\r\n    ['esquadria', 'boleado', 'polimento', 'canal'].forEach(tipo => {\r\n      const acab = peca.acabamentos[tipo];\r\n      if (acab && acab.ativo) {\r\n        let totalMm = 0;\r\n        const lados = acab.lados;\r\n        if (lados.superior) totalMm += largura;\r\n        if (lados.inferior) totalMm += largura;\r\n        if (lados.esquerda) totalMm += altura;\r\n        if (lados.direita) totalMm += altura;\r\n\r\n        if (totalMm > 0) {\r\n          const metros = totalMm / 1000;\r\n          const valor = metros * precos[tipo];\r\n          totalAcabamentos += valor;\r\n          detalhesAcabamentos.push({ tipo, metros: metros.toFixed(2), valor });\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  // Calcular recortes\r\n  let totalRecortes = 0;\r\n  const detalhesRecortes = [];\r\n\r\n  if (peca.cuba && peca.cuba > 0) {\r\n    const valor = peca.cuba * precos.pia;\r\n    totalRecortes += valor;\r\n    detalhesRecortes.push({ tipo: 'Cuba', quantidade: peca.cuba, valor });\r\n  }\r\n  if (peca.cubaEsculpida && peca.cubaEsculpida > 0) {\r\n    const valor = peca.cubaEsculpida * precos.cubaEsculpida;\r\n    totalRecortes += valor;\r\n    detalhesRecortes.push({ tipo: 'Cuba Esculpida', quantidade: peca.cubaEsculpida, valor });\r\n  }\r\n  if (peca.cooktop && peca.cooktop > 0) {\r\n    const valor = peca.cooktop * precos.cooktop;\r\n    totalRecortes += valor;\r\n    detalhesRecortes.push({ tipo: 'Cooktop', quantidade: peca.cooktop, valor });\r\n  }\r\n  if (peca.recorte && peca.recorte > 0) {\r\n    const valor = peca.recorte * precos.recorte;\r\n    totalRecortes += valor;\r\n    detalhesRecortes.push({ tipo: 'Recorte', quantidade: peca.recorte, valor });\r\n  }\r\n  if (peca.pes && peca.pes > 0) {\r\n    const valor = peca.pes * precos.pes;\r\n    totalRecortes += valor;\r\n    detalhesRecortes.push({ tipo: 'P√©s', quantidade: peca.pes, valor });\r\n  }\r\n\r\n  return {\r\n    area,\r\n    custoMaterial,\r\n    acabamentos: totalAcabamentos,\r\n    recortes: totalRecortes,\r\n    total: custoMaterial + totalAcabamentos + totalRecortes,\r\n    detalhesAcabamentos,\r\n    detalhesRecortes\r\n  };\r\n};\r\n\r\n/**\r\n * Organiza todas as pe√ßas de um or√ßamento em chapas de material\r\n * Retorna o or√ßamento atualizado com chapas e pe√ßas posicionadas\r\n */\r\nexport const organizarPecasEmChapas = (orcamento, materiais) => {\r\n  const todasPecas = orcamento.ambientes.flatMap(amb => amb.pecas);\r\n  const chapas = [];\r\n  const espacamento = ESPACAMENTO_CHAPAS;\r\n\r\n  // Agrupar por material\r\n  const pecasPorMaterial = {};\r\n  todasPecas.forEach(peca => {\r\n    if (!pecasPorMaterial[peca.materialId]) {\r\n      pecasPorMaterial[peca.materialId] = [];\r\n    }\r\n    pecasPorMaterial[peca.materialId].push(peca);\r\n  });\r\n\r\n  // Para cada material, organizar em chapas\r\n  Object.keys(pecasPorMaterial).forEach(materialId => {\r\n    const material = materiais.find(m => m.id === parseInt(materialId));\r\n    if (!material) return;\r\n\r\n    const pecas = pecasPorMaterial[materialId];\r\n\r\n    pecas.forEach(peca => {\r\n      let colocada = false;\r\n\r\n      // Tentar colocar nas chapas existentes primeiro\r\n      for (let chapa of chapas.filter(c => c.materialId === parseInt(materialId))) {\r\n        const pos = encontrarPosicaoNaChapa(chapa, peca, material, espacamento);\r\n        if (pos) {\r\n          peca.chapaId = chapa.id;\r\n          peca.posX = pos.x;\r\n          peca.posY = pos.y;\r\n          chapa.pecas.push(peca);\r\n          colocada = true;\r\n          break;\r\n        }\r\n      }\r\n\r\n      // Se n√£o coube em nenhuma chapa existente, criar nova\r\n      if (!colocada) {\r\n        const novaChapa = {\r\n          id: Date.now() + Math.random(),\r\n          materialId: parseInt(materialId),\r\n          material,\r\n          pecas: []\r\n        };\r\n\r\n        peca.chapaId = novaChapa.id;\r\n        peca.posX = espacamento;\r\n        peca.posY = espacamento;\r\n        novaChapa.pecas.push(peca);\r\n        chapas.push(novaChapa);\r\n      }\r\n    });\r\n  });\r\n\r\n  // Atualizar ambientes com as pe√ßas posicionadas\r\n  const ambientesAtualizados = orcamento.ambientes.map(amb => ({\r\n    ...amb,\r\n    pecas: amb.pecas.map(p => {\r\n      const pecaAtualizada = todasPecas.find(tp => tp.id === p.id);\r\n      return pecaAtualizada || p;\r\n    })\r\n  }));\r\n\r\n  return { ...orcamento, chapas, ambientes: ambientesAtualizados };\r\n};\r\n\r\n/**\r\n * Encontra uma posi√ß√£o v√°lida para uma pe√ßa dentro de uma chapa\r\n * Considera rota√ß√£o da pe√ßa e espa√ßamento entre pe√ßas\r\n */\r\nexport const encontrarPosicaoNaChapa = (chapa, peca, material, espacamento) => {\r\n  const larguraChapa = material.comprimento;\r\n  const alturaChapa = material.altura;\r\n\r\n  // Considerar rota√ß√£o da pe√ßa\r\n  const pecaLargura = peca.rotacao === 90 ? peca.altura : peca.comprimento;\r\n  const pecaAltura = peca.rotacao === 90 ? peca.comprimento : peca.altura;\r\n\r\n  // Tentar diferentes posi√ß√µes, come√ßando do canto superior esquerdo\r\n  for (let y = espacamento; y + pecaAltura + espacamento <= alturaChapa; y += 5) {\r\n    for (let x = espacamento; x + pecaLargura + espacamento <= larguraChapa; x += 5) {\r\n      // Verificar se n√£o sobrep√µe com outras pe√ßas (considerando espa√ßamento de 4mm)\r\n      const sobrepoe = chapa.pecas.some(p => {\r\n        const pLargura = p.rotacao === 90 ? p.altura : p.comprimento;\r\n        const pAltura = p.rotacao === 90 ? p.comprimento : p.altura;\r\n\r\n        const distanciaX = Math.abs((x + pecaLargura / 2) - (p.posX + pLargura / 2));\r\n        const distanciaY = Math.abs((y + pecaAltura / 2) - (p.posY + pAltura / 2));\r\n        const somaLarguras = (pecaLargura + pLargura) / 2 + espacamento;\r\n        const somaAlturas = (pecaAltura + pAltura) / 2 + espacamento;\r\n\r\n        return distanciaX < somaLarguras && distanciaY < somaAlturas;\r\n      });\r\n\r\n      if (!sobrepoe) {\r\n        return { x, y };\r\n      }\r\n    }\r\n  }\r\n  return null;\r\n};\r\n\r\n/**\r\n * Calcula os detalhes financeiros completos de um or√ßamento\r\n * Retorna custos, vendas, margens e detalhes de acabamentos e recortes\r\n */\r\nexport const calcularOrcamentoComDetalhes = (orcamentoAtual, materiais, precos) => {\r\n  if (!orcamentoAtual) return {\r\n    custoChapas: 0,\r\n    vendaChapas: 0,\r\n    margemChapas: 0,\r\n    acabamentos: 0,\r\n    recortes: 0,\r\n    custoTotal: 0,\r\n    vendaTotal: 0,\r\n    margemTotal: 0,\r\n    chapasPorMaterial: {},\r\n    detalhesAcabamentos: [],\r\n    detalhesRecortes: []\r\n  };\r\n\r\n  // NOVA L√ìGICA: C√°lculo por m¬≤\r\n  let custoChapas = 0;\r\n  let vendaChapas = 0;\r\n  const chapasPorMaterial = {};\r\n  const detalhesChapas = [];\r\n\r\n  orcamentoAtual.chapas.forEach(chapa => {\r\n    const material = materiais.find(m => m.id === chapa.materialId);\r\n    if (!material) return;\r\n\r\n    // Contar chapas por material (para exibi√ß√£o)\r\n    const key = chapa.materialId;\r\n    chapasPorMaterial[key] = (chapasPorMaterial[key] || 0) + 1;\r\n\r\n    // Calcular √°rea total da chapa em m¬≤\r\n    const areaTotalChapa = calcularAreaM2(material.comprimento, material.altura);\r\n\r\n    // Calcular √°rea total das pe√ßas nesta chapa\r\n    let areaPecasM2 = 0;\r\n    chapa.pecas.forEach(peca => {\r\n      const larguraPeca = peca.rotacao === 90 ? peca.altura : peca.comprimento;\r\n      const alturaPeca = peca.rotacao === 90 ? peca.comprimento : peca.altura;\r\n      areaPecasM2 += calcularAreaM2(larguraPeca, alturaPeca);\r\n    });\r\n\r\n    // Calcular √°rea da sobra\r\n    const areaSobraM2 = areaTotalChapa - areaPecasM2;\r\n\r\n    // Cobrar pe√ßas pelo pre√ßo de VENDA por m¬≤\r\n    const vendaPecas = areaPecasM2 * (material.venda || material.custo);\r\n\r\n    // Cobrar sobra pelo pre√ßo de CUSTO por m¬≤\r\n    const custoSobra = areaSobraM2 * material.custo;\r\n\r\n    // Adicionar custo base das pe√ßas (necess√°rio para c√°lculo de margem)\r\n    const custoPecas = areaPecasM2 * material.custo;\r\n\r\n    // Acumular totais\r\n    // Cliente paga: pe√ßas (pre√ßo venda) + sobra (pre√ßo custo)\r\n    vendaChapas += vendaPecas + custoSobra;\r\n    // Custo real: pe√ßas (pre√ßo custo) + sobra (pre√ßo custo)\r\n    custoChapas += custoPecas + custoSobra;\r\n\r\n    // Guardar detalhes para exibi√ß√£o\r\n    detalhesChapas.push({\r\n      chapaId: chapa.id,\r\n      materialId: material.id,\r\n      materialNome: material.nome,\r\n      areaTotal: areaTotalChapa,\r\n      areaPecas: areaPecasM2,\r\n      areaSobra: areaSobraM2,\r\n      custoSobra: custoSobra,\r\n      custoPecas: custoPecas,\r\n      vendaPecas: vendaPecas,\r\n      percentualAproveitamento: (areaPecasM2 / areaTotalChapa) * 100\r\n    });\r\n  });\r\n\r\n  let totalAcabamentos = 0;\r\n  let totalRecortes = 0;\r\n  const detalhesAcabamentos = [];\r\n  const detalhesRecortes = [];\r\n\r\n  orcamentoAtual.ambientes.forEach((ambiente, ambIdx) => {\r\n    ambiente.pecas.forEach((peca, pecaIdx) => {\r\n      const nomePeca = peca.nome || `${ambiente.nome} - Pe√ßa #${pecaIdx + 1}`;\r\n\r\n      // Calcular acabamentos por lado\r\n      if (peca.acabamentos) {\r\n        const largura = peca.rotacao === 90 ? peca.altura : peca.comprimento;\r\n        const altura = peca.rotacao === 90 ? peca.comprimento : peca.altura;\r\n\r\n        // Esquadria\r\n        if (peca.acabamentos.esquadria && peca.acabamentos.esquadria.ativo) {\r\n          let totalMm = 0;\r\n          const lados = peca.acabamentos.esquadria.lados;\r\n          if (lados.superior) totalMm += largura;\r\n          if (lados.inferior) totalMm += largura;\r\n          if (lados.esquerda) totalMm += altura;\r\n          if (lados.direita) totalMm += altura;\r\n\r\n          if (totalMm > 0) {\r\n            const valor = (totalMm / 1000) * precos.esquadria;\r\n            totalAcabamentos += valor;\r\n            detalhesAcabamentos.push({\r\n              tipo: 'Esquadria',\r\n              peca: nomePeca,\r\n              medida: `${totalMm}mm`,\r\n              valor\r\n            });\r\n          }\r\n        }\r\n\r\n        // Boleado\r\n        if (peca.acabamentos.boleado && peca.acabamentos.boleado.ativo) {\r\n          let totalMm = 0;\r\n          const lados = peca.acabamentos.boleado.lados;\r\n          if (lados.superior) totalMm += largura;\r\n          if (lados.inferior) totalMm += largura;\r\n          if (lados.esquerda) totalMm += altura;\r\n          if (lados.direita) totalMm += altura;\r\n\r\n          if (totalMm > 0) {\r\n            const valor = (totalMm / 1000) * precos.boleado;\r\n            totalAcabamentos += valor;\r\n            detalhesAcabamentos.push({\r\n              tipo: 'Boleado',\r\n              peca: nomePeca,\r\n              medida: `${totalMm}mm`,\r\n              valor\r\n            });\r\n          }\r\n        }\r\n\r\n        // Polimento\r\n        if (peca.acabamentos.polimento && peca.acabamentos.polimento.ativo) {\r\n          let totalMm = 0;\r\n          const lados = peca.acabamentos.polimento.lados;\r\n          if (lados.superior) totalMm += largura;\r\n          if (lados.inferior) totalMm += largura;\r\n          if (lados.esquerda) totalMm += altura;\r\n          if (lados.direita) totalMm += altura;\r\n\r\n          if (totalMm > 0) {\r\n            const valor = (totalMm / 1000) * precos.polimento;\r\n            totalAcabamentos += valor;\r\n            detalhesAcabamentos.push({\r\n              tipo: 'Polimento',\r\n              peca: nomePeca,\r\n              medida: `${totalMm}mm`,\r\n              valor\r\n            });\r\n          }\r\n        }\r\n\r\n        // Canal\r\n        if (peca.acabamentos.canal && peca.acabamentos.canal.ativo) {\r\n          let totalMm = 0;\r\n          const lados = peca.acabamentos.canal.lados;\r\n          if (lados.superior) totalMm += largura;\r\n          if (lados.inferior) totalMm += largura;\r\n          if (lados.esquerda) totalMm += altura;\r\n          if (lados.direita) totalMm += altura;\r\n\r\n          if (totalMm > 0) {\r\n            const valor = (totalMm / 1000) * precos.canal;\r\n            totalAcabamentos += valor;\r\n            detalhesAcabamentos.push({\r\n              tipo: 'Canal',\r\n              peca: nomePeca,\r\n              medida: `${totalMm}mm`,\r\n              valor\r\n            });\r\n          }\r\n        }\r\n      }\r\n\r\n      // Recortes (usando pre√ßos configur√°veis)\r\n      if (peca.cuba && peca.cuba > 0) {\r\n        const valor = peca.cuba * precos.pia;\r\n        totalRecortes += valor;\r\n        detalhesRecortes.push({\r\n          tipo: 'Cuba',\r\n          peca: nomePeca,\r\n          quantidade: peca.cuba,\r\n          valorUnit: precos.pia,\r\n          valor\r\n        });\r\n      }\r\n\r\n      if (peca.cubaEsculpida && peca.cubaEsculpida > 0) {\r\n        const valor = peca.cubaEsculpida * precos.cubaEsculpida;\r\n        totalRecortes += valor;\r\n        detalhesRecortes.push({\r\n          tipo: 'Cuba Esculpida',\r\n          peca: nomePeca,\r\n          quantidade: peca.cubaEsculpida,\r\n          valorUnit: precos.cubaEsculpida,\r\n          valor\r\n        });\r\n      }\r\n\r\n      if (peca.cooktop && peca.cooktop > 0) {\r\n        const valor = peca.cooktop * precos.cooktop;\r\n        totalRecortes += valor;\r\n        detalhesRecortes.push({\r\n          tipo: 'Cooktop',\r\n          peca: nomePeca,\r\n          quantidade: peca.cooktop,\r\n          valorUnit: precos.cooktop,\r\n          valor\r\n        });\r\n      }\r\n\r\n      if (peca.recorte && peca.recorte > 0) {\r\n        const valor = peca.recorte * precos.recorte;\r\n        totalRecortes += valor;\r\n        detalhesRecortes.push({\r\n          tipo: 'Recorte',\r\n          peca: nomePeca,\r\n          quantidade: peca.recorte,\r\n          valorUnit: precos.recorte,\r\n          valor\r\n        });\r\n      }\r\n\r\n      if (peca.pes && peca.pes > 0) {\r\n        const valor = peca.pes * precos.pes;\r\n        totalRecortes += valor;\r\n        detalhesRecortes.push({\r\n          tipo: 'P√©s',\r\n          peca: nomePeca,\r\n          quantidade: peca.pes,\r\n          valorUnit: precos.pes,\r\n          valor\r\n        });\r\n      }\r\n    });\r\n  });\r\n\r\n  const margemChapas = vendaChapas - custoChapas;\r\n  const custoTotal = custoChapas + totalAcabamentos + totalRecortes;\r\n  const vendaTotal = vendaChapas + totalAcabamentos + totalRecortes;\r\n  const margemTotal = vendaTotal - custoTotal;\r\n\r\n  return {\r\n    custoChapas,\r\n    vendaChapas,\r\n    margemChapas,\r\n    acabamentos: totalAcabamentos,\r\n    recortes: totalRecortes,\r\n    custoTotal,\r\n    vendaTotal,\r\n    margemTotal,\r\n    chapasPorMaterial,\r\n    detalhesChapas,\r\n    detalhesAcabamentos,\r\n    detalhesRecortes,\r\n    // Manter compatibilidade com c√≥digo antigo\r\n    subtotal: vendaChapas,\r\n    total: vendaTotal\r\n  };\r\n};\r\n","import { useState, useEffect } from 'react';\r\nimport { PRECOS_PADRAO, STORAGE_KEYS } from '../constants/config';\r\n\r\n/**\r\n * Hook para gerenciar configura√ß√£o de pre√ßos do sistema\r\n * Controla pre√ßos de acabamentos e recortes com persist√™ncia no localStorage\r\n */\r\nexport const usePrecos = () => {\r\n  const [precos, setPrecos] = useState(PRECOS_PADRAO);\r\n  const [precosSalvos, setPrecosSalvos] = useState(false);\r\n  const [mostrarPainelPrecos, setMostrarPainelPrecos] = useState(false);\r\n\r\n  // Carregar pre√ßos salvos do localStorage ao montar\r\n  useEffect(() => {\r\n    const precosSalvos = localStorage.getItem(STORAGE_KEYS.PRECOS);\r\n    if (precosSalvos) {\r\n      try {\r\n        setPrecos(JSON.parse(precosSalvos));\r\n      } catch (error) {\r\n        console.error('Erro ao carregar pre√ßos:', error);\r\n      }\r\n    }\r\n  }, []);\r\n\r\n  /**\r\n   * Atualiza um pre√ßo espec√≠fico\r\n   * @param {string} chave - Chave do pre√ßo (ex: 'polimento', 'esquadria')\r\n   * @param {number|string} valor - Novo valor do pre√ßo\r\n   */\r\n  const atualizarPreco = (chave, valor) => {\r\n    const valorNumerico = parseFloat(valor) || 0;\r\n    setPrecos(prev => ({\r\n      ...prev,\r\n      [chave]: valorNumerico\r\n    }));\r\n    setPrecosSalvos(false); // Indica que h√° mudan√ßas n√£o salvas\r\n  };\r\n\r\n  /**\r\n   * Salva pre√ßos no localStorage com feedback visual\r\n   */\r\n  const salvarPrecos = () => {\r\n    localStorage.setItem(STORAGE_KEYS.PRECOS, JSON.stringify(precos));\r\n    setPrecosSalvos(true);\r\n\r\n    // Remover feedback ap√≥s 3 segundos\r\n    setTimeout(() => {\r\n      setPrecosSalvos(false);\r\n    }, 3000);\r\n  };\r\n\r\n  /**\r\n   * Toggle visibilidade do painel de pre√ßos\r\n   */\r\n  const togglePainelPrecos = () => {\r\n    setMostrarPainelPrecos(prev => !prev);\r\n  };\r\n\r\n  return {\r\n    precos,\r\n    precosSalvos,\r\n    mostrarPainelPrecos,\r\n    atualizarPreco,\r\n    salvarPrecos,\r\n    togglePainelPrecos,\r\n    setMostrarPainelPrecos\r\n  };\r\n};\r\n","import { useState, useEffect } from 'react';\r\nimport { STORAGE_KEYS } from '../constants/config';\r\n\r\n/**\r\n * Hook para gerenciar materiais (chapas de m√°rmore/granito)\r\n * Controla CRUD de materiais com persist√™ncia no localStorage\r\n */\r\nexport const useMaterials = () => {\r\n  const [materiais, setMateriais] = useState([\r\n    { id: 1, nome: 'M√°rmore Branco Carrara', comprimento: 3000, altura: 2000, custo: 250, venda: 333.33, precoPorMetro: true }\r\n  ]);\r\n  const [materialEditando, setMaterialEditando] = useState(null);\r\n  const [novoMaterial, setNovoMaterial] = useState({\r\n    nome: '',\r\n    comprimento: '',\r\n    altura: '',\r\n    custo: '',\r\n    venda: ''\r\n  });\r\n\r\n  // Carregar materiais do localStorage ao montar\r\n  useEffect(() => {\r\n    const materiaisSalvos = localStorage.getItem(STORAGE_KEYS.MATERIAIS);\r\n    if (materiaisSalvos) {\r\n      try {\r\n        const dados = JSON.parse(materiaisSalvos);\r\n        if (Array.isArray(dados) && dados.length > 0) {\r\n          setMateriais(dados);\r\n        }\r\n      } catch (error) {\r\n        console.error('Erro ao carregar materiais:', error);\r\n      }\r\n    }\r\n  }, []);\r\n\r\n  // Salvar materiais automaticamente quando mudam\r\n  useEffect(() => {\r\n    if (materiais.length > 0) {\r\n      localStorage.setItem(STORAGE_KEYS.MATERIAIS, JSON.stringify(materiais));\r\n      console.log('üíæ Materiais salvos automaticamente');\r\n    }\r\n  }, [materiais]);\r\n\r\n  /**\r\n   * Adiciona um novo material\r\n   * @param {Object} material - Dados do material (nome, comprimento, altura, custo, venda)\r\n   */\r\n  const adicionarMaterial = (material) => {\r\n    const novoId = materiais.length > 0\r\n      ? Math.max(...materiais.map(m => m.id)) + 1\r\n      : 1;\r\n\r\n    const materialComId = {\r\n      ...material,\r\n      id: novoId,\r\n      comprimento: parseFloat(material.comprimento) || 0,\r\n      altura: parseFloat(material.altura) || 0,\r\n      custo: parseFloat(material.custo) || 0,\r\n      venda: parseFloat(material.venda) || parseFloat(material.custo) || 0,\r\n      precoPorMetro: true  // Nova flag indicando precifica√ß√£o por m¬≤\r\n    };\r\n\r\n    setMateriais(prev => [...prev, materialComId]);\r\n    resetNovoMaterial();\r\n  };\r\n\r\n  /**\r\n   * Exclui um material\r\n   * @param {number} materialId - ID do material a ser exclu√≠do\r\n   */\r\n  const excluirMaterial = (materialId) => {\r\n    setMateriais(prev => prev.filter(m => m.id !== materialId));\r\n  };\r\n\r\n  /**\r\n   * Atualiza os dados de um material existente\r\n   * NOTA: Esta √© uma vers√£o simplificada. Para atualiza√ß√£o completa com\r\n   * reorganiza√ß√£o de or√ßamentos, use a fun√ß√£o atualizarMaterial do componente principal\r\n   * @param {number} materialId - ID do material\r\n   * @param {Object} novosDados - Novos dados do material\r\n   */\r\n  const atualizarMaterialSimples = (materialId, novosDados) => {\r\n    const materiaisAtualizados = materiais.map(m =>\r\n      m.id === materialId ? { ...m, ...novosDados } : m\r\n    );\r\n    setMateriais(materiaisAtualizados);\r\n  };\r\n\r\n  /**\r\n   * Inicia o modo de edi√ß√£o de um material\r\n   * @param {Object} material - Material a ser editado\r\n   */\r\n  const iniciarEdicao = (material) => {\r\n    setMaterialEditando(material);\r\n    setNovoMaterial({\r\n      nome: material.nome,\r\n      comprimento: material.comprimento.toString(),\r\n      altura: material.altura.toString(),\r\n      custo: material.custo.toString(),\r\n      venda: material.venda.toString()\r\n    });\r\n  };\r\n\r\n  /**\r\n   * Cancela o modo de edi√ß√£o\r\n   */\r\n  const cancelarEdicao = () => {\r\n    setMaterialEditando(null);\r\n    resetNovoMaterial();\r\n  };\r\n\r\n  /**\r\n   * Reseta o formul√°rio de novo material\r\n   */\r\n  const resetNovoMaterial = () => {\r\n    setNovoMaterial({ nome: '', comprimento: '', altura: '', custo: '', venda: '' });\r\n  };\r\n\r\n  /**\r\n   * Atualiza um campo do formul√°rio de novo material\r\n   * @param {string} campo - Nome do campo\r\n   * @param {any} valor - Novo valor\r\n   */\r\n  const atualizarCampoMaterial = (campo, valor) => {\r\n    setNovoMaterial(prev => ({ ...prev, [campo]: valor }));\r\n  };\r\n\r\n  /**\r\n   * Busca um material por ID\r\n   * @param {number} materialId - ID do material\r\n   * @returns {Object|undefined} Material encontrado ou undefined\r\n   */\r\n  const buscarMaterialPorId = (materialId) => {\r\n    return materiais.find(m => m.id === materialId);\r\n  };\r\n\r\n  return {\r\n    materiais,\r\n    materialEditando,\r\n    novoMaterial,\r\n    setMateriais,\r\n    setMaterialEditando,\r\n    setNovoMaterial,\r\n    adicionarMaterial,\r\n    excluirMaterial,\r\n    atualizarMaterialSimples,\r\n    iniciarEdicao,\r\n    cancelarEdicao,\r\n    resetNovoMaterial,\r\n    atualizarCampoMaterial,\r\n    buscarMaterialPorId\r\n  };\r\n};\r\n","import { useState, useEffect } from 'react';\r\nimport { STORAGE_KEYS } from '../constants/config';\r\n\r\n/**\r\n * Hook para gerenciar or√ßamentos\r\n * Controla CRUD de or√ßamentos com persist√™ncia no localStorage\r\n */\r\nexport const useBudgets = () => {\r\n  const [orcamentos, setOrcamentos] = useState([]);\r\n  const [orcamentoAtual, setOrcamentoAtual] = useState(null);\r\n  const [mostrarModalNovoOrcamento, setMostrarModalNovoOrcamento] = useState(false);\r\n  const [nomeNovoOrcamento, setNomeNovoOrcamento] = useState('');\r\n\r\n  // Carregar or√ßamentos do localStorage ao montar\r\n  useEffect(() => {\r\n    const orcamentosSalvos = localStorage.getItem(STORAGE_KEYS.ORCAMENTOS);\r\n    if (orcamentosSalvos) {\r\n      try {\r\n        const dados = JSON.parse(orcamentosSalvos);\r\n        if (Array.isArray(dados)) {\r\n          setOrcamentos(dados);\r\n        }\r\n      } catch (error) {\r\n        console.error('Erro ao carregar or√ßamentos:', error);\r\n      }\r\n    }\r\n  }, []);\r\n\r\n  // Salvar or√ßamentos automaticamente quando mudam\r\n  useEffect(() => {\r\n    localStorage.setItem(STORAGE_KEYS.ORCAMENTOS, JSON.stringify(orcamentos));\r\n    console.log('üíæ Or√ßamentos salvos automaticamente');\r\n  }, [orcamentos]);\r\n\r\n  /**\r\n   * Abre o modal para criar novo or√ßamento\r\n   */\r\n  const abrirModalNovoOrcamento = () => {\r\n    setMostrarModalNovoOrcamento(true);\r\n    setNomeNovoOrcamento('');\r\n  };\r\n\r\n  /**\r\n   * Fecha o modal de novo or√ßamento\r\n   */\r\n  const fecharModalNovoOrcamento = () => {\r\n    setMostrarModalNovoOrcamento(false);\r\n    setNomeNovoOrcamento('');\r\n  };\r\n\r\n  /**\r\n   * Cria um novo or√ßamento\r\n   * @param {string} nome - Nome do or√ßamento (opcional, usa nomeNovoOrcamento se n√£o fornecido)\r\n   * @returns {Object} Novo or√ßamento criado\r\n   */\r\n  const criarOrcamento = (nome) => {\r\n    const nomeOrcamento = nome || nomeNovoOrcamento;\r\n\r\n    if (!nomeOrcamento.trim()) {\r\n      alert('Por favor, insira um nome para o or√ßamento.');\r\n      return null;\r\n    }\r\n\r\n    const novoId = orcamentos.length > 0\r\n      ? Math.max(...orcamentos.map(o => o.id)) + 1\r\n      : 1;\r\n\r\n    const novoOrcamento = {\r\n      id: novoId,\r\n      nome: nomeOrcamento,\r\n      dataCriacao: new Date().toISOString(),\r\n      ambientes: [],\r\n      chapas: []\r\n    };\r\n\r\n    setOrcamentos(prev => [...prev, novoOrcamento]);\r\n    setOrcamentoAtual(novoOrcamento);\r\n    fecharModalNovoOrcamento();\r\n\r\n    return novoOrcamento;\r\n  };\r\n\r\n  /**\r\n   * Adiciona um ambiente ao or√ßamento atual\r\n   * @param {string} nomeAmbiente - Nome do ambiente\r\n   */\r\n  const adicionarAmbiente = (nomeAmbiente) => {\r\n    if (!orcamentoAtual) return;\r\n\r\n    const novoId = orcamentoAtual.ambientes.length > 0\r\n      ? Math.max(...orcamentoAtual.ambientes.map(a => a.id)) + 1\r\n      : 1;\r\n\r\n    const novoAmbiente = {\r\n      id: novoId,\r\n      nome: nomeAmbiente,\r\n      pecas: []\r\n    };\r\n\r\n    const orcamentoAtualizado = {\r\n      ...orcamentoAtual,\r\n      ambientes: [...orcamentoAtual.ambientes, novoAmbiente]\r\n    };\r\n\r\n    setOrcamentoAtual(orcamentoAtualizado);\r\n\r\n    // Atualizar tamb√©m na lista de or√ßamentos\r\n    setOrcamentos(prev => prev.map(orc =>\r\n      orc.id === orcamentoAtual.id ? orcamentoAtualizado : orc\r\n    ));\r\n  };\r\n\r\n  /**\r\n   * Remove um ambiente do or√ßamento atual\r\n   * @param {number} ambienteId - ID do ambiente\r\n   */\r\n  const removerAmbiente = (ambienteId) => {\r\n    if (!orcamentoAtual) return;\r\n\r\n    const orcamentoAtualizado = {\r\n      ...orcamentoAtual,\r\n      ambientes: orcamentoAtual.ambientes.filter(amb => amb.id !== ambienteId)\r\n    };\r\n\r\n    setOrcamentoAtual(orcamentoAtualizado);\r\n\r\n    setOrcamentos(prev => prev.map(orc =>\r\n      orc.id === orcamentoAtual.id ? orcamentoAtualizado : orc\r\n    ));\r\n  };\r\n\r\n  /**\r\n   * Carrega um or√ßamento para edi√ß√£o\r\n   * @param {number} orcamentoId - ID do or√ßamento\r\n   */\r\n  const carregarOrcamento = (orcamentoId) => {\r\n    const orcamento = orcamentos.find(o => o.id === orcamentoId);\r\n    if (orcamento) {\r\n      setOrcamentoAtual(orcamento);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Exclui um or√ßamento\r\n   * @param {number} orcamentoId - ID do or√ßamento\r\n   */\r\n  const excluirOrcamento = (orcamentoId) => {\r\n    setOrcamentos(prev => prev.filter(o => o.id !== orcamentoId));\r\n\r\n    // Se era o or√ßamento atual, limpar\r\n    if (orcamentoAtual?.id === orcamentoId) {\r\n      setOrcamentoAtual(null);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Salva altera√ß√µes do or√ßamento atual na lista\r\n   */\r\n  const salvarOrcamentoAtual = () => {\r\n    if (!orcamentoAtual) return;\r\n\r\n    setOrcamentos(prev => {\r\n      const existe = prev.find(orc => orc.id === orcamentoAtual.id);\r\n\r\n      if (existe) {\r\n        // Atualizar or√ßamento existente\r\n        return prev.map(orc => orc.id === orcamentoAtual.id ? orcamentoAtual : orc);\r\n      } else {\r\n        // Adicionar novo or√ßamento\r\n        return [...prev, orcamentoAtual];\r\n      }\r\n    });\r\n  };\r\n\r\n  /**\r\n   * Atualiza o nome do or√ßamento atual\r\n   * @param {string} novoNome - Novo nome do or√ßamento\r\n   */\r\n  const atualizarNomeOrcamento = (novoNome) => {\r\n    if (!orcamentoAtual) return;\r\n\r\n    const orcamentoAtualizado = {\r\n      ...orcamentoAtual,\r\n      nome: novoNome\r\n    };\r\n\r\n    setOrcamentoAtual(orcamentoAtualizado);\r\n    salvarOrcamentoAtual();\r\n  };\r\n\r\n  return {\r\n    orcamentos,\r\n    orcamentoAtual,\r\n    mostrarModalNovoOrcamento,\r\n    nomeNovoOrcamento,\r\n    setOrcamentos,\r\n    setOrcamentoAtual,\r\n    setNomeNovoOrcamento,\r\n    abrirModalNovoOrcamento,\r\n    fecharModalNovoOrcamento,\r\n    criarOrcamento,\r\n    adicionarAmbiente,\r\n    removerAmbiente,\r\n    carregarOrcamento,\r\n    excluirOrcamento,\r\n    salvarOrcamentoAtual,\r\n    atualizarNomeOrcamento\r\n  };\r\n};\r\n","import { useState, useRef, useEffect } from 'react';\r\nimport { formatBRL } from './utils/formatters';\r\nimport { organizarPecasEmChapas, calcularOrcamentoComDetalhes, calcularCustosPeca } from './utils/calculations';\r\nimport { usePrecos } from './hooks/usePrecos';\r\nimport { useMaterials } from './hooks/useMaterials';\r\nimport { useBudgets } from './hooks/useBudgets';\r\nimport { HomePage } from './pages/HomePage';\r\nimport { MaterialFormPage } from './pages/MaterialFormPage';\r\n\r\n// √çcones (emoji fallback)\r\nconst PlusCircle = () => <span>‚ûï</span>;\r\nconst Trash2 = () => <span>üóëÔ∏è</span>;\r\nconst Edit2 = () => <span>‚úèÔ∏è</span>;\r\nconst Save = () => <span>üíæ</span>;\r\nconst X = () => <span>‚ùå</span>;\r\nconst Move = () => <span>‚ÜîÔ∏è</span>;\r\nconst Grid = () => <span>‚äû</span>;\r\nconst FileText = () => <span>üìÑ</span>;\r\nconst Home = () => <span>üè†</span>;\r\nconst Package = () => <span>üì¶</span>;\r\nconst Printer = () => <span>üñ®Ô∏è</span>;\r\n\r\n\r\nconst SistemaOrcamentoMarmore = () => {\r\n  // Hooks customizados\r\n  const { precos, precosSalvos, mostrarPainelPrecos, atualizarPreco, salvarPrecos, setMostrarPainelPrecos } = usePrecos();\r\n  const { materiais, materialEditando, novoMaterial, setMateriais, setMaterialEditando, setNovoMaterial, adicionarMaterial, excluirMaterial } = useMaterials();\r\n  const { orcamentos, orcamentoAtual, mostrarModalNovoOrcamento, nomeNovoOrcamento, setOrcamentos, setOrcamentoAtual, setNomeNovoOrcamento, abrirModalNovoOrcamento, fecharModalNovoOrcamento, criarOrcamento, adicionarAmbiente, salvarOrcamentoAtual } = useBudgets();\r\n\r\n  const [tela, setTela] = useState('lista'); // lista, novo-material, orcamento, plano-corte, editar-material\r\n  const [mostrandoDetalhePeca, setMostrandoDetalhePeca] = useState(null);\r\n  const [modoEdicaoPeca, setModoEdicaoPeca] = useState(false);\r\n  const [pecaEditada, setPecaEditada] = useState(null);\r\n  const [pecaParaExcluir, setPecaParaExcluir] = useState(null);\r\n  const [pecaArrastando, setPecaArrastando] = useState(null);\r\n\r\n  // Carregar materiais e or√ßamentos ao iniciar\r\n  useEffect(() => {\r\n    const materiaisSalvos = localStorage.getItem('pietra_materiais');\r\n    const orcamentosSalvos = localStorage.getItem('pietra_orcamentos');\r\n    \r\n    if (materiaisSalvos) {\r\n      try {\r\n        const dados = JSON.parse(materiaisSalvos);\r\n        if (Array.isArray(dados) && dados.length > 0) {\r\n          setMateriais(dados);\r\n        }\r\n      } catch (error) {\r\n        console.error('Erro ao carregar materiais:', error);\r\n      }\r\n    }\r\n    \r\n    if (orcamentosSalvos) {\r\n      try {\r\n        const dados = JSON.parse(orcamentosSalvos);\r\n        if (Array.isArray(dados)) {\r\n          setOrcamentos(dados);\r\n        }\r\n      } catch (error) {\r\n        console.error('Erro ao carregar or√ßamentos:', error);\r\n      }\r\n    }\r\n  }, []);\r\n\r\n  // Salvar materiais quando mudam\r\n  useEffect(() => {\r\n    if (materiais.length > 0) {\r\n      localStorage.setItem('pietra_materiais', JSON.stringify(materiais));\r\n      console.log('üíæ Materiais salvos automaticamente');\r\n    }\r\n  }, [materiais]);\r\n\r\n  // Salvar or√ßamentos quando mudam\r\n  useEffect(() => {\r\n    localStorage.setItem('pietra_orcamentos', JSON.stringify(orcamentos));\r\n    console.log('üíæ Or√ßamentos salvos automaticamente');\r\n  }, [orcamentos]);\r\n\r\n\r\n  // Fun√ß√£o para imprimir o plano de corte (compat√≠vel com artifacts)\r\n  const imprimirPlanoCorte = async () => {\r\n    // Carregar jsPDF se ainda n√£o carregado\r\n    if (!window.jspdf) {\r\n      return new Promise((resolve) => {\r\n        const script = document.createElement('script');\r\n        script.src = 'https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js';\r\n        script.onload = () => { gerarPDFPlanoCorte(); resolve(); };\r\n        script.onerror = () => { alert('‚ùå Erro ao carregar biblioteca PDF.'); resolve(); };\r\n        document.head.appendChild(script);\r\n      });\r\n    }\r\n    gerarPDFPlanoCorte();\r\n  };\r\n\r\n  const gerarPDFPlanoCorte = () => {\r\n    const { jsPDF } = window.jspdf;\r\n    if (!orcamentoAtual || !orcamentoAtual.chapas || orcamentoAtual.chapas.length === 0) {\r\n      alert('‚ö†Ô∏è Nenhuma chapa no plano de corte.');\r\n      return;\r\n    }\r\n\r\n    const pdf = new jsPDF({ orientation: 'landscape', unit: 'mm', format: 'a4' });\r\n    // A4 landscape: 297 x 210 mm\r\n    const pageW = 297;\r\n    const pageH = 210;\r\n    const margin = 15;\r\n    const headerH = 22;\r\n\r\n    orcamentoAtual.chapas.forEach((chapa, idx) => {\r\n      if (idx > 0) pdf.addPage();\r\n\r\n      // ---------- HEADER ----------\r\n      // Fundo do header\r\n      pdf.setFillColor(30, 41, 59); // slate-800\r\n      pdf.rect(0, 0, pageW, headerH, 'F');\r\n\r\n      // T√≠tulo\r\n      pdf.setTextColor(255, 255, 255);\r\n      pdf.setFontSize(14);\r\n      pdf.setFont('helvetica', 'bold');\r\n      pdf.text('PLANO DE CORTE', margin, 10);\r\n\r\n      // Nome do or√ßamento\r\n      pdf.setFontSize(9);\r\n      pdf.setFont('helvetica', 'normal');\r\n      pdf.text('Or√ßamento: ' + orcamentoAtual.nome, margin, 17);\r\n\r\n      // Chapa info √† direita\r\n      pdf.setFont('helvetica', 'bold');\r\n      pdf.setFontSize(11);\r\n      pdf.text('Chapa ' + (idx + 1) + ' / ' + orcamentoAtual.chapas.length, pageW - margin - 45, 10);\r\n      pdf.setFontSize(8);\r\n      pdf.setFont('helvetica', 'normal');\r\n      pdf.text(chapa.material?.nome || 'Material', pageW - margin - 45, 17);\r\n\r\n      // ---------- √ÅREA DE DESENHO (com espa√ßo para legenda √† esquerda) ----------\r\n      const legendaW = 58; // largura da coluna de legenda\r\n      const areaTop = headerH + 8;\r\n      const areaLeft = margin + legendaW + 15; // margem para cotas da chapa\r\n      const areaRight = pageW - margin;\r\n      const areaBottom = pageH - margin - 8;\r\n      const areaW = areaRight - areaLeft;\r\n      const areaH = areaBottom - areaTop;\r\n\r\n      // Calcular escala para caber a chapa na √°rea\r\n      const chapaW = chapa.material?.comprimento || 3000;\r\n      const chapaH = chapa.material?.altura || 2000;\r\n      const escalaX = areaW / chapaW;\r\n      const escalaY = areaH / chapaH;\r\n      const escala = Math.min(escalaX, escalaY) * 0.92;\r\n\r\n      const desenhoW = chapaW * escala;\r\n      const desenhoH = chapaH * escala;\r\n      // Centralizar\r\n      const desenhoX = areaLeft + (areaW - desenhoW) / 2;\r\n      const desenhoY = areaTop + (areaH - desenhoH) / 2;\r\n\r\n      // ---------- COTAS DA CHAPA ----------\r\n      pdf.setTextColor(80, 80, 80);\r\n      pdf.setFontSize(8);\r\n      pdf.setFont('helvetica', 'normal');\r\n\r\n      // Cota horizontal (cima)\r\n      const cotaTopY = desenhoY - 5;\r\n      pdf.setDrawColor(100, 100, 100);\r\n      pdf.setLineWidth(0.3);\r\n      // Linha horizontal\r\n      pdf.line(desenhoX, cotaTopY, desenhoX + desenhoW, cotaTopY);\r\n      // Tra√ßos terminais\r\n      pdf.line(desenhoX, cotaTopY - 2, desenhoX, cotaTopY + 2);\r\n      pdf.line(desenhoX + desenhoW, cotaTopY - 2, desenhoX + desenhoW, cotaTopY + 2);\r\n      // Texto\r\n      pdf.setTextColor(30, 41, 59);\r\n      pdf.setFont('helvetica', 'bold');\r\n      pdf.text(chapaW + ' mm', desenhoX + desenhoW / 2, cotaTopY - 2, { align: 'center' });\r\n\r\n      // Cota vertical (esquerda)\r\n      const cotaLeftX = desenhoX - 5;\r\n      pdf.setDrawColor(100, 100, 100);\r\n      pdf.setFont('helvetica', 'normal');\r\n      pdf.line(cotaLeftX, desenhoY, cotaLeftX, desenhoY + desenhoH);\r\n      pdf.line(cotaLeftX - 2, desenhoY, cotaLeftX + 2, desenhoY);\r\n      pdf.line(cotaLeftX - 2, desenhoY + desenhoH, cotaLeftX + 2, desenhoY + desenhoH);\r\n      // Texto vertical\r\n      pdf.setFont('helvetica', 'bold');\r\n      pdf.text(chapaH + ' mm', cotaLeftX - 3, desenhoY + desenhoH / 2, { angle: 90, align: 'center' });\r\n\r\n      // ---------- RET√ÇNGULO DA CHAPA ----------\r\n      pdf.setFillColor(249, 250, 251); // fundo cinza claro\r\n      pdf.setDrawColor(55, 65, 81);\r\n      pdf.setLineWidth(1.2);\r\n      pdf.roundedRect(desenhoX, desenhoY, desenhoW, desenhoH, 1, 1, 'FD');\r\n\r\n      // Grid leve na chapa\r\n      pdf.setDrawColor(220, 220, 220);\r\n      pdf.setLineWidth(0.2);\r\n      const gridSpacing = 500 * escala;\r\n      for (let i = gridSpacing; i < desenhoW; i += gridSpacing) {\r\n        pdf.line(desenhoX + i, desenhoY, desenhoX + i, desenhoY + desenhoH);\r\n      }\r\n      for (let i = gridSpacing; i < desenhoH; i += gridSpacing) {\r\n        pdf.line(desenhoX, desenhoY + i, desenhoX + desenhoW, desenhoY + i);\r\n      }\r\n\r\n      // ---------- PE√áAS (borda desenhada para DENTRO para n√£o sobrepor vizinhas) ----------\r\n      const cores = ['#3b82f6','#10b981','#8b5cf6','#f59e0b','#ef4444','#06b6d4','#ec4899','#14b8a6'];\r\n      const legendaItens = [];\r\n      const bordaW = 0.5; // espessura da borda em mm do PDF\r\n      const inset = bordaW / 2; // quanto encolher cada lado para borda ficar dentro\r\n\r\n      chapa.pecas.forEach((peca, pIdx) => {\r\n        const px = desenhoX + peca.posX * escala;\r\n        const py = desenhoY + peca.posY * escala;\r\n        const pw = (peca.rotacao === 90 ? peca.altura : peca.comprimento) * escala;\r\n        const ph = (peca.rotacao === 90 ? peca.comprimento : peca.altura) * escala;\r\n\r\n        const cor = cores[pIdx % cores.length];\r\n        const r = parseInt(cor.slice(1, 3), 16);\r\n        const g = parseInt(cor.slice(3, 5), 16);\r\n        const b = parseInt(cor.slice(5, 7), 16);\r\n\r\n        // Preencher a √°rea inteira da pe√ßa com cor clara\r\n        pdf.setFillColor(r + (255 - r) * 0.75, g + (255 - g) * 0.75, b + (255 - b) * 0.75);\r\n        pdf.rect(px, py, pw, ph, 'F');\r\n\r\n        // Borda desenhada PARA DENTRO (inset) ‚Äî nunca invade o espa√ßamento\r\n        pdf.setDrawColor(r, g, b);\r\n        pdf.setLineWidth(bordaW);\r\n        pdf.rect(px + inset, py + inset, pw - bordaW, ph - bordaW, 'D');\r\n\r\n        // N√∫mero da pe√ßa (centro)\r\n        if (pw > 3 && ph > 3) {\r\n          pdf.setTextColor(r, g, b);\r\n          pdf.setFontSize(Math.min(12, pw * 0.45, ph * 0.35));\r\n          pdf.setFont('helvetica', 'bold');\r\n          pdf.text(String(pIdx + 1), px + pw / 2, py + ph / 2 + 0.5, { align: 'center' });\r\n\r\n          // Dimens√µes abaixo do n√∫mero\r\n          if (pw > 8 && ph > 7) {\r\n            const fontDim = Math.min(5.5, pw * 0.2, ph * 0.15);\r\n            pdf.setFontSize(fontDim);\r\n            pdf.setFont('helvetica', 'normal');\r\n            pdf.setTextColor(40, 40, 40);\r\n            const dim = peca.rotacao === 90 ? peca.altura + 'x' + peca.comprimento : peca.comprimento + 'x' + peca.altura;\r\n            pdf.text(dim, px + pw / 2, py + ph / 2 + Math.min(3.5, ph * 0.18), { align: 'center' });\r\n          }\r\n        }\r\n\r\n        // Guardar para legenda\r\n        const nome = peca.nome || ('Pe√ßa ' + (pIdx + 1));\r\n        const pecaCompExib = peca.rotacao === 90 ? peca.altura : peca.comprimento;\r\n        const pecaAltExib = peca.rotacao === 90 ? peca.comprimento : peca.altura;\r\n        legendaItens.push({ numero: pIdx + 1, nome, cor, dim: pecaCompExib + 'x' + pecaAltExib, rotado: peca.rotacao === 90 });\r\n      });\r\n\r\n      // ---------- LEGENDA (coluna vertical √† esquerda) ----------\r\n      const legendaX = margin;\r\n      let legendaY = areaTop + 2;\r\n      const legendaLineH = 10; // altura de cada item\r\n\r\n      // T√≠tulo da legenda\r\n      pdf.setFillColor(30, 41, 59);\r\n      pdf.roundedRect(legendaX, legendaY - 4, legendaW, 10, 1, 1, 'F');\r\n      pdf.setTextColor(255, 255, 255);\r\n      pdf.setFontSize(8);\r\n      pdf.setFont('helvetica', 'bold');\r\n      pdf.text('LEGENDA', legendaX + legendaW / 2, legendaY + 2, { align: 'center' });\r\n      legendaY += 12;\r\n\r\n      // Fundo da legenda\r\n      const legendaAltura = Math.min(legendaItens.length * legendaLineH + 6, areaBottom - legendaY);\r\n      pdf.setFillColor(248, 250, 252);\r\n      pdf.setDrawColor(200, 210, 220);\r\n      pdf.setLineWidth(0.3);\r\n      pdf.roundedRect(legendaX, legendaY - 4, legendaW, legendaAltura, 1, 1, 'FD');\r\n\r\n      legendaItens.forEach((item, i) => {\r\n        if (legendaY + 6 > areaBottom) return; // n√£o ultrapassar a √°rea\r\n\r\n        const r = parseInt(item.cor.slice(1, 3), 16);\r\n        const g = parseInt(item.cor.slice(3, 5), 16);\r\n        const b = parseInt(item.cor.slice(5, 7), 16);\r\n\r\n        // Quadradinho colorido\r\n        pdf.setFillColor(r, g, b);\r\n        pdf.rect(legendaX + 2, legendaY - 2.5, 4, 4, 'F');\r\n\r\n        // N√∫mero + nome\r\n        pdf.setTextColor(30, 41, 59);\r\n        pdf.setFontSize(7);\r\n        pdf.setFont('helvetica', 'bold');\r\n        pdf.text(item.numero + '.', legendaX + 8, legendaY + 0.5);\r\n\r\n        pdf.setFont('helvetica', 'normal');\r\n        pdf.setFontSize(6.5);\r\n        // Truncar nome se muito longo\r\n        let nomeExib = item.nome;\r\n        if (nomeExib.length > 18) nomeExib = nomeExib.substring(0, 17) + '‚Ä¶';\r\n        pdf.text(nomeExib, legendaX + 13, legendaY + 0.5);\r\n\r\n        // Dimens√µes + rota√ß√£o\r\n        pdf.setTextColor(100, 110, 120);\r\n        pdf.setFontSize(5.5);\r\n        const rot = item.rotado ? ' ‚Üª' : '';\r\n        pdf.text(item.dim + rot, legendaX + 13, legendaY + 4.5);\r\n\r\n        legendaY += legendaLineH;\r\n      });\r\n\r\n      // ---------- RODAP√â ----------\r\n      pdf.setTextColor(150, 150, 150);\r\n      pdf.setFontSize(6);\r\n      pdf.setFont('helvetica', 'normal');\r\n      pdf.text('Gerado pelo Sistema Pietra  |  ' + new Date().toLocaleDateString('pt-BR'), pageW / 2, pageH - 4, { align: 'center' });\r\n    });\r\n\r\n    // Salvar\r\n    const nome = orcamentoAtual.nome.replace(/[^a-z0-9]/gi, '_');\r\n    pdf.save('PlanoCorte_' + nome + '_' + new Date().toISOString().split('T')[0] + '.pdf');\r\n    alert('‚úÖ PDF do Plano de Corte gerado!\\n' + orcamentoAtual.chapas.length + ' chapa(s)');\r\n  };\r\n\r\n  // Wrapper para criar or√ßamento e navegar para tela de or√ßamento\r\n  const confirmarCriacaoOrcamento = () => {\r\n    const novoOrc = criarOrcamento(nomeNovoOrcamento);\r\n    if (novoOrc) {\r\n      setTela('orcamento');\r\n    }\r\n  };\r\n\r\n  // Adicionar pe√ßa\r\n  const adicionarPeca = (ambienteId, peca) => {\r\n    // Validar se a pe√ßa cabe na chapa do material selecionado\r\n    const material = materiais.find(m => m.id === peca.materialId);\r\n    if (!material) {\r\n      alert('‚ùå Material n√£o encontrado!');\r\n      return;\r\n    }\r\n\r\n    const pecaComp = parseFloat(peca.comprimento);\r\n    const pecaAlt = parseFloat(peca.altura);\r\n    const chapaComp = material.comprimento;\r\n    const chapaAlt = material.altura;\r\n\r\n    // Verificar se cabe de alguma forma (normal ou rotacionada)\r\n    const cabeNormal = pecaComp <= chapaComp && pecaAlt <= chapaAlt;\r\n    const cabeRotacionada = pecaAlt <= chapaComp && pecaComp <= chapaAlt;\r\n\r\n    if (!cabeNormal && !cabeRotacionada) {\r\n      alert(`‚ùå Pe√ßa muito grande!\\n\\nPe√ßa: ${pecaComp} x ${pecaAlt} mm\\nChapa: ${chapaComp} x ${chapaAlt} mm\\n\\nA pe√ßa n√£o cabe na chapa nem rotacionada.`);\r\n      return;\r\n    }\r\n\r\n    // Determinar rota√ß√£o inicial: se n√£o cabe normal mas cabe rotacionada, j√° inicia rotacionada\r\n    const rotacaoInicial = !cabeNormal && cabeRotacionada ? 90 : 0;\r\n\r\n    if (rotacaoInicial === 90) {\r\n      console.log('üîÑ Pe√ßa ser√° rotacionada automaticamente para caber na chapa');\r\n    }\r\n\r\n    const novasPecas = [];\r\n    for (let i = 0; i < (peca.quantidade || 1); i++) {\r\n      novasPecas.push({\r\n        ...peca,\r\n        id: Date.now() + i + Math.random(),\r\n        quantidade: 1,\r\n        ambienteId,\r\n        chapaId: null,\r\n        posX: 0,\r\n        posY: 0,\r\n        rotacao: rotacaoInicial\r\n      });\r\n    }\r\n\r\n    const ambientes = orcamentoAtual.ambientes.map(amb => {\r\n      if (amb.id === ambienteId) {\r\n        return { ...amb, pecas: [...amb.pecas, ...novasPecas] };\r\n      }\r\n      return amb;\r\n    });\r\n\r\n    const novoOrcamento = { ...orcamentoAtual, ambientes };\r\n    setOrcamentoAtual(novoOrcamento);\r\n\r\n    // Sincronizar com a lista de or√ßamentos\r\n    setOrcamentos(prev => prev.map(orc =>\r\n      orc.id === orcamentoAtual.id ? novoOrcamento : orc\r\n    ));\r\n\r\n    // Reorganizar todas as pe√ßas\r\n    setTimeout(() => {\r\n      organizarPecasLocalmente(novoOrcamento);\r\n    }, 0);\r\n  };\r\n\r\n  // Excluir pe√ßa\r\n  const excluirPeca = (ambienteId, pecaId) => {\r\n    console.log('üóëÔ∏è excluirPeca chamada com:', { ambienteId, pecaId });\r\n    \r\n    const ambientes = orcamentoAtual.ambientes.map(amb => {\r\n      if (amb.id === ambienteId) {\r\n        console.log('‚úÇÔ∏è Removendo pe√ßa do ambiente:', amb.id);\r\n        return { ...amb, pecas: amb.pecas.filter(p => p.id !== pecaId) };\r\n      }\r\n      return amb;\r\n    });\r\n    \r\n    console.log('üìã Ambientes atualizados:', ambientes);\r\n\r\n    const novoOrcamento = { ...orcamentoAtual, ambientes };\r\n    setOrcamentoAtual(novoOrcamento);\r\n\r\n    // Sincronizar com a lista de or√ßamentos\r\n    setOrcamentos(prev => prev.map(orc =>\r\n      orc.id === orcamentoAtual.id ? novoOrcamento : orc\r\n    ));\r\n\r\n    console.log('üíæ Or√ßamento atualizado, reorganizando chapas...');\r\n\r\n    // Reorganizar chapas ap√≥s exclus√£o\r\n    setTimeout(() => {\r\n      organizarPecasLocalmente(novoOrcamento);\r\n      console.log('‚úÖ Chapas reorganizadas!');\r\n    }, 0);\r\n  };\r\n\r\n  // Salvar edi√ß√£o da pe√ßa\r\n  const salvarEdicaoPeca = () => {\r\n    if (!pecaEditada || !mostrandoDetalhePeca) return;\r\n\r\n    const ambientes = orcamentoAtual.ambientes.map(amb => ({\r\n      ...amb,\r\n      pecas: amb.pecas.map(p => \r\n        p.id === mostrandoDetalhePeca.id ? pecaEditada : p\r\n      )\r\n    }));\r\n    \r\n    const novoOrcamento = { ...orcamentoAtual, ambientes };\r\n    setOrcamentoAtual(novoOrcamento);\r\n\r\n    // Sincronizar com a lista de or√ßamentos\r\n    setOrcamentos(prev => prev.map(orc =>\r\n      orc.id === orcamentoAtual.id ? novoOrcamento : orc\r\n    ));\r\n\r\n    // Reorganizar chapas se mudou dimens√µes ou material\r\n    if (pecaEditada.comprimento !== mostrandoDetalhePeca.comprimento ||\r\n        pecaEditada.altura !== mostrandoDetalhePeca.altura ||\r\n        pecaEditada.materialId !== mostrandoDetalhePeca.materialId) {\r\n      setTimeout(() => {\r\n        organizarPecasLocalmente(novoOrcamento);\r\n      }, 0);\r\n    }\r\n\r\n    // Fechar modal\r\n    setMostrandoDetalhePeca(null);\r\n    setModoEdicaoPeca(false);\r\n    setPecaEditada(null);\r\n  };\r\n\r\n\r\n  // Gerar PDF de etiquetas t√©rmicas\r\n  const gerarEtiquetasPDF = async () => {\r\n    // Carregar jsPDF dinamicamente\r\n    return new Promise((resolve) => {\r\n      if (window.jspdf) {\r\n        gerarPDFComJsPDF();\r\n        resolve();\r\n        return;\r\n      }\r\n      \r\n      const script = document.createElement('script');\r\n      script.src = 'https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js';\r\n      script.onload = () => {\r\n        gerarPDFComJsPDF();\r\n        resolve();\r\n      };\r\n      script.onerror = () => {\r\n        alert('‚ùå Erro ao carregar biblioteca PDF. Por favor, tente novamente.');\r\n        resolve();\r\n      };\r\n      document.head.appendChild(script);\r\n    });\r\n  };\r\n\r\n  const gerarPDFComJsPDF = () => {\r\n    const { jsPDF } = window.jspdf;\r\n    const todasPecas = orcamentoAtual.ambientes.flatMap(amb => \r\n      amb.pecas.map(peca => ({ ...peca, ambienteNome: amb.nome }))\r\n    );\r\n    \r\n    // Criar PDF com p√°ginas do tamanho da etiqueta (100x60mm)\r\n    const pdf = new jsPDF({\r\n      orientation: 'landscape',\r\n      unit: 'mm',\r\n      format: [100, 60]\r\n    });\r\n    \r\n    let primeira = true;\r\n    \r\n    todasPecas.forEach((peca, index) => {\r\n      if (!primeira) {\r\n        pdf.addPage([100, 60], 'landscape');\r\n      }\r\n      primeira = false;\r\n      \r\n      const material = materiais.find(m => m.id === peca.materialId);\r\n      const comp = Math.round(peca.comprimento);\r\n      const larg = Math.round(peca.altura);\r\n      \r\n      // ===== HEADER: PIETRA M√ìVEIS E REVESTIMENTOS =====\r\n      pdf.setTextColor(0, 0, 0); // Preto\r\n      pdf.setFontSize(14);\r\n      pdf.setFont('helvetica', 'bold');\r\n      pdf.text('PIETRA M√ìVEIS E REVESTIMENTOS', 50, 8, { align: 'center' });\r\n      \r\n      // Linha horizontal\r\n      pdf.setDrawColor(0, 0, 0);\r\n      pdf.setLineWidth(0.3);\r\n      pdf.line(5, 10, 95, 10);\r\n      \r\n      // Email\r\n      pdf.setTextColor(0, 0, 0); // Preto\r\n      pdf.setFontSize(8);\r\n      pdf.setFont('helvetica', 'normal');\r\n      pdf.text('pietramoveiserevestimentos@gmail.com', 50, 14, { align: 'center' });\r\n      \r\n      // Telefone\r\n      pdf.setFontSize(9);\r\n      pdf.text('(19) 99978-0110', 50, 18, { align: 'center' });\r\n      \r\n      // Linha horizontal\r\n      pdf.line(5, 20, 95, 20);\r\n      \r\n      // ===== CLIENTE =====\r\n      pdf.setFontSize(10);\r\n      pdf.setFont('helvetica', 'bold');\r\n      pdf.setTextColor(0, 0, 0); // Preto\r\n      pdf.text('CLIENTE:', 5, 26);\r\n      \r\n      pdf.setTextColor(0, 0, 0); // Preto\r\n      pdf.setFont('helvetica', 'normal');\r\n      const clienteNome = orcamentoAtual.nome || 'Sem nome';\r\n      pdf.text(clienteNome.toUpperCase(), 25, 26);\r\n      \r\n      // ===== AMBIENTE =====\r\n      pdf.setTextColor(0, 0, 0); // Preto\r\n      pdf.setFont('helvetica', 'bold');\r\n      pdf.text('AMBIENTE:', 5, 32);\r\n      \r\n      pdf.setTextColor(0, 0, 0); // Preto\r\n      pdf.setFont('helvetica', 'normal');\r\n      const ambienteNome = peca.ambienteNome || 'Sem ambiente';\r\n      pdf.text(ambienteNome.toUpperCase(), 25, 32);\r\n      \r\n      // ===== PE√áA =====\r\n      pdf.setTextColor(0, 0, 0); // Preto\r\n      pdf.setFont('helvetica', 'bold');\r\n      pdf.text('PE√áA:', 5, 38);\r\n      \r\n      pdf.setTextColor(0, 0, 0); // Preto\r\n      pdf.setFont('helvetica', 'normal');\r\n      const pecaNome = peca.nome || 'Sem nome';\r\n      pdf.text(pecaNome.toUpperCase(), 25, 38);\r\n      \r\n      // ===== MEDIDA =====\r\n      pdf.setTextColor(0, 0, 0); // Preto\r\n      pdf.setFont('helvetica', 'bold');\r\n      pdf.text('MEDIDA:', 5, 44);\r\n      \r\n      pdf.setTextColor(0, 0, 0); // Preto\r\n      pdf.setFont('helvetica', 'normal');\r\n      pdf.text(`${comp} X ${larg} MM`, 25, 44);\r\n      \r\n      // ===== MATERIAL =====\r\n      pdf.setTextColor(0, 0, 0); // Preto\r\n      pdf.setFont('helvetica', 'bold');\r\n      pdf.text('MATERIAL:', 5, 50);\r\n      \r\n      pdf.setTextColor(0, 0, 0); // Preto\r\n      pdf.setFont('helvetica', 'normal');\r\n      const materialNome = material?.nome || 'N/D';\r\n      pdf.text(materialNome.toUpperCase(), 25, 50);\r\n      \r\n      // Linha horizontal no rodap√©\r\n      pdf.setDrawColor(0, 0, 0);\r\n      pdf.setLineWidth(0.3);\r\n      pdf.line(5, 55, 95, 55);\r\n    });\r\n    \r\n    // Salvar PDF\r\n    const nomeArquivo = `Etiquetas_${orcamentoAtual.nome.replace(/[^a-z0-9]/gi, '_')}_${new Date().toISOString().split('T')[0]}.pdf`;\r\n    pdf.save(nomeArquivo);\r\n    \r\n    alert(`‚úÖ PDF gerado com sucesso!\\n${todasPecas.length} etiqueta(s) - 1 por p√°gina\\nArquivo: ${nomeArquivo}`);\r\n  };\r\n\r\n  // Organizar pe√ßas em chapas automaticamente\r\n  // Wrapper para organizar pe√ßas usando a fun√ß√£o do utils\r\n  const organizarPecasLocalmente = (orcamento) => {\r\n    const orcamentoAtualizado = organizarPecasEmChapas(orcamento, materiais);\r\n    setOrcamentoAtual(orcamentoAtualizado);\r\n\r\n    // Sincronizar com a lista de or√ßamentos\r\n    setOrcamentos(prev => prev.map(orc =>\r\n      orc.id === orcamento.id ? orcamentoAtualizado : orc\r\n    ));\r\n  };\r\n\r\n  // Calcular totais\r\n  // Calcular or√ßamento salvo (usa os materiais salvos no or√ßamento)\r\n\r\n  // Mover pe√ßa dentro da mesma chapa (arraste manual)\r\n\r\n\r\n\r\n\r\n\r\n  // Girar pe√ßa\r\n  const girarPeca = (pecaId, chapaId) => {\r\n    const ambientesAtualizados = orcamentoAtual.ambientes.map(amb => ({\r\n      ...amb,\r\n      pecas: amb.pecas.map(p => {\r\n        if (p.id === pecaId) {\r\n          const novaRotacao = p.rotacao === 0 ? 90 : 0;\r\n          return { ...p, rotacao: novaRotacao };\r\n        }\r\n        return p;\r\n      })\r\n    }));\r\n\r\n    // Reconstruir as chapas\r\n    const todasPecas = ambientesAtualizados.flatMap(amb => amb.pecas);\r\n    const chapasAtualizadas = orcamentoAtual.chapas.map(chapa => ({\r\n      ...chapa,\r\n      pecas: todasPecas.filter(p => p.chapaId === chapa.id)\r\n    }));\r\n\r\n    const orcamentoAtualizado = {\r\n      ...orcamentoAtual,\r\n      ambientes: ambientesAtualizados,\r\n      chapas: chapasAtualizadas\r\n    };\r\n\r\n    setOrcamentoAtual(orcamentoAtualizado);\r\n\r\n    // Sincronizar com a lista de or√ßamentos\r\n    setOrcamentos(prev => prev.map(orc =>\r\n      orc.id === orcamentoAtual.id ? orcamentoAtualizado : orc\r\n    ));\r\n  };\r\n\r\n  // Mover pe√ßa dentro da mesma chapa (arraste manual)\r\n  const moverPecaNaChapa = (pecaId, chapaId, novaX, novaY) => {\r\n    const ambientesAtualizados = orcamentoAtual.ambientes.map(amb => ({\r\n      ...amb,\r\n      pecas: amb.pecas.map(p =>\r\n        p.id === pecaId ? { ...p, chapaId: chapaId, posX: novaX, posY: novaY } : p\r\n      )\r\n    }));\r\n\r\n    const todasPecas = ambientesAtualizados.flatMap(amb => amb.pecas);\r\n    const chapasAtualizadas = orcamentoAtual.chapas.map(chapa => ({\r\n      ...chapa,\r\n      pecas: todasPecas.filter(p => p.chapaId === chapa.id)\r\n    }));\r\n\r\n    const orcamentoAtualizado = {\r\n      ...orcamentoAtual,\r\n      ambientes: ambientesAtualizados,\r\n      chapas: chapasAtualizadas\r\n    };\r\n\r\n    setOrcamentoAtual(orcamentoAtualizado);\r\n\r\n    // Sincronizar com a lista de or√ßamentos\r\n    setOrcamentos(prev => prev.map(orc =>\r\n      orc.id === orcamentoAtual.id ? orcamentoAtualizado : orc\r\n    ));\r\n  };\r\n\r\n  // Encontrar melhor posi√ß√£o dispon√≠vel para a pe√ßa na chapa\r\n  const encontrarMelhorPosicao = (peca, chapaDestino) => {\r\n    const larguraPeca = peca.rotacao === 90 ? peca.altura : peca.comprimento;\r\n    const alturaPeca = peca.rotacao === 90 ? peca.comprimento : peca.altura;\r\n    const espacamento = 4;\r\n\r\n    const larguraChapa = chapaDestino.material.comprimento;\r\n    const alturaChapa = chapaDestino.material.altura;\r\n\r\n    // Verificar se a pe√ßa √© maior que a chapa\r\n    if (larguraPeca + espacamento * 2 > larguraChapa ||\r\n        alturaPeca + espacamento * 2 > alturaChapa) {\r\n      return null;\r\n    }\r\n\r\n    // Tentar posi√ß√µes em um grid de 10mm para performance\r\n    const incremento = 10;\r\n\r\n    for (let y = espacamento; y + alturaPeca + espacamento <= alturaChapa; y += incremento) {\r\n      for (let x = espacamento; x + larguraPeca + espacamento <= larguraChapa; x += incremento) {\r\n        const sobrepoe = chapaDestino.pecas.some(p => {\r\n          if (p.id === peca.id) return false;\r\n\r\n          const larguraOutra = p.rotacao === 90 ? p.altura : p.comprimento;\r\n          const alturaOutra = p.rotacao === 90 ? p.comprimento : p.altura;\r\n\r\n          const centroNovaX = x + larguraPeca / 2;\r\n          const centroNovaY = y + alturaPeca / 2;\r\n          const centroPecaX = p.posX + larguraOutra / 2;\r\n          const centroPecaY = p.posY + alturaOutra / 2;\r\n\r\n          const distanciaX = Math.abs(centroNovaX - centroPecaX);\r\n          const distanciaY = Math.abs(centroNovaY - centroPecaY);\r\n\r\n          const distanciaMinX = (larguraPeca + larguraOutra) / 2 + espacamento;\r\n          const distanciaMinY = (alturaPeca + alturaOutra) / 2 + espacamento;\r\n\r\n          return distanciaX < distanciaMinX && distanciaY < distanciaMinY;\r\n        });\r\n\r\n        if (!sobrepoe) {\r\n          return { x, y };\r\n        }\r\n      }\r\n    }\r\n\r\n    return null;\r\n  };\r\n\r\n  // Mover pe√ßa entre chapas\r\n  const moverPeca = (pecaId, novaChapaId) => {\r\n    let pecaMovida = null;\r\n    orcamentoAtual.ambientes.forEach(amb => {\r\n      const peca = amb.pecas.find(p => p.id === pecaId);\r\n      if (peca) pecaMovida = peca;\r\n    });\r\n\r\n    if (!pecaMovida) {\r\n      alert('‚ùå Erro: Pe√ßa n√£o encontrada.');\r\n      return;\r\n    }\r\n\r\n    const chapaDestino = orcamentoAtual.chapas.find(c => c.id === novaChapaId);\r\n    if (!chapaDestino) {\r\n      alert('‚ùå Erro: Chapa de destino n√£o encontrada.');\r\n      return;\r\n    }\r\n\r\n    const posicao = encontrarMelhorPosicao(pecaMovida, chapaDestino);\r\n\r\n    if (!posicao) {\r\n      const larguraPeca = pecaMovida.rotacao === 90 ? pecaMovida.altura : pecaMovida.comprimento;\r\n      const alturaPeca = pecaMovida.rotacao === 90 ? pecaMovida.comprimento : pecaMovida.altura;\r\n\r\n      alert(\r\n        '‚ö†Ô∏è N√£o foi poss√≠vel mover a pe√ßa!\\n\\n' +\r\n        '‚ùå N√£o h√° espa√ßo dispon√≠vel na chapa de destino.\\n\\n' +\r\n        'üìè Dimens√µes da pe√ßa: ' + larguraPeca + ' x ' + alturaPeca + ' mm\\n' +\r\n        'üìê Dimens√µes da chapa: ' + chapaDestino.material.comprimento + ' x ' + chapaDestino.material.altura + ' mm\\n\\n' +\r\n        'üí° Dica: Tente mover outras pe√ßas ou use outra chapa.'\r\n      );\r\n      return;\r\n    }\r\n\r\n    const ambientesAtualizados = orcamentoAtual.ambientes.map(amb => ({\r\n      ...amb,\r\n      pecas: amb.pecas.map(p =>\r\n        p.id === pecaId ? { ...p, chapaId: novaChapaId, posX: posicao.x, posY: posicao.y } : p\r\n      )\r\n    }));\r\n\r\n    const todasPecas = ambientesAtualizados.flatMap(amb => amb.pecas);\r\n    const chapasAtualizadas = orcamentoAtual.chapas.map(chapa => ({\r\n      ...chapa,\r\n      pecas: todasPecas.filter(p => p.chapaId === chapa.id)\r\n    }));\r\n\r\n    const orcamentoAtualizado = {\r\n      ...orcamentoAtual,\r\n      ambientes: ambientesAtualizados,\r\n      chapas: chapasAtualizadas\r\n    };\r\n\r\n    setOrcamentoAtual(orcamentoAtualizado);\r\n\r\n    // Sincronizar com a lista de or√ßamentos\r\n    setOrcamentos(prev => prev.map(orc =>\r\n      orc.id === orcamentoAtual.id ? orcamentoAtualizado : orc\r\n    ));\r\n\r\n    alert('‚úÖ Pe√ßa movida com sucesso!\\n\\nüìç Posi√ß√£o: X=' + Math.round(posicao.x) + 'mm, Y=' + Math.round(posicao.y) + 'mm');\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-slate-100\">\r\n      <div className=\"max-w-7xl mx-auto px-4 py-6\">\r\n        {/* Header Moderno */}\r\n        <header className=\"bg-gradient-to-r from-slate-800 to-slate-900 rounded-2xl shadow-xl p-8 mb-8 border border-slate-700\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <h1 className=\"text-4xl font-bold text-white mb-2 flex items-center gap-3\">\r\n                <div className=\"w-12 h-12 bg-blue-500 rounded-xl flex items-center justify-center\">\r\n                  <Grid size={28} className=\"text-white\" />\r\n                </div>\r\n                Sistema de Or√ßamento\r\n              </h1>\r\n              <p className=\"text-slate-300 text-lg\">M√°rmore & Granito - Gest√£o Profissional</p>\r\n            </div>\r\n            {tela !== 'lista' && (\r\n              <button\r\n                onClick={() => setTela('lista')}\r\n                className=\"flex items-center gap-2 bg-white/10 hover:bg-white/20 text-white px-6 py-3 rounded-xl transition-all duration-200 border border-white/20\"\r\n              >\r\n                <Home size={20} />\r\n                In√≠cio\r\n              </button>\r\n            )}\r\n          </div>\r\n        </header>\r\n\r\n        {/* Modal Novo Or√ßamento - Design Moderno */}\r\n        {mostrarModalNovoOrcamento && (\r\n          <div className=\"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4\">\r\n            <div className=\"bg-white rounded-2xl shadow-2xl p-8 max-w-md w-full mx-4 border border-slate-200\">\r\n              <div className=\"flex items-center gap-3 mb-6\">\r\n                <div className=\"w-12 h-12 bg-gradient-to-br from-green-500 to-emerald-600 rounded-xl flex items-center justify-center\">\r\n                  <PlusCircle size={24} className=\"text-white\" />\r\n                </div>\r\n                <h2 className=\"text-2xl font-bold text-slate-800\">Novo Or√ßamento</h2>\r\n              </div>\r\n              <div className=\"mb-6\">\r\n                <label className=\"block text-sm font-semibold text-slate-700 mb-2\">\r\n                  Nome do Or√ßamento\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={nomeNovoOrcamento}\r\n                  onChange={(e) => setNomeNovoOrcamento(e.target.value)}\r\n                  onKeyPress={(e) => {\r\n                    if (e.key === 'Enter') {\r\n                      confirmarCriacaoOrcamento();\r\n                    }\r\n                  }}\r\n                  className=\"w-full border-2 border-slate-200 rounded-xl px-4 py-3 focus:border-blue-500 focus:outline-none transition-colors\"\r\n                  placeholder=\"Ex: Cliente Jo√£o Silva - Cozinha\"\r\n                  autoFocus\r\n                />\r\n              </div>\r\n              <div className=\"flex gap-3 justify-end\">\r\n                <button\r\n                  onClick={() => {\r\n                    fecharModalNovoOrcamento();\r\n                    setNomeNovoOrcamento('');\r\n                  }}\r\n                  className=\"px-6 py-3 border-2 border-slate-200 rounded-xl hover:bg-slate-50 transition-all duration-200 font-medium text-slate-700\"\r\n                >\r\n                  Cancelar\r\n                </button>\r\n                <button\r\n                  onClick={confirmarCriacaoOrcamento}\r\n                  className=\"px-6 py-3 bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-xl hover:shadow-lg transition-all duration-200 font-semibold\"\r\n                >\r\n                  Criar Or√ßamento\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Modal Detalhes da Pe√ßa */}\r\n        {mostrandoDetalhePeca && (\r\n          <div className=\"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-[9999] p-4\" onClick={() => {\r\n            setMostrandoDetalhePeca(null);\r\n            setModoEdicaoPeca(false);\r\n            setPecaEditada(null);\r\n          }}>\r\n            <div className=\"bg-white rounded-2xl shadow-2xl w-full max-w-2xl border border-slate-200 max-h-[85vh] overflow-hidden flex flex-col\" onClick={(e) => e.stopPropagation()}>\r\n              {/* Header Simplificado */}\r\n              <div className=\"bg-gradient-to-r from-slate-700 to-slate-800 p-4 flex items-center justify-between flex-shrink-0\">\r\n                <h3 className=\"text-xl font-bold text-white\">\r\n                  {modoEdicaoPeca ? '‚úèÔ∏è Editando' : 'üëÅÔ∏è Visualizando'}: {mostrandoDetalhePeca.nome || 'Pe√ßa'}\r\n                </h3>\r\n                <button\r\n                  onClick={() => {\r\n                    setMostrandoDetalhePeca(null);\r\n                    setModoEdicaoPeca(false);\r\n                    setPecaEditada(null);\r\n                  }}\r\n                  className=\"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-xl font-bold transition-all\"\r\n                >\r\n                  ‚úñ FECHAR\r\n                </button>\r\n              </div>\r\n\r\n              {/* Conte√∫do Rol√°vel */}\r\n              <div className=\"p-6 space-y-4 overflow-y-auto flex-1\">\r\n                {/* Banner com Bot√£o Editar */}\r\n                {!modoEdicaoPeca ? (\r\n                  <button\r\n                    onClick={() => {\r\n                      const copia = JSON.parse(JSON.stringify(mostrandoDetalhePeca));\r\n                      // Garantir que tenha todos os campos\r\n                      if (!copia.acabamentos) {\r\n                        copia.acabamentos = {\r\n                          polimento: { ativo: false, lados: { superior: false, inferior: false, esquerda: false, direita: false } },\r\n                          esquadria: { ativo: false, lados: { superior: false, inferior: false, esquerda: false, direita: false } },\r\n                          boleado: { ativo: false, lados: { superior: false, inferior: false, esquerda: false, direita: false } },\r\n                          canal: { ativo: false, lados: { superior: false, inferior: false, esquerda: false, direita: false } }\r\n                        };\r\n                      }\r\n                      if (!copia.cuba) copia.cuba = 0;\r\n                      if (!copia.cubaEsculpida) copia.cubaEsculpida = 0;\r\n                      if (!copia.cooktop) copia.cooktop = 0;\r\n                      if (!copia.recorte) copia.recorte = 0;\r\n                      if (!copia.pes) copia.pes = 0;\r\n                      \r\n                      setPecaEditada(copia);\r\n                      setModoEdicaoPeca(true);\r\n                    }}\r\n                    className=\"w-full bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white p-4 rounded-xl font-bold text-lg shadow-lg transition-all transform hover:scale-105\"\r\n                  >\r\n                    ‚úèÔ∏è CLIQUE AQUI PARA EDITAR ESTA PE√áA\r\n                  </button>\r\n                ) : (\r\n                  <div className=\"bg-yellow-100 border-2 border-yellow-500 rounded-xl p-3 text-center\">\r\n                    <p className=\"text-yellow-900 font-bold\">‚úèÔ∏è MODO EDI√á√ÉO - Altere os campos abaixo</p>\r\n                  </div>\r\n                )}\r\n\r\n                {/* Informa√ß√µes Gerais - COMPACTAS */}\r\n                <div className=\"grid md:grid-cols-2 gap-4\">\r\n                  <div className=\"bg-blue-50 rounded-lg p-3 border border-blue-200\">\r\n                    <h4 className=\"font-semibold text-blue-900 mb-2 text-sm\">üìè Dimens√µes</h4>\r\n                    <div className=\"space-y-2\">\r\n                      <div>\r\n                        <label className=\"block text-slate-600 text-xs mb-1\">Nome:</label>\r\n                        {modoEdicaoPeca ? (\r\n                          <input\r\n                            type=\"text\"\r\n                            value={pecaEditada?.nome || ''}\r\n                            onChange={(e) => setPecaEditada({...pecaEditada, nome: e.target.value})}\r\n                            className=\"w-full px-2 py-1 border-2 border-blue-400 rounded text-sm\"\r\n                          />\r\n                        ) : (\r\n                          <span className=\"font-bold text-slate-800 text-sm\">{mostrandoDetalhePeca.nome || 'Sem nome'}</span>\r\n                        )}\r\n                      </div>\r\n                      <div>\r\n                        <label className=\"block text-slate-600 text-xs mb-1\">Comprimento (mm):</label>\r\n                        {modoEdicaoPeca ? (\r\n                          <input\r\n                            type=\"number\"\r\n                            value={pecaEditada?.comprimento || 0}\r\n                            onChange={(e) => setPecaEditada({...pecaEditada, comprimento: parseInt(e.target.value) || 0})}\r\n                            className=\"w-full px-2 py-1 border-2 border-blue-400 rounded text-sm\"\r\n                          />\r\n                        ) : (\r\n                          <span className=\"font-bold text-slate-800 text-sm\">{mostrandoDetalhePeca.comprimento} mm</span>\r\n                        )}\r\n                      </div>\r\n                      <div>\r\n                        <label className=\"block text-slate-600 text-xs mb-1\">Altura (mm):</label>\r\n                        {modoEdicaoPeca ? (\r\n                          <input\r\n                            type=\"number\"\r\n                            value={pecaEditada?.altura || 0}\r\n                            onChange={(e) => setPecaEditada({...pecaEditada, altura: parseInt(e.target.value) || 0})}\r\n                            className=\"w-full px-2 py-1 border-2 border-blue-400 rounded text-sm\"\r\n                          />\r\n                        ) : (\r\n                          <span className=\"font-bold text-slate-800 text-sm\">{mostrandoDetalhePeca.altura} mm</span>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"bg-green-50 rounded-lg p-3 border border-green-200\">\r\n                    <h4 className=\"font-semibold text-green-900 mb-2 text-sm\">üì¶ Material</h4>\r\n                    <div className=\"space-y-2\">\r\n                      <div>\r\n                        <label className=\"block text-slate-600 text-xs mb-1\">Material:</label>\r\n                        {modoEdicaoPeca ? (\r\n                          <select\r\n                            value={pecaEditada?.materialId || ''}\r\n                            onChange={(e) => setPecaEditada({...pecaEditada, materialId: parseInt(e.target.value)})}\r\n                            className=\"w-full px-2 py-1 border-2 border-green-400 rounded text-sm\"\r\n                          >\r\n                            {materiais.map(m => (\r\n                              <option key={m.id} value={m.id}>{m.nome}</option>\r\n                            ))}\r\n                          </select>\r\n                        ) : (\r\n                          <span className=\"font-bold text-slate-800 text-sm\">\r\n                            {materiais.find(m => m.id === mostrandoDetalhePeca.materialId)?.nome || 'N/A'}\r\n                          </span>\r\n                        )}\r\n                      </div>\r\n                      <div>\r\n                        <label className=\"block text-slate-600 text-xs mb-1\">Chapa:</label>\r\n                        <span className=\"font-bold text-slate-800 text-sm\">\r\n                          #{mostrandoDetalhePeca.chapaId ? String(mostrandoDetalhePeca.chapaId).slice(-4) : 'N/A'}\r\n                        </span>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Acabamentos - EDIT√ÅVEL OU VISUALIZA√á√ÉO */}\r\n                {(modoEdicaoPeca || (mostrandoDetalhePeca.acabamentos && Object.values(mostrandoDetalhePeca.acabamentos).some(a => a.ativo))) && (\r\n                  <div className=\"bg-purple-50 rounded-lg p-3 border border-purple-200\">\r\n                    <h4 className=\"font-semibold text-purple-900 mb-2 text-sm\">‚ú® Acabamentos</h4>\r\n                    {modoEdicaoPeca ? (\r\n                      <div className=\"space-y-2\">\r\n                        {['polimento', 'esquadria', 'boleado', 'canal'].map(tipo => (\r\n                          <div key={tipo} className=\"bg-white rounded p-2 border border-purple-300\">\r\n                            <label className=\"flex items-center gap-2 mb-1\">\r\n                              <input\r\n                                type=\"checkbox\"\r\n                                checked={pecaEditada?.acabamentos?.[tipo]?.ativo || false}\r\n                                onChange={(e) => {\r\n                                  const novosAcabamentos = {...(pecaEditada?.acabamentos || {})};\r\n                                  if (!novosAcabamentos[tipo]) {\r\n                                    novosAcabamentos[tipo] = { \r\n                                      ativo: false, \r\n                                      lados: { superior: false, inferior: false, esquerda: false, direita: false } \r\n                                    };\r\n                                  }\r\n                                  novosAcabamentos[tipo].ativo = e.target.checked;\r\n                                  setPecaEditada({...pecaEditada, acabamentos: novosAcabamentos});\r\n                                }}\r\n                                className=\"w-4 h-4\"\r\n                              />\r\n                              <span className=\"font-semibold text-sm capitalize\">{tipo}</span>\r\n                            </label>\r\n                            {pecaEditada?.acabamentos?.[tipo]?.ativo && (\r\n                              <div className=\"flex flex-wrap gap-1 ml-6 mt-1\">\r\n                                {['superior', 'inferior', 'esquerda', 'direita'].map(lado => (\r\n                                  <label key={lado} className=\"flex items-center gap-1 text-xs\">\r\n                                    <input\r\n                                      type=\"checkbox\"\r\n                                      checked={pecaEditada?.acabamentos?.[tipo]?.lados?.[lado] || false}\r\n                                      onChange={(e) => {\r\n                                        const novosAcabamentos = {...pecaEditada.acabamentos};\r\n                                        novosAcabamentos[tipo].lados[lado] = e.target.checked;\r\n                                        setPecaEditada({...pecaEditada, acabamentos: novosAcabamentos});\r\n                                      }}\r\n                                      className=\"w-3 h-3\"\r\n                                    />\r\n                                    <span>{lado}</span>\r\n                                  </label>\r\n                                ))}\r\n                              </div>\r\n                            )}\r\n                          </div>\r\n                        ))}\r\n                      </div>\r\n                    ) : (\r\n                      <div className=\"grid md:grid-cols-2 gap-2\">\r\n                        {Object.keys(mostrandoDetalhePeca.acabamentos).map(tipo => {\r\n                          const acab = mostrandoDetalhePeca.acabamentos[tipo];\r\n                          if (!acab.ativo) return null;\r\n                          const lados = Object.keys(acab.lados).filter(lado => acab.lados[lado]);\r\n                          return (\r\n                            <div key={tipo} className=\"bg-white rounded p-2 border border-purple-300\">\r\n                              <div className=\"font-semibold text-slate-800 capitalize text-sm mb-1\">{tipo}</div>\r\n                              <div className=\"flex flex-wrap gap-1\">\r\n                                {lados.map(lado => (\r\n                                  <span key={lado} className=\"text-xs bg-purple-100 text-purple-700 px-1 py-0.5 rounded\">\r\n                                    {lado}\r\n                                  </span>\r\n                                ))}\r\n                              </div>\r\n                            </div>\r\n                          );\r\n                        })}\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                )}\r\n\r\n                {/* Recortes - EDIT√ÅVEL OU VISUALIZA√á√ÉO */}\r\n                {(modoEdicaoPeca || mostrandoDetalhePeca.cuba > 0 || mostrandoDetalhePeca.cubaEsculpida > 0 || \r\n                  mostrandoDetalhePeca.cooktop > 0 || mostrandoDetalhePeca.recorte > 0 || \r\n                  mostrandoDetalhePeca.pes > 0) && (\r\n                  <div className=\"bg-orange-50 rounded-lg p-3 border border-orange-200\">\r\n                    <h4 className=\"font-semibold text-orange-900 mb-2 text-sm\">üîß Recortes</h4>\r\n                    {modoEdicaoPeca ? (\r\n                      <div className=\"grid grid-cols-2 gap-2\">\r\n                        <div>\r\n                          <label className=\"block text-xs text-slate-600 mb-1\">Pia/Cuba:</label>\r\n                          <input\r\n                            type=\"number\"\r\n                            value={pecaEditada?.cuba || 0}\r\n                            onChange={(e) => setPecaEditada({...pecaEditada, cuba: parseInt(e.target.value) || 0})}\r\n                            className=\"w-full px-2 py-1 border border-orange-300 rounded text-sm\"\r\n                            min=\"0\"\r\n                          />\r\n                        </div>\r\n                        <div>\r\n                          <label className=\"block text-xs text-slate-600 mb-1\">Cuba Esculpida:</label>\r\n                          <input\r\n                            type=\"number\"\r\n                            value={pecaEditada?.cubaEsculpida || 0}\r\n                            onChange={(e) => setPecaEditada({...pecaEditada, cubaEsculpida: parseInt(e.target.value) || 0})}\r\n                            className=\"w-full px-2 py-1 border border-orange-300 rounded text-sm\"\r\n                            min=\"0\"\r\n                          />\r\n                        </div>\r\n                        <div>\r\n                          <label className=\"block text-xs text-slate-600 mb-1\">Cooktop:</label>\r\n                          <input\r\n                            type=\"number\"\r\n                            value={pecaEditada?.cooktop || 0}\r\n                            onChange={(e) => setPecaEditada({...pecaEditada, cooktop: parseInt(e.target.value) || 0})}\r\n                            className=\"w-full px-2 py-1 border border-orange-300 rounded text-sm\"\r\n                            min=\"0\"\r\n                          />\r\n                        </div>\r\n                        <div>\r\n                          <label className=\"block text-xs text-slate-600 mb-1\">Recorte:</label>\r\n                          <input\r\n                            type=\"number\"\r\n                            value={pecaEditada?.recorte || 0}\r\n                            onChange={(e) => setPecaEditada({...pecaEditada, recorte: parseInt(e.target.value) || 0})}\r\n                            className=\"w-full px-2 py-1 border border-orange-300 rounded text-sm\"\r\n                            min=\"0\"\r\n                          />\r\n                        </div>\r\n                        <div>\r\n                          <label className=\"block text-xs text-slate-600 mb-1\">P√©s:</label>\r\n                          <input\r\n                            type=\"number\"\r\n                            value={pecaEditada?.pes || 0}\r\n                            onChange={(e) => setPecaEditada({...pecaEditada, pes: parseInt(e.target.value) || 0})}\r\n                            className=\"w-full px-2 py-1 border border-orange-300 rounded text-sm\"\r\n                            min=\"0\"\r\n                          />\r\n                        </div>\r\n                      </div>\r\n                    ) : (\r\n                      <div className=\"grid grid-cols-2 md:grid-cols-3 gap-2\">\r\n                        {mostrandoDetalhePeca.cuba > 0 && (\r\n                          <div className=\"bg-white rounded p-2 text-center border border-orange-300\">\r\n                            <div className=\"text-xs text-slate-600\">Cuba</div>\r\n                            <div className=\"font-bold text-slate-800\">{mostrandoDetalhePeca.cuba}x</div>\r\n                          </div>\r\n                        )}\r\n                        {mostrandoDetalhePeca.cubaEsculpida > 0 && (\r\n                          <div className=\"bg-white rounded p-2 text-center border border-orange-300\">\r\n                            <div className=\"text-xs text-slate-600\">Cuba Esculpida</div>\r\n                            <div className=\"font-bold text-slate-800\">{mostrandoDetalhePeca.cubaEsculpida}x</div>\r\n                          </div>\r\n                        )}\r\n                        {mostrandoDetalhePeca.cooktop > 0 && (\r\n                          <div className=\"bg-white rounded p-2 text-center border border-orange-300\">\r\n                            <div className=\"text-xs text-slate-600\">Cooktop</div>\r\n                            <div className=\"font-bold text-slate-800\">{mostrandoDetalhePeca.cooktop}x</div>\r\n                          </div>\r\n                        )}\r\n                        {mostrandoDetalhePeca.recorte > 0 && (\r\n                          <div className=\"bg-white rounded p-2 text-center border border-orange-300\">\r\n                            <div className=\"text-xs text-slate-600\">Recorte</div>\r\n                            <div className=\"font-bold text-slate-800\">{mostrandoDetalhePeca.recorte}x</div>\r\n                          </div>\r\n                        )}\r\n                        {mostrandoDetalhePeca.pes > 0 && (\r\n                          <div className=\"bg-white rounded p-2 text-center border border-orange-300\">\r\n                            <div className=\"text-xs text-slate-600\">P√©s</div>\r\n                            <div className=\"font-bold text-slate-800\">{mostrandoDetalhePeca.pes}x</div>\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              {/* Footer - APENAS EM MODO EDI√á√ÉO */}\r\n              {modoEdicaoPeca && (\r\n                <div className=\"bg-white p-3 border-t border-slate-200 flex justify-end gap-2 flex-shrink-0\">\r\n                  <button\r\n                    onClick={() => {\r\n                      setModoEdicaoPeca(false);\r\n                      setPecaEditada(null);\r\n                    }}\r\n                    className=\"px-4 py-2 border border-slate-300 text-slate-700 rounded-lg font-semibold hover:bg-slate-100\"\r\n                  >\r\n                    Cancelar\r\n                  </button>\r\n                  <button\r\n                    onClick={salvarEdicaoPeca}\r\n                    className=\"px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded-lg font-semibold flex items-center gap-2\"\r\n                  >\r\n                    <Save size={18} />\r\n                    üíæ Salvar\r\n                  </button>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Modal de Confirma√ß√£o de Exclus√£o */}\r\n        {pecaParaExcluir && (\r\n          <div className=\"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-[10000] p-4\">\r\n            <div className=\"bg-white rounded-2xl shadow-2xl max-w-md w-full mx-4 border-4 border-red-500\">\r\n              {/* Header */}\r\n              <div className=\"bg-gradient-to-r from-red-600 to-red-700 p-6 rounded-t-2xl\">\r\n                <div className=\"flex items-center gap-3\">\r\n                  <div className=\"w-12 h-12 bg-white/20 rounded-full flex items-center justify-center\">\r\n                    <Trash2 size={24} className=\"text-white\" />\r\n                  </div>\r\n                  <div>\r\n                    <h3 className=\"text-2xl font-bold text-white\">Excluir Pe√ßa</h3>\r\n                    <p className=\"text-red-100 text-sm\">Esta a√ß√£o n√£o pode ser desfeita</p>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Conte√∫do */}\r\n              <div className=\"p-6\">\r\n                <p className=\"text-gray-700 text-lg mb-2\">\r\n                  Deseja realmente excluir esta pe√ßa?\r\n                </p>\r\n                <p className=\"text-gray-900 font-bold text-xl bg-gray-100 p-3 rounded-lg\">\r\n                  {pecaParaExcluir.pecaNome || 'Pe√ßa sem nome'}\r\n                </p>\r\n                <p className=\"text-sm text-gray-500 mt-3\">\r\n                  A pe√ßa ser√° removida e as chapas ser√£o reorganizadas automaticamente.\r\n                </p>\r\n              </div>\r\n\r\n              {/* Rodap√© */}\r\n              <div className=\"bg-gray-50 p-4 rounded-b-2xl flex gap-3 justify-end\">\r\n                <button\r\n                  onClick={() => {\r\n                    console.log('‚ùå Cancelou exclus√£o');\r\n                    setPecaParaExcluir(null);\r\n                  }}\r\n                  className=\"px-6 py-3 border-2 border-gray-300 text-gray-700 rounded-xl font-semibold hover:bg-gray-100 transition-all\"\r\n                >\r\n                  Cancelar\r\n                </button>\r\n                <button\r\n                  onClick={() => {\r\n                    console.log('‚úÖ Confirmou exclus√£o');\r\n                    excluirPeca(pecaParaExcluir.ambienteId, pecaParaExcluir.pecaId);\r\n                    setPecaParaExcluir(null);\r\n                  }}\r\n                  className=\"px-6 py-3 bg-gradient-to-r from-red-500 to-red-600 text-white rounded-xl font-semibold hover:shadow-lg transition-all flex items-center gap-2\"\r\n                >\r\n                  <Trash2 size={20} />\r\n                  Excluir Pe√ßa\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Modal de Visualiza√ß√£o de Etiquetas */}\r\n        {/* Menu Principal - Design Moderno */}\r\n        {tela === 'lista' && (\r\n          <div className=\"space-y-8\">\r\n            {/* Painel de Configura√ß√£o de Pre√ßos */}\r\n            <div className=\"bg-white rounded-2xl shadow-lg border border-slate-200\">\r\n              <button\r\n                onClick={() => setMostrarPainelPrecos(!mostrarPainelPrecos)}\r\n                className=\"w-full flex items-center justify-between p-6 hover:bg-slate-50 transition-colors rounded-2xl\"\r\n              >\r\n                <div className=\"flex items-center gap-3\">\r\n                  <div className=\"w-10 h-10 bg-gradient-to-br from-green-500 to-emerald-600 rounded-lg flex items-center justify-center\">\r\n                    <span className=\"text-white text-xl font-bold\">R$</span>\r\n                  </div>\r\n                  <div className=\"text-left\">\r\n                    <h2 className=\"text-xl font-bold text-slate-800\">Configura√ß√£o de Pre√ßos</h2>\r\n                    <p className=\"text-sm text-slate-500\">Acabamentos e recortes</p>\r\n                  </div>\r\n                </div>\r\n                <div className=\"text-slate-400\">\r\n                  {mostrarPainelPrecos ? '‚ñ≤' : '‚ñº'}\r\n                </div>\r\n              </button>\r\n              \r\n              {mostrarPainelPrecos && (\r\n                <div className=\"px-6 pb-6 pt-2 border-t border-slate-200\">\r\n                  <div className=\"grid md:grid-cols-2 gap-6\">\r\n                    {/* Acabamentos */}\r\n                    <div>\r\n                      <h3 className=\"font-bold text-slate-700 mb-4 flex items-center gap-2\">\r\n                        <span className=\"w-2 h-2 bg-blue-500 rounded-full\"></span>\r\n                        Acabamentos (por metro linear)\r\n                      </h3>\r\n                      <div className=\"space-y-3\">\r\n                        <div>\r\n                          <label className=\"block text-sm font-medium text-slate-600 mb-1\">Polimento</label>\r\n                          <div className=\"flex items-center gap-2\">\r\n                            <span className=\"text-slate-500\">R$</span>\r\n                            <input\r\n                              type=\"number\"\r\n                              value={precos.polimento}\r\n                              onChange={(e) => atualizarPreco('polimento', e.target.value)}\r\n                              className=\"flex-1 px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:border-blue-500\"\r\n                              step=\"0.01\"\r\n                              min=\"0\"\r\n                            />\r\n                            <span className=\"text-slate-500 text-sm\">/m</span>\r\n                          </div>\r\n                        </div>\r\n                        <div>\r\n                          <label className=\"block text-sm font-medium text-slate-600 mb-1\">Esquadria</label>\r\n                          <div className=\"flex items-center gap-2\">\r\n                            <span className=\"text-slate-500\">R$</span>\r\n                            <input\r\n                              type=\"number\"\r\n                              value={precos.esquadria}\r\n                              onChange={(e) => atualizarPreco('esquadria', e.target.value)}\r\n                              className=\"flex-1 px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:border-blue-500\"\r\n                              step=\"0.01\"\r\n                              min=\"0\"\r\n                            />\r\n                            <span className=\"text-slate-500 text-sm\">/m</span>\r\n                          </div>\r\n                        </div>\r\n                        <div>\r\n                          <label className=\"block text-sm font-medium text-slate-600 mb-1\">Boleado</label>\r\n                          <div className=\"flex items-center gap-2\">\r\n                            <span className=\"text-slate-500\">R$</span>\r\n                            <input\r\n                              type=\"number\"\r\n                              value={precos.boleado}\r\n                              onChange={(e) => atualizarPreco('boleado', e.target.value)}\r\n                              className=\"flex-1 px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:border-blue-500\"\r\n                              step=\"0.01\"\r\n                              min=\"0\"\r\n                            />\r\n                            <span className=\"text-slate-500 text-sm\">/m</span>\r\n                          </div>\r\n                        </div>\r\n                        <div>\r\n                          <label className=\"block text-sm font-medium text-slate-600 mb-1\">Canal</label>\r\n                          <div className=\"flex items-center gap-2\">\r\n                            <span className=\"text-slate-500\">R$</span>\r\n                            <input\r\n                              type=\"number\"\r\n                              value={precos.canal}\r\n                              onChange={(e) => atualizarPreco('canal', e.target.value)}\r\n                              className=\"flex-1 px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:border-blue-500\"\r\n                              step=\"0.01\"\r\n                              min=\"0\"\r\n                            />\r\n                            <span className=\"text-slate-500 text-sm\">/m</span>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                    \r\n                    {/* Recortes */}\r\n                    <div>\r\n                      <h3 className=\"font-bold text-slate-700 mb-4 flex items-center gap-2\">\r\n                        <span className=\"w-2 h-2 bg-purple-500 rounded-full\"></span>\r\n                        Recortes (por unidade)\r\n                      </h3>\r\n                      <div className=\"space-y-3\">\r\n                        <div>\r\n                          <label className=\"block text-sm font-medium text-slate-600 mb-1\">Pia/Cuba</label>\r\n                          <div className=\"flex items-center gap-2\">\r\n                            <span className=\"text-slate-500\">R$</span>\r\n                            <input\r\n                              type=\"number\"\r\n                              value={precos.pia}\r\n                              onChange={(e) => atualizarPreco('pia', e.target.value)}\r\n                              className=\"flex-1 px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:border-blue-500\"\r\n                              step=\"0.01\"\r\n                              min=\"0\"\r\n                            />\r\n                            <span className=\"text-slate-500 text-sm\">/un</span>\r\n                          </div>\r\n                        </div>\r\n                        <div>\r\n                          <label className=\"block text-sm font-medium text-slate-600 mb-1\">Cuba Esculpida</label>\r\n                          <div className=\"flex items-center gap-2\">\r\n                            <span className=\"text-slate-500\">R$</span>\r\n                            <input\r\n                              type=\"number\"\r\n                              value={precos.cubaEsculpida}\r\n                              onChange={(e) => atualizarPreco('cubaEsculpida', e.target.value)}\r\n                              className=\"flex-1 px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:border-blue-500\"\r\n                              step=\"0.01\"\r\n                              min=\"0\"\r\n                            />\r\n                            <span className=\"text-slate-500 text-sm\">/un</span>\r\n                          </div>\r\n                        </div>\r\n                        <div>\r\n                          <label className=\"block text-sm font-medium text-slate-600 mb-1\">Cooktop</label>\r\n                          <div className=\"flex items-center gap-2\">\r\n                            <span className=\"text-slate-500\">R$</span>\r\n                            <input\r\n                              type=\"number\"\r\n                              value={precos.cooktop}\r\n                              onChange={(e) => atualizarPreco('cooktop', e.target.value)}\r\n                              className=\"flex-1 px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:border-blue-500\"\r\n                              step=\"0.01\"\r\n                              min=\"0\"\r\n                            />\r\n                            <span className=\"text-slate-500 text-sm\">/un</span>\r\n                          </div>\r\n                        </div>\r\n                        <div>\r\n                          <label className=\"block text-sm font-medium text-slate-600 mb-1\">Recorte Gen√©rico</label>\r\n                          <div className=\"flex items-center gap-2\">\r\n                            <span className=\"text-slate-500\">R$</span>\r\n                            <input\r\n                              type=\"number\"\r\n                              value={precos.recorte}\r\n                              onChange={(e) => atualizarPreco('recorte', e.target.value)}\r\n                              className=\"flex-1 px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:border-blue-500\"\r\n                              step=\"0.01\"\r\n                              min=\"0\"\r\n                            />\r\n                            <span className=\"text-slate-500 text-sm\">/un</span>\r\n                          </div>\r\n                        </div>\r\n                        <div>\r\n                          <label className=\"block text-sm font-medium text-slate-600 mb-1\">P√©s</label>\r\n                          <div className=\"flex items-center gap-2\">\r\n                            <span className=\"text-slate-500\">R$</span>\r\n                            <input\r\n                              type=\"number\"\r\n                              value={precos.pes}\r\n                              onChange={(e) => atualizarPreco('pes', e.target.value)}\r\n                              className=\"flex-1 px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:border-blue-500\"\r\n                              step=\"0.01\"\r\n                              min=\"0\"\r\n                            />\r\n                            <span className=\"text-slate-500 text-sm\">/un</span>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  \r\n                  {/* Bot√£o Salvar */}\r\n                  <div className=\"mt-6 flex items-center justify-between gap-4\">\r\n                    <button\r\n                      onClick={salvarPrecos}\r\n                      className={`flex items-center gap-2 px-6 py-3 rounded-xl font-semibold transition-all duration-200 ${\r\n                        precosSalvos \r\n                          ? 'bg-green-500 text-white shadow-lg' \r\n                          : 'bg-gradient-to-r from-blue-500 to-blue-600 text-white hover:shadow-lg'\r\n                      }`}\r\n                    >\r\n                      <Save size={20} />\r\n                      {precosSalvos ? '‚úì Salvo com Sucesso!' : 'Salvar Configura√ß√µes'}\r\n                    </button>\r\n                    \r\n                    {!precosSalvos && (\r\n                      <p className=\"text-sm text-orange-600 font-medium\">\r\n                        ‚ö†Ô∏è H√° altera√ß√µes n√£o salvas\r\n                      </p>\r\n                    )}\r\n                  </div>\r\n                  \r\n                  <div className=\"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg\">\r\n                    <p className=\"text-sm text-blue-800\">\r\n                      üí° <strong>Dica:</strong> Estes valores ser√£o usados automaticamente em todos os or√ßamentos. Clique em \"Salvar\" para confirmar!\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n            \r\n            <div className=\"grid md:grid-cols-2 gap-6\">\r\n              {/* Card Materiais - Redesenhado */}\r\n              <div className=\"bg-white rounded-2xl shadow-lg p-6 border border-slate-200 hover:shadow-xl transition-shadow duration-300\">\r\n                <div className=\"flex items-center justify-between mb-6\">\r\n                  <div className=\"flex items-center gap-3\">\r\n                    <div className=\"w-10 h-10 bg-gradient-to-br from-purple-500 to-pink-600 rounded-lg flex items-center justify-center\">\r\n                      <Package size={20} className=\"text-white\" />\r\n                    </div>\r\n                    <h2 className=\"text-xl font-bold text-slate-800\">Materiais</h2>\r\n                  </div>\r\n                  <button\r\n                    onClick={() => setTela('novo-material')}\r\n                    className=\"flex items-center gap-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white px-4 py-2.5 rounded-xl hover:shadow-lg transition-all duration-200 font-medium\"\r\n                  >\r\n                    <PlusCircle size={18} />\r\n                    Novo\r\n                  </button>\r\n                </div>\r\n                <div className=\"space-y-3 max-h-96 overflow-y-auto\">\r\n                  {materiais.map(mat => (\r\n                    <div key={mat.id} className=\"bg-gradient-to-r from-slate-50 to-slate-100 border border-slate-200 rounded-xl p-4 hover:shadow-md transition-all duration-200\">\r\n                      <div className=\"flex items-center justify-between\">\r\n                        <div className=\"flex-1\">\r\n                          <h3 className=\"font-bold text-slate-800 text-lg\">{mat.nome}</h3>\r\n                          <div className=\"grid grid-cols-3 gap-3 mt-2\">\r\n                            <div>\r\n                              <p className=\"text-xs text-slate-500\">Dimens√µes</p>\r\n                              <p className=\"text-sm font-semibold text-slate-700\">{mat.comprimento} x {mat.altura} mm</p>\r\n                            </div>\r\n                            <div>\r\n                              <p className=\"text-xs text-slate-500\">Custo</p>\r\n                              <p className=\"text-sm font-semibold text-orange-600\">{formatBRL(mat.custo)}</p>\r\n                            </div>\r\n                            <div>\r\n                              <p className=\"text-xs text-slate-500\">Venda</p>\r\n                              <p className=\"text-sm font-semibold text-green-600\">{formatBRL((mat.venda || mat.custo))}</p>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"flex gap-2 ml-4\">\r\n                          <button\r\n                            onClick={() => {\r\n                              setMaterialEditando(mat);\r\n                              setNovoMaterial({\r\n                                nome: mat.nome,\r\n                                comprimento: mat.comprimento.toString(),\r\n                                altura: mat.altura.toString(),\r\n                                custo: mat.custo.toString(),\r\n                                venda: (mat.venda || mat.custo).toString()\r\n                              });\r\n                              setTela('editar-material');\r\n                            }}\r\n                            className=\"text-blue-600 hover:bg-blue-50 p-2 rounded-lg transition-colors\"\r\n                            title=\"Editar material\"\r\n                          >\r\n                            <Edit2 size={18} />\r\n                          </button>\r\n                          <button\r\n                            onClick={() => {\r\n                              if (window.confirm('Deseja realmente excluir este material?')) {\r\n                                setMateriais(materiais.filter(m => m.id !== mat.id));\r\n                              }\r\n                            }}\r\n                            className=\"text-red-600 hover:bg-red-50 p-2 rounded-lg transition-colors\"\r\n                            title=\"Excluir material\"\r\n                          >\r\n                            <Trash2 size={18} />\r\n                          </button>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n\r\n              {/* Card Or√ßamentos - Redesenhado */}\r\n              <div className=\"bg-white rounded-2xl shadow-lg p-6 border border-slate-200 hover:shadow-xl transition-shadow duration-300\">\r\n                <div className=\"flex items-center justify-between mb-6\">\r\n                  <div className=\"flex items-center gap-3\">\r\n                    <div className=\"w-10 h-10 bg-gradient-to-br from-green-500 to-emerald-600 rounded-lg flex items-center justify-center\">\r\n                      <FileText size={20} className=\"text-white\" />\r\n                    </div>\r\n                    <h2 className=\"text-xl font-bold text-slate-800\">Or√ßamentos</h2>\r\n                  </div>\r\n                  <button\r\n                    onClick={abrirModalNovoOrcamento}\r\n                    className=\"flex items-center gap-2 bg-gradient-to-r from-green-500 to-emerald-600 text-white px-4 py-2.5 rounded-xl hover:shadow-lg transition-all duration-200 font-medium\"\r\n                  >\r\n                    <PlusCircle size={18} />\r\n                    Novo\r\n                  </button>\r\n                </div>\r\n                <div className=\"space-y-3 max-h-96 overflow-y-auto\">\r\n                  {orcamentos.length === 0 ? (\r\n                    <div className=\"text-center py-12\">\r\n                      <div className=\"w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-3\">\r\n                        <FileText size={32} className=\"text-slate-400\" />\r\n                      </div>\r\n                      <p className=\"text-slate-500\">Nenhum or√ßamento criado ainda</p>\r\n                    </div>\r\n                  ) : (\r\n                    orcamentos.map(orc => {\r\n                      const totalPecas = orc.ambientes.reduce((sum, amb) => sum + amb.pecas.length, 0);\r\n                      const orcCalc = calcularOrcamentoComDetalhes(orc, materiais, precos);\r\n                      return (\r\n                        <div \r\n                          key={orc.id} \r\n                          className=\"bg-gradient-to-r from-slate-50 to-slate-100 border border-slate-200 rounded-xl p-4 hover:shadow-md transition-all duration-200 cursor-pointer\"\r\n                          onClick={() => {\r\n                            setOrcamentoAtual(orc);\r\n                            setTela('orcamento');\r\n                          }}\r\n                        >\r\n                          <div className=\"flex items-center justify-between\">\r\n                            <div className=\"flex-1\">\r\n                              <p className=\"font-bold text-slate-800 text-lg\">{orc.nome || `Or√ßamento #${String(orc.id).slice(-6)}`}</p>\r\n                              <p className=\"text-xs text-slate-500 mt-1\">üìÖ {orc.data}</p>\r\n                              <div className=\"flex gap-4 mt-2 text-xs text-slate-600\">\r\n                                <span>üè† {orc.ambientes.length} ambientes</span>\r\n                                <span>üì¶ {totalPecas} pe√ßas</span>\r\n                                <span>üìÑ {orc.chapas.length} chapas</span>\r\n                              </div>\r\n                            </div>\r\n                            <div className=\"text-right ml-4\">\r\n                              <div className=\"space-y-1\">\r\n                                <div>\r\n                                  <p className=\"text-xs text-slate-500 uppercase\">Custo</p>\r\n                                  <p className=\"text-lg font-bold text-orange-600\">\r\n                                    {formatBRL(orcCalc.custoTotal)}\r\n                                  </p>\r\n                                </div>\r\n                                <div>\r\n                                  <p className=\"text-xs text-slate-500 uppercase\">Venda</p>\r\n                                  <p className=\"text-2xl font-bold text-green-600\">\r\n                                    {formatBRL(orcCalc.vendaTotal)}\r\n                                  </p>\r\n                                </div>\r\n                                <div className=\"pt-1 border-t border-slate-300\">\r\n                                  <p className=\"text-xs text-blue-600 font-semibold\">\r\n                                    üí∞ Lucro: {formatBRL(orcCalc.margemTotal)}\r\n                                  </p>\r\n                                </div>\r\n                              </div>\r\n                              <button\r\n                                onClick={(e) => {\r\n                                  e.stopPropagation();\r\n                                  if (window.confirm('Deseja realmente excluir este or√ßamento?')) {\r\n                                    setOrcamentos(orcamentos.filter(o => o.id !== orc.id));\r\n                                  }\r\n                                }}\r\n                                className=\"mt-3 text-red-600 hover:bg-red-50 px-3 py-1 rounded-lg text-xs flex items-center gap-1 transition-colors\"\r\n                              >\r\n                                <Trash2 size={14} />\r\n                                Excluir\r\n                              </button>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      );\r\n                    })\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Cadastro de Material */}\r\n        {tela === 'novo-material' && (\r\n          <div className=\"bg-white rounded-lg shadow-sm p-6\">\r\n            <div className=\"flex items-center justify-between mb-6\">\r\n              <h2 className=\"text-2xl font-semibold text-gray-800\">Novo Material</h2>\r\n              <button\r\n                onClick={() => setTela('lista')}\r\n                className=\"text-gray-600 hover:text-gray-800\"\r\n              >\r\n                <X size={24} />\r\n              </button>\r\n            </div>\r\n            <div className=\"grid md:grid-cols-2 gap-4 max-w-2xl\">\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">Nome do Material</label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={novoMaterial.nome}\r\n                  onChange={(e) => setNovoMaterial({ ...novoMaterial, nome: e.target.value })}\r\n                  className=\"w-full border border-gray-300 rounded-lg px-3 py-2\"\r\n                  placeholder=\"Ex: M√°rmore Branco Carrara\"\r\n                />\r\n              </div>\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">Comprimento da Chapa (mm)</label>\r\n                <input\r\n                  type=\"number\"\r\n                  value={novoMaterial.comprimento}\r\n                  onChange={(e) => setNovoMaterial({ ...novoMaterial, comprimento: e.target.value })}\r\n                  className=\"w-full border border-gray-300 rounded-lg px-3 py-2\"\r\n                  placeholder=\"3000\"\r\n                />\r\n              </div>\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">Altura da Chapa (mm)</label>\r\n                <input\r\n                  type=\"number\"\r\n                  value={novoMaterial.altura}\r\n                  onChange={(e) => setNovoMaterial({ ...novoMaterial, altura: e.target.value })}\r\n                  className=\"w-full border border-gray-300 rounded-lg px-3 py-2\"\r\n                  placeholder=\"2000\"\r\n                />\r\n              </div>\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">Custo por Chapa (R$)</label>\r\n                <input\r\n                  type=\"number\"\r\n                  value={novoMaterial.custo}\r\n                  onChange={(e) => setNovoMaterial({ ...novoMaterial, custo: e.target.value })}\r\n                  className=\"w-full border border-gray-300 rounded-lg px-3 py-2\"\r\n                  placeholder=\"1500.00\"\r\n                  step=\"0.01\"\r\n                />\r\n              </div>\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">Pre√ßo de Venda (R$)</label>\r\n                <input\r\n                  type=\"number\"\r\n                  value={novoMaterial.venda}\r\n                  onChange={(e) => setNovoMaterial({ ...novoMaterial, venda: e.target.value })}\r\n                  className=\"w-full border border-gray-300 rounded-lg px-3 py-2\"\r\n                  placeholder=\"2000.00\"\r\n                  step=\"0.01\"\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"mt-6\">\r\n              <button\r\n                onClick={() => {\r\n                  if (novoMaterial.nome && novoMaterial.comprimento && novoMaterial.altura && novoMaterial.custo && novoMaterial.venda) {\r\n                    setMateriais([...materiais, {\r\n                      id: Date.now(),\r\n                      nome: novoMaterial.nome,\r\n                      comprimento: parseFloat(novoMaterial.comprimento),\r\n                      altura: parseFloat(novoMaterial.altura),\r\n                      custo: parseFloat(novoMaterial.custo),\r\n                      venda: parseFloat(novoMaterial.venda)\r\n                    }]);\r\n                    setNovoMaterial({ nome: '', comprimento: '', altura: '', custo: '', venda: '' });\r\n                    setTela('lista');\r\n                  }\r\n                }}\r\n                className=\"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700\"\r\n              >\r\n                Salvar Material\r\n              </button>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Edi√ß√£o de Material */}\r\n        {tela === 'editar-material' && materialEditando && (\r\n          <div className=\"bg-white rounded-lg shadow-sm p-6\">\r\n            <div className=\"flex items-center justify-between mb-6\">\r\n              <h2 className=\"text-2xl font-semibold text-gray-800\">Editar Material</h2>\r\n              <button\r\n                onClick={() => {\r\n                  setTela('lista');\r\n                  setMaterialEditando(null);\r\n                  setNovoMaterial({ nome: '', comprimento: '', altura: '', custo: '', venda: '' });\r\n                }}\r\n                className=\"text-gray-600 hover:text-gray-800\"\r\n              >\r\n                <X size={24} />\r\n              </button>\r\n            </div>\r\n            <div className=\"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-4\">\r\n              <p className=\"text-sm text-yellow-800 font-semibold mb-1\">\r\n                ‚ö†Ô∏è Aten√ß√£o: Altera√ß√µes neste material afetar√£o todos os or√ßamentos\r\n              </p>\r\n              <p className=\"text-xs text-yellow-700\">\r\n                ‚Ä¢ Mudan√ßas de pre√ßo: atualizam o valor dos or√ßamentos automaticamente<br/>\r\n                ‚Ä¢ Mudan√ßas de tamanho: reorganizam as pe√ßas e podem adicionar novas chapas se necess√°rio\r\n              </p>\r\n            </div>\r\n            <div className=\"grid md:grid-cols-2 gap-4 max-w-2xl\">\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">Nome do Material</label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={novoMaterial.nome}\r\n                  onChange={(e) => setNovoMaterial({ ...novoMaterial, nome: e.target.value })}\r\n                  className=\"w-full border border-gray-300 rounded-lg px-3 py-2\"\r\n                  placeholder=\"Ex: M√°rmore Branco Carrara\"\r\n                />\r\n              </div>\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">Comprimento da Chapa (mm)</label>\r\n                <input\r\n                  type=\"number\"\r\n                  value={novoMaterial.comprimento}\r\n                  onChange={(e) => setNovoMaterial({ ...novoMaterial, comprimento: e.target.value })}\r\n                  className=\"w-full border border-gray-300 rounded-lg px-3 py-2\"\r\n                  placeholder=\"3000\"\r\n                />\r\n              </div>\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">Altura da Chapa (mm)</label>\r\n                <input\r\n                  type=\"number\"\r\n                  value={novoMaterial.altura}\r\n                  onChange={(e) => setNovoMaterial({ ...novoMaterial, altura: e.target.value })}\r\n                  className=\"w-full border border-gray-300 rounded-lg px-3 py-2\"\r\n                  placeholder=\"2000\"\r\n                />\r\n              </div>\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">Custo por Chapa (R$)</label>\r\n                <input\r\n                  type=\"number\"\r\n                  value={novoMaterial.custo}\r\n                  onChange={(e) => setNovoMaterial({ ...novoMaterial, custo: e.target.value })}\r\n                  className=\"w-full border border-gray-300 rounded-lg px-3 py-2\"\r\n                  placeholder=\"1500.00\"\r\n                  step=\"0.01\"\r\n                />\r\n              </div>\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">Pre√ßo de Venda (R$)</label>\r\n                <input\r\n                  type=\"number\"\r\n                  value={novoMaterial.venda}\r\n                  onChange={(e) => setNovoMaterial({ ...novoMaterial, venda: e.target.value })}\r\n                  className=\"w-full border border-gray-300 rounded-lg px-3 py-2\"\r\n                  placeholder=\"2000.00\"\r\n                  step=\"0.01\"\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"mt-6 flex gap-3\">\r\n              <button\r\n                onClick={() => {\r\n                  if (novoMaterial.nome && novoMaterial.comprimento && novoMaterial.altura && novoMaterial.custo && novoMaterial.venda) {\r\n                    atualizarMaterial(materialEditando.id, {\r\n                      nome: novoMaterial.nome,\r\n                      comprimento: parseFloat(novoMaterial.comprimento),\r\n                      altura: parseFloat(novoMaterial.altura),\r\n                      custo: parseFloat(novoMaterial.custo),\r\n                      venda: parseFloat(novoMaterial.venda)\r\n                    });\r\n                    setNovoMaterial({ nome: '', comprimento: '', altura: '', custo: '', venda: '' });\r\n                    setMaterialEditando(null);\r\n                    setTela('lista');\r\n                    alert('Material atualizado com sucesso!\\n\\nTodos os or√ßamentos foram recalculados.\\nPe√ßas foram reorganizadas nas chapas conforme o novo tamanho.');\r\n                  }\r\n                }}\r\n                className=\"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700\"\r\n              >\r\n                Salvar Altera√ß√µes\r\n              </button>\r\n              <button\r\n                onClick={() => {\r\n                  setTela('lista');\r\n                  setMaterialEditando(null);\r\n                  setNovoMaterial({ nome: '', comprimento: '', altura: '', custo: '', venda: '' });\r\n                }}\r\n                className=\"border border-gray-300 px-6 py-2 rounded-lg hover:bg-gray-50\"\r\n              >\r\n                Cancelar\r\n              </button>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Tela de Or√ßamento */}\r\n        {tela === 'orcamento' && orcamentoAtual && (\r\n          <div className=\"space-y-6\">\r\n            <div className=\"bg-white rounded-lg shadow-sm p-6\">\r\n              <div className=\"mb-6\">\r\n                <div className=\"flex items-center gap-2 mb-1\">\r\n                  <input\r\n                    type=\"text\"\r\n                    value={orcamentoAtual.nome}\r\n                    onChange={(e) => setOrcamentoAtual({ ...orcamentoAtual, nome: e.target.value })}\r\n                    className=\"text-2xl font-semibold text-gray-800 border-b-2 border-transparent hover:border-blue-300 focus:border-blue-500 focus:outline-none w-full\"\r\n                    placeholder=\"Nome do or√ßamento\"\r\n                  />\r\n                </div>\r\n                <p className=\"text-sm text-gray-500 mb-3\">Criado em: {orcamentoAtual.data}</p>\r\n                <div className=\"flex flex-wrap gap-2\">\r\n                  <button\r\n                    onClick={() => setTela('plano-corte')}\r\n                    className=\"flex items-center gap-2 bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700\"\r\n                  >\r\n                    <Grid size={20} />\r\n                    Plano de Corte\r\n                  </button>\r\n                  <button\r\n                    onClick={() => gerarEtiquetasPDF()}\r\n                    className=\"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700\"\r\n                  >\r\n                    <Printer size={20} />\r\n                    Gerar Etiquetas\r\n                  </button>\r\n                  <button\r\n                    onClick={() => {\r\n                      salvarOrcamentoAtual();\r\n                      alert('‚úÖ Or√ßamento salvo com sucesso!');\r\n                      setTela('lista');\r\n                      setOrcamentoAtual(null);\r\n                    }}\r\n                    className=\"flex items-center gap-2 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700\"\r\n                  >\r\n                    <Save size={20} />\r\n                    Salvar Or√ßamento\r\n                  </button>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Adicionar Ambiente */}\r\n              <div className=\"mb-6\">\r\n                <div className=\"flex gap-3\">\r\n                  <input\r\n                    type=\"text\"\r\n                    placeholder=\"Nome do ambiente (ex: Cozinha)\"\r\n                    className=\"flex-1 border border-gray-300 rounded-lg px-3 py-2\"\r\n                    onKeyPress={(e) => {\r\n                      if (e.key === 'Enter') {\r\n                        adicionarAmbiente(e.target.value);\r\n                        e.target.value = '';\r\n                      }\r\n                    }}\r\n                  />\r\n                  <button\r\n                    onClick={(e) => {\r\n                      const input = e.target.previousSibling;\r\n                      adicionarAmbiente(input.value);\r\n                      input.value = '';\r\n                    }}\r\n                    className=\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700\"\r\n                  >\r\n                    Adicionar Ambiente\r\n                  </button>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Lista de Ambientes */}\r\n              <div className=\"space-y-4\" style={{ \r\n                opacity: (mostrandoDetalhePeca || pecaParaExcluir) ? 0 : 1,\r\n                pointerEvents: (mostrandoDetalhePeca || pecaParaExcluir) ? 'none' : 'auto',\r\n                transition: 'opacity 0.3s'\r\n              }}>\r\n                {orcamentoAtual.ambientes.map(ambiente => (\r\n                  <AmbienteCard\r\n                    key={ambiente.id}\r\n                    ambiente={ambiente}\r\n                    materiais={materiais}\r\n                    precos={precos}\r\n                    onAdicionarPeca={(peca) => adicionarPeca(ambiente.id, peca)}\r\n                    onExcluirPeca={(pecaId) => excluirPeca(ambiente.id, pecaId)}\r\n                    onVisualizarPeca={(peca) => setMostrandoDetalhePeca(peca)}\r\n                    onPedirConfirmacaoExclusao={(pecaId, pecaNome) => {\r\n                      setPecaParaExcluir({ pecaId, ambienteId: ambiente.id, pecaNome });\r\n                    }}\r\n                  />\r\n                ))}\r\n              </div>\r\n            </div>\r\n\r\n            {/* Resumo do Or√ßamento */}\r\n            <ResumoOrcamento orcamentoAtual={orcamentoAtual} materiais={materiais} precos={precos} />\r\n          </div>\r\n        )}\r\n\r\n        {/* Plano de Corte */}\r\n        {tela === 'plano-corte' && orcamentoAtual && (\r\n          <div className=\"bg-white rounded-2xl shadow-lg p-6 border border-slate-200\">\r\n            <div className=\"flex items-center justify-between mb-6\">\r\n              <div className=\"flex items-center gap-3\">\r\n                <div className=\"w-10 h-10 bg-gradient-to-br from-purple-500 to-pink-600 rounded-lg flex items-center justify-center\">\r\n                  <Grid size={20} className=\"text-white\" />\r\n                </div>\r\n                <h2 className=\"text-2xl font-bold text-slate-800\">Plano de Corte</h2>\r\n              </div>\r\n              <div className=\"flex gap-3\">\r\n                <button\r\n                  onClick={imprimirPlanoCorte}\r\n                  className=\"flex items-center gap-2 bg-gradient-to-r from-green-500 to-emerald-600 text-white px-4 py-2.5 rounded-xl hover:shadow-lg transition-all duration-200 font-medium\"\r\n                >\r\n                  <FileText size={20} />\r\n                  Imprimir Plano\r\n                </button>\r\n                <button\r\n                  onClick={() => setTela('orcamento')}\r\n                  className=\"flex items-center gap-2 text-slate-600 hover:text-slate-800 border-2 border-slate-200 px-4 py-2.5 rounded-xl hover:bg-slate-50 transition-all duration-200\"\r\n                >\r\n                  <X size={20} />\r\n                  Voltar\r\n                </button>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"space-y-6\">\r\n              {orcamentoAtual.chapas.map((chapa, idx) => (\r\n                <PlanoCorteChapa\r\n                  key={chapa.id}\r\n                  chapa={chapa}\r\n                  numero={idx + 1}\r\n                  onMoverPeca={moverPeca}\r\n                  onMoverPecaNaChapa={moverPecaNaChapa}\r\n                  onGirarPeca={girarPeca}\r\n                  pecaArrastando={pecaArrastando}\r\n                  setPecaArrastando={setPecaArrastando}\r\n                  todasChapas={orcamentoAtual.chapas}\r\n                />\r\n              ))}\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// Componente de Card de Ambiente\r\nconst AmbienteCard = ({ ambiente, materiais, precos, onAdicionarPeca, onExcluirPeca, onVisualizarPeca, onPedirConfirmacaoExclusao }) => {\r\n  const [expandido, setExpandido] = useState(false);\r\n  const [mostrarForm, setMostrarForm] = useState(false);\r\n  const [novaPeca, setNovaPeca] = useState({\r\n    nome: '',\r\n    altura: '',\r\n    comprimento: '',\r\n    quantidade: 1,\r\n    materialId: materiais[0]?.id || null,\r\n    acabamentos: {\r\n      esquadria: { ativo: false, lados: { superior: false, inferior: false, esquerda: false, direita: false } },\r\n      boleado: { ativo: false, lados: { superior: false, inferior: false, esquerda: false, direita: false } },\r\n      polimento: { ativo: false, lados: { superior: false, inferior: false, esquerda: false, direita: false } },\r\n      canal: { ativo: false, lados: { superior: false, inferior: false, esquerda: false, direita: false } }\r\n    },\r\n    cuba: 0,\r\n    cubaEsculpida: 0,\r\n    cooktop: 0,\r\n    recorte: 0,\r\n    pes: 0\r\n  });\r\n\r\n  return (\r\n    <div className=\"border border-gray-200 rounded-lg overflow-hidden\" style={{ position: 'relative', zIndex: 1 }}>\r\n      <div\r\n        className=\"bg-gray-50 p-4 cursor-pointer hover:bg-gray-100\"\r\n        onClick={() => setExpandido(!expandido)}\r\n      >\r\n        <div className=\"flex items-center justify-between\">\r\n          <h3 className=\"text-lg font-semibold text-gray-800\">{ambiente.nome}</h3>\r\n          <span className=\"text-sm text-gray-600\">{ambiente.pecas.length} pe√ßas</span>\r\n        </div>\r\n      </div>\r\n\r\n      {expandido && (\r\n        <div className=\"p-4 space-y-4\">\r\n          {/* Lista de Pe√ßas */}\r\n          {ambiente.pecas.map(peca => {\r\n            const material = materiais.find(m => m.id === peca.materialId);\r\n            const custosPeca = calcularCustosPeca(peca, material, precos);\r\n            return (\r\n              <div key={peca.id} className=\"bg-gray-50 p-3 rounded-lg border border-gray-200 hover:border-blue-300 transition-all relative\" style={{ zIndex: 1 }}>\r\n                {/* Bot√µes de A√ß√£o - ABSOLUTOS NO CANTO */}\r\n                <div className=\"absolute top-2 right-2 flex gap-2\" style={{ zIndex: 2, position: 'absolute' }}>\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={(e) => {\r\n                      e.preventDefault();\r\n                      e.stopPropagation();\r\n                      console.log('üîµ Ver detalhes clicado');\r\n                      onVisualizarPeca && onVisualizarPeca(peca);\r\n                    }}\r\n                    onMouseEnter={() => console.log('Mouse entrou no bot√£o AZUL')}\r\n                    className=\"bg-blue-500 hover:bg-blue-600 text-white p-2 rounded-lg shadow-lg transition-all\"\r\n                    title=\"Ver detalhes\"\r\n                    style={{ cursor: 'pointer', pointerEvents: 'auto' }}\r\n                  >\r\n                    <Edit2 size={18} />\r\n                  </button>\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={(e) => {\r\n                      e.preventDefault();\r\n                      e.stopPropagation();\r\n                      console.log('üî¥ CLICOU NO BOT√ÉO EXCLUIR');\r\n                      console.log('Pe√ßa ID:', peca.id);\r\n                      console.log('Ambiente ID:', ambiente.id);\r\n                      \r\n                      // Chamar callback para mostrar modal de confirma√ß√£o\r\n                      if (onPedirConfirmacaoExclusao) {\r\n                        onPedirConfirmacaoExclusao(peca.id, peca.nome);\r\n                      }\r\n                    }}\r\n                    onMouseEnter={() => console.log('Mouse entrou no bot√£o VERMELHO')}\r\n                    className=\"bg-red-500 hover:bg-red-600 text-white p-2 rounded-lg shadow-lg transition-all\"\r\n                    title=\"Excluir pe√ßa\"\r\n                    style={{ cursor: 'pointer', pointerEvents: 'auto' }}\r\n                  >\r\n                    <Trash2 size={18} />\r\n                  </button>\r\n                </div>\r\n\r\n                <div className=\"flex gap-3 pr-24\">\r\n                  {/* Miniatura da pe√ßa */}\r\n                  <div \r\n                    className=\"flex-shrink-0 cursor-pointer hover:scale-105 transition-transform\" \r\n                    style={{ width: '120px', height: '90px' }}\r\n                    onClick={(e) => {\r\n                      e.stopPropagation();\r\n                      onVisualizarPeca && onVisualizarPeca(peca);\r\n                    }}\r\n                    title=\"Clique para ver detalhes\"\r\n                  >\r\n                    <PreviewAcabamentos peca={peca} mostrarSempre={true} mini={true} />\r\n                  </div>\r\n                  \r\n                  {/* Informa√ß√µes da pe√ßa */}\r\n                  <div className=\"flex-1\">\r\n                    <h4 className=\"font-semibold text-gray-800 mb-2\">{peca.nome || 'Sem nome'}</h4>\r\n                    <div className=\"grid grid-cols-2 md:grid-cols-3 gap-2 text-sm\">\r\n                      <div>\r\n                        <p className=\"text-gray-500 text-xs\">Dimens√µes</p>\r\n                        <p className=\"font-medium text-xs\">{peca.comprimento} x {peca.altura} mm</p>\r\n                      </div>\r\n                      <div>\r\n                        <p className=\"text-gray-500 text-xs\">Material</p>\r\n                        <p className=\"font-medium text-xs\">{material?.nome}</p>\r\n                      </div>\r\n                      <div>\r\n                        <p className=\"text-gray-500 text-xs\">Chapa</p>\r\n                        <p className=\"font-medium text-xs\">#{peca.chapaId ? String(peca.chapaId).slice(-4) : 'N/A'}</p>\r\n                      </div>\r\n                    </div>\r\n                    \r\n                    {/* Acabamentos aplicados */}\r\n                    {peca.acabamentos && Object.values(peca.acabamentos).some(a => a.ativo) && (\r\n                      <div className=\"mt-2 flex flex-wrap gap-1\">\r\n                        {Object.keys(peca.acabamentos).map(tipo => {\r\n                          const acab = peca.acabamentos[tipo];\r\n                          if (!acab.ativo) return null;\r\n                          const cores = {\r\n                            esquadria: 'bg-red-100 text-red-700',\r\n                            boleado: 'bg-yellow-100 text-yellow-700',\r\n                            polimento: 'bg-blue-100 text-blue-700',\r\n                            canal: 'bg-orange-100 text-orange-700'\r\n                          };\r\n                          return (\r\n                            <span key={tipo} className={`text-xs px-2 py-0.5 rounded ${cores[tipo]}`}>\r\n                              {tipo.charAt(0).toUpperCase() + tipo.slice(1)}\r\n                            </span>\r\n                          );\r\n                        })}\r\n                      </div>\r\n                    )}\r\n\r\n                    {/* Custos Detalhados da Pe√ßa */}\r\n                    <div className=\"mt-3 pt-3 border-t border-gray-200\">\r\n                      <div className=\"grid grid-cols-2 gap-2 text-xs\">\r\n                        <div>\r\n                          <span className=\"text-gray-500\">√Årea:</span>\r\n                          <span className=\"font-semibold text-gray-800 ml-1\">{custosPeca.area.toFixed(2)}m¬≤</span>\r\n                        </div>\r\n                        <div>\r\n                          <span className=\"text-gray-500\">Material:</span>\r\n                          <span className=\"font-semibold text-green-700 ml-1\">{formatBRL(custosPeca.custoMaterial)}</span>\r\n                        </div>\r\n                        {custosPeca.acabamentos > 0 && (\r\n                          <div>\r\n                            <span className=\"text-gray-500\">Acabamentos:</span>\r\n                            <span className=\"font-semibold text-blue-700 ml-1\">{formatBRL(custosPeca.acabamentos)}</span>\r\n                          </div>\r\n                        )}\r\n                        {custosPeca.recortes > 0 && (\r\n                          <div>\r\n                            <span className=\"text-gray-500\">Recortes:</span>\r\n                            <span className=\"font-semibold text-purple-700 ml-1\">{formatBRL(custosPeca.recortes)}</span>\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                      <div className=\"mt-2 pt-2 border-t border-gray-300 flex justify-between items-center\">\r\n                        <span className=\"text-xs font-bold text-gray-700\">Total da Pe√ßa:</span>\r\n                        <span className=\"text-sm font-bold text-green-600\">{formatBRL(custosPeca.total)}</span>\r\n                      </div>\r\n\r\n                      {/* Detalhes expand√≠veis de acabamentos e recortes */}\r\n                      {(custosPeca.detalhesAcabamentos.length > 0 || custosPeca.detalhesRecortes.length > 0) && (\r\n                        <details className=\"mt-2\">\r\n                          <summary className=\"text-xs text-blue-600 cursor-pointer hover:text-blue-800\">\r\n                            Ver detalhes dos custos\r\n                          </summary>\r\n                          <div className=\"mt-2 space-y-1 pl-2 border-l-2 border-blue-200\">\r\n                            {custosPeca.detalhesAcabamentos.length > 0 && (\r\n                              <div>\r\n                                <p className=\"text-xs font-semibold text-gray-700\">Acabamentos:</p>\r\n                                {custosPeca.detalhesAcabamentos.map((detalhe, idx) => (\r\n                                  <div key={idx} className=\"text-xs text-gray-600 flex justify-between\">\r\n                                    <span>‚Ä¢ {detalhe.tipo.charAt(0).toUpperCase() + detalhe.tipo.slice(1)} ({detalhe.metros}m)</span>\r\n                                    <span className=\"font-medium\">{formatBRL(detalhe.valor)}</span>\r\n                                  </div>\r\n                                ))}\r\n                              </div>\r\n                            )}\r\n                            {custosPeca.detalhesRecortes.length > 0 && (\r\n                              <div className=\"mt-1\">\r\n                                <p className=\"text-xs font-semibold text-gray-700\">Recortes:</p>\r\n                                {custosPeca.detalhesRecortes.map((detalhe, idx) => (\r\n                                  <div key={idx} className=\"text-xs text-gray-600 flex justify-between\">\r\n                                    <span>‚Ä¢ {detalhe.tipo} ({detalhe.quantidade}x)</span>\r\n                                    <span className=\"font-medium\">{formatBRL(detalhe.valor)}</span>\r\n                                  </div>\r\n                                ))}\r\n                              </div>\r\n                            )}\r\n                          </div>\r\n                        </details>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            );\r\n          })}\r\n\r\n          {/* Bot√£o Adicionar Pe√ßa */}\r\n          {!mostrarForm && (\r\n            <button\r\n              onClick={() => setMostrarForm(true)}\r\n              className=\"w-full border-2 border-dashed border-gray-300 rounded-lg p-4 text-gray-600 hover:border-blue-500 hover:text-blue-600\"\r\n            >\r\n              + Adicionar Pe√ßa\r\n            </button>\r\n          )}\r\n\r\n          {/* Formul√°rio de Nova Pe√ßa */}\r\n          {mostrarForm && (\r\n            <div className=\"border-2 border-blue-200 rounded-lg p-4 bg-blue-50\">\r\n              <h4 className=\"font-semibold mb-3\">Nova Pe√ßa</h4>\r\n              <div className=\"mb-3\">\r\n                <label className=\"block text-xs font-medium mb-1\">Nome da Pe√ßa *</label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={novaPeca.nome}\r\n                  onChange={(e) => setNovaPeca({ ...novaPeca, nome: e.target.value })}\r\n                  className=\"w-full border rounded px-2 py-1 text-sm\"\r\n                  placeholder=\"Ex: Bancada Pia, Mesa Jantar, etc\"\r\n                />\r\n              </div>\r\n              <div className=\"grid md:grid-cols-3 gap-3 mb-3\">\r\n                <div>\r\n                  <label className=\"block text-xs font-medium mb-1\">Altura (mm)</label>\r\n                  <input\r\n                    type=\"number\"\r\n                    value={novaPeca.altura}\r\n                    onChange={(e) => setNovaPeca({ ...novaPeca, altura: e.target.value })}\r\n                    className=\"w-full border rounded px-2 py-1 text-sm\"\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <label className=\"block text-xs font-medium mb-1\">Comprimento (mm)</label>\r\n                  <input\r\n                    type=\"number\"\r\n                    value={novaPeca.comprimento}\r\n                    onChange={(e) => setNovaPeca({ ...novaPeca, comprimento: e.target.value })}\r\n                    className=\"w-full border rounded px-2 py-1 text-sm\"\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <label className=\"block text-xs font-medium mb-1\">Quantidade</label>\r\n                  <input\r\n                    type=\"number\"\r\n                    value={novaPeca.quantidade}\r\n                    onChange={(e) => setNovaPeca({ ...novaPeca, quantidade: parseInt(e.target.value) || 1 })}\r\n                    className=\"w-full border rounded px-2 py-1 text-sm\"\r\n                    min=\"1\"\r\n                  />\r\n                </div>\r\n                <div className=\"md:col-span-3\">\r\n                  <label className=\"block text-xs font-medium mb-1\">Material</label>\r\n                  <select\r\n                    value={novaPeca.materialId}\r\n                    onChange={(e) => setNovaPeca({ ...novaPeca, materialId: parseInt(e.target.value) })}\r\n                    className=\"w-full border rounded px-2 py-1 text-sm\"\r\n                  >\r\n                    {materiais.map(mat => (\r\n                      <option key={mat.id} value={mat.id}>{mat.nome}</option>\r\n                    ))}\r\n                  </select>\r\n                </div>\r\n              </div>\r\n\r\n              <h5 className=\"font-medium text-sm mb-2\">Acabamentos (opcional)</h5>\r\n              <div className=\"grid grid-cols-2 md:grid-cols-4 gap-3 mb-3\">\r\n                <label className=\"flex items-center gap-2 cursor-pointer\">\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    checked={novaPeca.acabamentos.esquadria.ativo}\r\n                    onChange={(e) => {\r\n                      setNovaPeca({\r\n                        ...novaPeca,\r\n                        acabamentos: {\r\n                          ...novaPeca.acabamentos,\r\n                          esquadria: { ...novaPeca.acabamentos.esquadria, ativo: e.target.checked }\r\n                        }\r\n                      });\r\n                    }}\r\n                    className=\"w-4 h-4\"\r\n                  />\r\n                  <span className=\"text-sm\">Esquadria (R$ {precos.esquadria}/m)</span>\r\n                </label>\r\n                \r\n                <label className=\"flex items-center gap-2 cursor-pointer\">\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    checked={novaPeca.acabamentos.boleado.ativo}\r\n                    onChange={(e) => {\r\n                      setNovaPeca({\r\n                        ...novaPeca,\r\n                        acabamentos: {\r\n                          ...novaPeca.acabamentos,\r\n                          boleado: { ...novaPeca.acabamentos.boleado, ativo: e.target.checked }\r\n                        }\r\n                      });\r\n                    }}\r\n                    className=\"w-4 h-4\"\r\n                  />\r\n                  <span className=\"text-sm\">Boleado (R$ {precos.boleado}/m)</span>\r\n                </label>\r\n                \r\n                <label className=\"flex items-center gap-2 cursor-pointer\">\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    checked={novaPeca.acabamentos.polimento.ativo}\r\n                    onChange={(e) => {\r\n                      setNovaPeca({\r\n                        ...novaPeca,\r\n                        acabamentos: {\r\n                          ...novaPeca.acabamentos,\r\n                          polimento: { ...novaPeca.acabamentos.polimento, ativo: e.target.checked }\r\n                        }\r\n                      });\r\n                    }}\r\n                    className=\"w-4 h-4\"\r\n                  />\r\n                  <span className=\"text-sm\">Polimento (R$ {precos.polimento}/m)</span>\r\n                </label>\r\n                \r\n                <label className=\"flex items-center gap-2 cursor-pointer\">\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    checked={novaPeca.acabamentos.canal.ativo}\r\n                    onChange={(e) => {\r\n                      setNovaPeca({\r\n                        ...novaPeca,\r\n                        acabamentos: {\r\n                          ...novaPeca.acabamentos,\r\n                          canal: { ...novaPeca.acabamentos.canal, ativo: e.target.checked }\r\n                        }\r\n                      });\r\n                    }}\r\n                    className=\"w-4 h-4\"\r\n                  />\r\n                  <span className=\"text-sm\">Canal (R$ {precos.canal}/m)</span>\r\n                </label>\r\n              </div>\r\n              \r\n              {/* Preview Unificado de Acabamentos */}\r\n              {(novaPeca.acabamentos.esquadria.ativo || \r\n                novaPeca.acabamentos.boleado.ativo || \r\n                novaPeca.acabamentos.polimento.ativo || \r\n                novaPeca.acabamentos.canal.ativo) && (\r\n                <div className=\"mb-3 bg-blue-50 border border-blue-200 rounded-lg p-3\">\r\n                  <h6 className=\"font-semibold text-sm mb-3\">üìê Selecione os lados para cada acabamento:</h6>\r\n                  \r\n                  <div className=\"space-y-4\">\r\n                    {[\r\n                      { tipo: 'esquadria', label: 'Esquadria', cor: 'red', emoji: 'üî¥' },\r\n                      { tipo: 'boleado', label: 'Boleado', cor: 'yellow', emoji: 'üü°' },\r\n                      { tipo: 'polimento', label: 'Polimento', cor: 'blue', emoji: 'üîµ' },\r\n                      { tipo: 'canal', label: 'Canal', cor: 'orange', emoji: 'üü†' }\r\n                    ].filter(item => novaPeca.acabamentos[item.tipo].ativo).map(item => {\r\n                      const coresBg = { red: 'bg-red-100 border-red-400 text-red-700', yellow: 'bg-yellow-100 border-yellow-400 text-yellow-700', blue: 'bg-blue-100 border-blue-400 text-blue-700', orange: 'bg-orange-100 border-orange-400 text-orange-700' };\r\n                      const coresAtivo = { red: 'bg-red-500 text-white border-red-600', yellow: 'bg-yellow-500 text-white border-yellow-600', blue: 'bg-blue-500 text-white border-blue-600', orange: 'bg-orange-500 text-white border-orange-600' };\r\n                      const coresInativo = { red: 'bg-white text-red-400 border-red-200 hover:bg-red-50', yellow: 'bg-white text-yellow-500 border-yellow-200 hover:bg-yellow-50', blue: 'bg-white text-blue-400 border-blue-200 hover:bg-blue-50', orange: 'bg-white text-orange-400 border-orange-200 hover:bg-orange-50' };\r\n                      \r\n                      const toggleLado = (lado) => {\r\n                        const novosAcabamentos = { ...novaPeca.acabamentos };\r\n                        novosAcabamentos[item.tipo] = {\r\n                          ...novosAcabamentos[item.tipo],\r\n                          lados: {\r\n                            ...novosAcabamentos[item.tipo].lados,\r\n                            [lado]: !novosAcabamentos[item.tipo].lados[lado]\r\n                          }\r\n                        };\r\n                        setNovaPeca({ ...novaPeca, acabamentos: novosAcabamentos });\r\n                      };\r\n\r\n                      const lados = novaPeca.acabamentos[item.tipo].lados;\r\n                      const ladosSelecionados = Object.keys(lados).filter(l => lados[l]).length;\r\n\r\n                      return (\r\n                        <div key={item.tipo} className={`rounded-lg p-3 border ${coresBg[item.cor]}`}>\r\n                          <div className=\"flex items-center justify-between mb-2\">\r\n                            <p className=\"text-xs font-bold\">{item.emoji} {item.label}</p>\r\n                            <span className=\"text-xs opacity-70\">{ladosSelecionados} lado(s)</span>\r\n                          </div>\r\n                          \r\n                          {/* Seletor visual com quadrado representando a pe√ßa */}\r\n                          <div className=\"flex items-center justify-center\">\r\n                            <div className=\"relative\" style={{ width: '180px', height: '120px' }}>\r\n                              {/* Bot√£o SUPERIOR */}\r\n                              <button\r\n                                type=\"button\"\r\n                                onClick={() => toggleLado('superior')}\r\n                                className={`absolute top-0 left-1/2 -translate-x-1/2 px-3 py-1 text-xs font-bold rounded-t-lg border-2 transition-all ${lados.superior ? coresAtivo[item.cor] : coresInativo[item.cor]}`}\r\n                                style={{ minWidth: '80px', zIndex: 2 }}\r\n                              >\r\n                                Superior\r\n                              </button>\r\n\r\n                              {/* Bot√£o INFERIOR */}\r\n                              <button\r\n                                type=\"button\"\r\n                                onClick={() => toggleLado('inferior')}\r\n                                className={`absolute bottom-0 left-1/2 -translate-x-1/2 px-3 py-1 text-xs font-bold rounded-b-lg border-2 transition-all ${lados.inferior ? coresAtivo[item.cor] : coresInativo[item.cor]}`}\r\n                                style={{ minWidth: '80px', zIndex: 2 }}\r\n                              >\r\n                                Inferior\r\n                              </button>\r\n\r\n                              {/* Bot√£o ESQUERDA */}\r\n                              <button\r\n                                type=\"button\"\r\n                                onClick={() => toggleLado('esquerda')}\r\n                                className={`absolute left-0 top-1/2 -translate-y-1/2 px-1 py-2 text-xs font-bold rounded-l-lg border-2 transition-all ${lados.esquerda ? coresAtivo[item.cor] : coresInativo[item.cor]}`}\r\n                                style={{ writingMode: 'vertical-lr', textOrientation: 'mixed', zIndex: 2 }}\r\n                              >\r\n                                Esq.\r\n                              </button>\r\n\r\n                              {/* Bot√£o DIREITA */}\r\n                              <button\r\n                                type=\"button\"\r\n                                onClick={() => toggleLado('direita')}\r\n                                className={`absolute right-0 top-1/2 -translate-y-1/2 px-1 py-2 text-xs font-bold rounded-r-lg border-2 transition-all ${lados.direita ? coresAtivo[item.cor] : coresInativo[item.cor]}`}\r\n                                style={{ writingMode: 'vertical-lr', textOrientation: 'mixed', zIndex: 2 }}\r\n                              >\r\n                                Dir.\r\n                              </button>\r\n\r\n                              {/* Quadrado central representando a pe√ßa */}\r\n                              <div \r\n                                className=\"absolute bg-white border-2 border-gray-300 rounded flex items-center justify-center\"\r\n                                style={{ top: '22px', bottom: '22px', left: '26px', right: '26px' }}\r\n                              >\r\n                                <span className=\"text-xs text-gray-400 font-medium\">PE√áA</span>\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n\r\n                          {/* Bot√£o r√°pido: Todos os lados */}\r\n                          <div className=\"flex justify-center mt-2 gap-2\">\r\n                            <button\r\n                              type=\"button\"\r\n                              onClick={() => {\r\n                                const novosAcabamentos = { ...novaPeca.acabamentos };\r\n                                const todosAtivos = lados.superior && lados.inferior && lados.esquerda && lados.direita;\r\n                                novosAcabamentos[item.tipo] = {\r\n                                  ...novosAcabamentos[item.tipo],\r\n                                  lados: {\r\n                                    superior: !todosAtivos,\r\n                                    inferior: !todosAtivos,\r\n                                    esquerda: !todosAtivos,\r\n                                    direita: !todosAtivos\r\n                                  }\r\n                                };\r\n                                setNovaPeca({ ...novaPeca, acabamentos: novosAcabamentos });\r\n                              }}\r\n                              className={`text-xs px-3 py-1 rounded-full border font-semibold transition-all ${\r\n                                lados.superior && lados.inferior && lados.esquerda && lados.direita\r\n                                  ? coresAtivo[item.cor]\r\n                                  : 'bg-gray-100 text-gray-600 border-gray-300 hover:bg-gray-200'\r\n                              }`}\r\n                            >\r\n                              {lados.superior && lados.inferior && lados.esquerda && lados.direita ? '‚úì Todos os lados' : 'Selecionar todos'}\r\n                            </button>\r\n                          </div>\r\n                        </div>\r\n                      );\r\n                    })}\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              <h5 className=\"font-medium text-sm mb-2\">Recortes (opcional)</h5>\r\n              <div className=\"grid grid-cols-2 md:grid-cols-5 gap-3 mb-3\">\r\n                <div>\r\n                  <label className=\"block text-xs mb-1\">Cuba</label>\r\n                  <input\r\n                    type=\"number\"\r\n                    value={novaPeca.cuba}\r\n                    onChange={(e) => setNovaPeca({ ...novaPeca, cuba: parseInt(e.target.value) || 0 })}\r\n                    className=\"w-full border rounded px-2 py-1 text-sm\"\r\n                    min=\"0\"\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <label className=\"block text-xs mb-1\">Cuba Esculpida</label>\r\n                  <input\r\n                    type=\"number\"\r\n                    value={novaPeca.cubaEsculpida}\r\n                    onChange={(e) => setNovaPeca({ ...novaPeca, cubaEsculpida: parseInt(e.target.value) || 0 })}\r\n                    className=\"w-full border rounded px-2 py-1 text-sm\"\r\n                    min=\"0\"\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <label className=\"block text-xs mb-1\">Cooktop</label>\r\n                  <input\r\n                    type=\"number\"\r\n                    value={novaPeca.cooktop}\r\n                    onChange={(e) => setNovaPeca({ ...novaPeca, cooktop: parseInt(e.target.value) || 0 })}\r\n                    className=\"w-full border rounded px-2 py-1 text-sm\"\r\n                    min=\"0\"\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <label className=\"block text-xs mb-1\">Recorte</label>\r\n                  <input\r\n                    type=\"number\"\r\n                    value={novaPeca.recorte}\r\n                    onChange={(e) => setNovaPeca({ ...novaPeca, recorte: parseInt(e.target.value) || 0 })}\r\n                    className=\"w-full border rounded px-2 py-1 text-sm\"\r\n                    min=\"0\"\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <label className=\"block text-xs mb-1\">P√©s</label>\r\n                  <input\r\n                    type=\"number\"\r\n                    value={novaPeca.pes}\r\n                    onChange={(e) => setNovaPeca({ ...novaPeca, pes: parseInt(e.target.value) || 0 })}\r\n                    className=\"w-full border rounded px-2 py-1 text-sm\"\r\n                    min=\"0\"\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              {/* Preview da Pe√ßa */}\r\n              {novaPeca.comprimento && novaPeca.altura && (\r\n                <div className=\"mb-4\">\r\n                  <PreviewAcabamentos peca={novaPeca} />\r\n                </div>\r\n              )}\r\n\r\n              <div className=\"flex gap-2\">\r\n                <button\r\n                  onClick={() => {\r\n                    if (novaPeca.nome && novaPeca.altura && novaPeca.comprimento && novaPeca.materialId) {\r\n                      onAdicionarPeca({\r\n                        ...novaPeca,\r\n                        altura: parseFloat(novaPeca.altura),\r\n                        comprimento: parseFloat(novaPeca.comprimento)\r\n                      });\r\n                      setNovaPeca({\r\n                        nome: '',\r\n                        altura: '',\r\n                        comprimento: '',\r\n                        quantidade: 1,\r\n                        materialId: materiais[0]?.id || null,\r\n                        acabamentos: {\r\n                          esquadria: { ativo: false, lados: { superior: false, inferior: false, esquerda: false, direita: false } },\r\n                          boleado: { ativo: false, lados: { superior: false, inferior: false, esquerda: false, direita: false } },\r\n                          polimento: { ativo: false, lados: { superior: false, inferior: false, esquerda: false, direita: false } },\r\n                          canal: { ativo: false, lados: { superior: false, inferior: false, esquerda: false, direita: false } }\r\n                        },\r\n                        cuba: 0,\r\n                        cubaEsculpida: 0,\r\n                        cooktop: 0,\r\n                        recorte: 0,\r\n                        pes: 0\r\n                      });\r\n                      setMostrarForm(false);\r\n                    } else {\r\n                      alert('Por favor, preencha o nome, altura e comprimento da pe√ßa!');\r\n                    }\r\n                  }}\r\n                  className=\"bg-blue-600 text-white px-4 py-2 rounded text-sm hover:bg-blue-700\"\r\n                >\r\n                  Adicionar\r\n                </button>\r\n                <button\r\n                  onClick={() => setMostrarForm(false)}\r\n                  className=\"border border-gray-300 px-4 py-2 rounded text-sm hover:bg-gray-50\"\r\n                >\r\n                  Cancelar\r\n                </button>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\n\r\n// Componente de Pr√©-visualiza√ß√£o de Acabamentos\r\nconst PreviewAcabamentos = ({ peca, mostrarSempre = false, mini = false }) => {\r\n  const canvasRef = useRef(null);\r\n  \r\n  useEffect(() => {\r\n    desenharPreview();\r\n  }, [peca]);\r\n  \r\n  const desenharPreview = () => {\r\n    const canvas = canvasRef.current;\r\n    if (!canvas || !peca.comprimento || !peca.altura) return;\r\n    \r\n    const ctx = canvas.getContext('2d');\r\n    const largura = parseFloat(peca.comprimento) || 600;\r\n    const altura = parseFloat(peca.altura) || 400;\r\n    \r\n    // Ajustar tamanho do canvas baseado em mini ou normal\r\n    const canvasWidth = mini ? 120 : 260;\r\n    const canvasHeight = mini ? 90 : 200;\r\n    \r\n    // Escala para caber no canvas, reservando margem para cotas\r\n    const margemTop = mini ? 10 : 28;   // espa√ßo para cota horizontal\r\n    const margemLeft = mini ? 10 : 30;  // espa√ßo para cota vertical\r\n    const margemRight = mini ? 10 : 12;\r\n    const margemBottom = mini ? 10 : 12;\r\n    \r\n    const areaW = canvasWidth - margemLeft - margemRight;\r\n    const areaH = canvasHeight - margemTop - margemBottom;\r\n    \r\n    const escalaX = areaW / largura;\r\n    const escalaY = areaH / altura;\r\n    const escala = Math.min(escalaX, escalaY, mini ? 0.5 : 0.55);\r\n    \r\n    const w = largura * escala;\r\n    const h = altura * escala;\r\n    const offsetX = margemLeft + (areaW - w) / 2;\r\n    const offsetY = margemTop + (areaH - h) / 2;\r\n    \r\n    canvas.width = canvasWidth;\r\n    canvas.height = canvasHeight;\r\n    \r\n    // Fundo com gradiente\r\n    const gradient = ctx.createLinearGradient(0, 0, 0, canvasHeight);\r\n    gradient.addColorStop(0, '#f8fafc');\r\n    gradient.addColorStop(1, '#e2e8f0');\r\n    ctx.fillStyle = gradient;\r\n    ctx.fillRect(0, 0, canvasWidth, canvasHeight);\r\n    \r\n    if (!mini) {\r\n      // Sombra da pe√ßa (apenas em modo normal)\r\n      ctx.shadowColor = 'rgba(0, 0, 0, 0.15)';\r\n      ctx.shadowBlur = 15;\r\n      ctx.shadowOffsetX = 3;\r\n      ctx.shadowOffsetY = 3;\r\n    }\r\n    \r\n    // Pe√ßa com gradiente\r\n    const pecaGradient = ctx.createLinearGradient(offsetX, offsetY, offsetX + w, offsetY + h);\r\n    pecaGradient.addColorStop(0, '#ffffff');\r\n    pecaGradient.addColorStop(1, '#f1f5f9');\r\n    ctx.fillStyle = pecaGradient;\r\n    ctx.fillRect(offsetX, offsetY, w, h);\r\n    \r\n    // Resetar sombra\r\n    ctx.shadowColor = 'transparent';\r\n    ctx.shadowBlur = 0;\r\n    ctx.shadowOffsetX = 0;\r\n    ctx.shadowOffsetY = 0;\r\n    \r\n    // Borda da pe√ßa\r\n    ctx.strokeStyle = '#94a3b8';\r\n    ctx.lineWidth = mini ? 1 : 2;\r\n    ctx.strokeRect(offsetX, offsetY, w, h);\r\n    \r\n    // Desenhar acabamentos\r\n    const coresAcabamentos = {\r\n      esquadria: '#ef4444',\r\n      boleado: '#eab308',\r\n      polimento: '#3b82f6',\r\n      canal: '#f59e0b'\r\n    };\r\n    \r\n    const offsetCanal = mini ? 3 : 10; // Canal fica mais interno\r\n    \r\n    if (peca.acabamentos) {\r\n      Object.keys(peca.acabamentos).forEach(tipoAcab => {\r\n        const acab = peca.acabamentos[tipoAcab];\r\n        if (!acab.ativo) return;\r\n        \r\n        const cor = coresAcabamentos[tipoAcab];\r\n        const isCanal = tipoAcab === 'canal';\r\n        const offset = isCanal ? offsetCanal : 0;\r\n        \r\n        ctx.strokeStyle = cor;\r\n        ctx.lineWidth = mini ? 2 : 4;\r\n        ctx.setLineDash(mini ? [5, 2] : [10, 5]);\r\n        \r\n        // Superior\r\n        if (acab.lados.superior) {\r\n          ctx.beginPath();\r\n          ctx.moveTo(offsetX + offset, offsetY + offset);\r\n          ctx.lineTo(offsetX + w - offset, offsetY + offset);\r\n          ctx.stroke();\r\n        }\r\n        \r\n        // Inferior\r\n        if (acab.lados.inferior) {\r\n          ctx.beginPath();\r\n          ctx.moveTo(offsetX + offset, offsetY + h - offset);\r\n          ctx.lineTo(offsetX + w - offset, offsetY + h - offset);\r\n          ctx.stroke();\r\n        }\r\n        \r\n        // Esquerda\r\n        if (acab.lados.esquerda) {\r\n          ctx.beginPath();\r\n          ctx.moveTo(offsetX + offset, offsetY + offset);\r\n          ctx.lineTo(offsetX + offset, offsetY + h - offset);\r\n          ctx.stroke();\r\n        }\r\n        \r\n        // Direita\r\n        if (acab.lados.direita) {\r\n          ctx.beginPath();\r\n          ctx.moveTo(offsetX + w - offset, offsetY + offset);\r\n          ctx.lineTo(offsetX + w - offset, offsetY + h - offset);\r\n          ctx.stroke();\r\n        }\r\n        \r\n        ctx.setLineDash([]);\r\n      });\r\n    }\r\n    \r\n    if (!mini) {\r\n      // Dimens√µes com estilo melhorado (apenas em modo normal)\r\n      ctx.fillStyle = '#1e293b';\r\n      ctx.font = 'bold 12px Arial';\r\n      ctx.textAlign = 'center';\r\n      \r\n      // Dimens√£o horizontal\r\n      ctx.fillStyle = '#ffffff';\r\n      ctx.fillRect(offsetX + w/2 - 35, offsetY - 22, 70, 16);\r\n      ctx.strokeStyle = '#64748b';\r\n      ctx.lineWidth = 1;\r\n      ctx.strokeRect(offsetX + w/2 - 35, offsetY - 22, 70, 16);\r\n      ctx.fillStyle = '#1e293b';\r\n      ctx.fillText(`${largura} mm`, offsetX + w/2, offsetY - 11);\r\n      \r\n      // Dimens√£o vertical\r\n      ctx.save();\r\n      ctx.translate(offsetX - 22, offsetY + h/2);\r\n      ctx.rotate(-Math.PI/2);\r\n      ctx.fillStyle = '#ffffff';\r\n      ctx.fillRect(-35, -9, 70, 18);\r\n      ctx.strokeStyle = '#64748b';\r\n      ctx.lineWidth = 1;\r\n      ctx.strokeRect(-35, -9, 70, 18);\r\n      ctx.fillStyle = '#1e293b';\r\n      ctx.fillText(`${altura} mm`, 0, 3);\r\n      ctx.restore();\r\n      \r\n      // Nome da pe√ßa CENTRALIZADO NA PE√áA (n√£o no topo)\r\n      if (peca.nome && !mini) {\r\n        ctx.font = 'bold 12px Arial';\r\n        ctx.textAlign = 'center';\r\n        const nomeExibir = peca.nome.length > 20 ? peca.nome.substring(0, 20) + '...' : peca.nome;\r\n        \r\n        // Fundo do nome\r\n        const textWidth = ctx.measureText(nomeExibir).width;\r\n        ctx.fillStyle = 'rgba(59, 130, 246, 0.92)';\r\n        ctx.fillRect(offsetX + w/2 - textWidth/2 - 6, offsetY + h/2 - 9, textWidth + 12, 18);\r\n        \r\n        ctx.fillStyle = '#ffffff';\r\n        ctx.fillText(nomeExibir, offsetX + w/2, offsetY + h/2 + 3);\r\n      }\r\n    }\r\n  };\r\n  \r\n  return (\r\n    <div className={`${mini ? 'border border-gray-300 rounded' : 'border-2 border-gray-300 rounded-lg shadow-md'} bg-gradient-to-br from-slate-50 to-slate-100 overflow-hidden`} style={mini ? {} : { maxWidth: '260px' }}>\r\n      <canvas \r\n        ref={canvasRef} \r\n        className=\"w-full\"\r\n        style={mini ? {} : { maxWidth: '260px' }}\r\n      />\r\n      {!mostrarSempre && !mini && (\r\n        <div className=\"p-3 border-t-2 border-gray-200 bg-white\">\r\n          <p className=\"text-xs text-gray-600 text-center font-medium\">\r\n            üëÅÔ∏è Pr√©-visualiza√ß√£o da pe√ßa\r\n          </p>\r\n          <p className=\"text-xs text-gray-500 text-center mt-1\">\r\n            Use os bot√µes abaixo para selecionar os lados de cada acabamento\r\n          </p>\r\n        </div>\r\n      )}\r\n      {!mini && peca.acabamentos && Object.values(peca.acabamentos).some(a => a.ativo) && (\r\n        <div className=\"p-2 bg-white border-t border-gray-200\">\r\n          <p className=\"text-xs font-semibold text-gray-600 mb-1\">Acabamentos:</p>\r\n          <div className=\"flex flex-wrap gap-2\">\r\n            {Object.keys(peca.acabamentos).map(tipo => {\r\n              const acab = peca.acabamentos[tipo];\r\n              if (!acab.ativo) return null;\r\n              const cores = { esquadria: '#ef4444', boleado: '#eab308', polimento: '#3b82f6', canal: '#f59e0b' };\r\n              return (\r\n                <div key={tipo} className=\"flex items-center gap-1\">\r\n                  <div className=\"w-3 h-0.5\" style={{ backgroundColor: cores[tipo] }}></div>\r\n                  <span className=\"text-xs text-gray-700\">{tipo.charAt(0).toUpperCase() + tipo.slice(1)}</span>\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\nconst ResumoOrcamento = ({ orcamentoAtual, materiais, precos }) => {\r\n  const orcamento = calcularOrcamentoComDetalhes(orcamentoAtual, materiais, precos);\r\n\r\n  return (\r\n    <div className=\"bg-white rounded-2xl shadow-lg p-6 border border-slate-200\">\r\n      <h3 className=\"text-2xl font-bold mb-6 text-slate-800\">Resumo do Or√ßamento</h3>\r\n\r\n      {/* Chapas de Material - CUSTO vs VENDA */}\r\n      <div className=\"mb-6\">\r\n        <div className=\"flex justify-between items-center py-3 border-b-2 border-slate-300 mb-3\">\r\n          <span className=\"font-bold text-lg text-slate-800\">Chapas de Material</span>\r\n          <div className=\"flex gap-6\">\r\n            <div className=\"text-right\">\r\n              <div className=\"text-xs text-slate-500 uppercase\">Custo</div>\r\n              <span className=\"font-bold text-lg text-orange-600\">{formatBRL(orcamento.custoChapas)}</span>\r\n            </div>\r\n            <div className=\"text-right\">\r\n              <div className=\"text-xs text-slate-500 uppercase\">Venda</div>\r\n              <span className=\"font-bold text-lg text-green-600\">{formatBRL(orcamento.vendaChapas)}</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        {Object.keys(orcamento.chapasPorMaterial || {}).map(materialId => {\r\n          const material = materiais.find(m => m.id === parseInt(materialId));\r\n          const qtd = orcamento.chapasPorMaterial[materialId];\r\n          const custoParcial = material?.custo * qtd;\r\n          const vendaParcial = (material?.venda || material?.custo) * qtd;\r\n          return (\r\n            <div key={materialId} className=\"flex justify-between text-sm text-slate-700 pl-4 py-2 hover:bg-slate-50 rounded\">\r\n              <span className=\"flex-1\">\r\n                <span className=\"font-medium\">{material?.nome}</span>\r\n                <span className=\"text-slate-500 ml-2\">\r\n                  ({qtd}x chapas ‚Ä¢ {material?.comprimento}x{material?.altura}mm ‚Ä¢\r\n                  {((material?.comprimento * material?.altura / 1000000) * qtd).toFixed(2)}m¬≤ total)\r\n                </span>\r\n              </span>\r\n              <div className=\"flex gap-6 ml-4\">\r\n                <span className=\"text-orange-600 w-24 text-right\">{formatBRL(custoParcial)}</span>\r\n                <span className=\"text-green-600 w-24 text-right\">{formatBRL(vendaParcial)}</span>\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n        {orcamento.margemChapas > 0 && (\r\n          <div className=\"mt-2 pt-2 border-t border-slate-200 flex justify-between text-sm pl-4\">\r\n            <span className=\"font-semibold text-slate-600\">Margem das Chapas:</span>\r\n            <span className=\"font-semibold text-blue-600\">{formatBRL(orcamento.margemChapas)} ({((orcamento.margemChapas / orcamento.vendaChapas) * 100).toFixed(1)}%)</span>\r\n          </div>\r\n        )}\r\n\r\n        {/* Detalhamento por Chapa - NOVO */}\r\n        {orcamento.detalhesChapas && orcamento.detalhesChapas.length > 0 && (\r\n          <div className=\"mt-4 pt-4 border-t border-slate-200\">\r\n            <h4 className=\"font-semibold text-slate-700 mb-3 flex items-center gap-2\">\r\n              üìä Aproveitamento por Chapa\r\n              <span className=\"text-xs text-slate-500 font-normal\">(pe√ßas = pre√ßo venda, sobra = pre√ßo custo)</span>\r\n            </h4>\r\n            {orcamento.detalhesChapas.map((detalhe, idx) => (\r\n              <div key={idx} className=\"bg-slate-50 rounded-lg p-3 mb-2 text-sm\">\r\n                <div className=\"flex justify-between items-start mb-2\">\r\n                  <span className=\"font-medium text-slate-800\">\r\n                    Chapa {idx + 1} - {detalhe.materialNome}\r\n                  </span>\r\n                  <span className={`text-xs px-2 py-1 rounded font-medium ${\r\n                    detalhe.percentualAproveitamento >= 80 ? 'bg-green-100 text-green-800' :\r\n                    detalhe.percentualAproveitamento >= 50 ? 'bg-yellow-100 text-yellow-800' :\r\n                    'bg-red-100 text-red-800'\r\n                  }`}>\r\n                    {detalhe.percentualAproveitamento.toFixed(1)}% aproveitamento\r\n                  </span>\r\n                </div>\r\n                <div className=\"grid grid-cols-2 gap-x-4 gap-y-1 text-xs text-slate-600\">\r\n                  <div>üìè √Årea total: <strong>{detalhe.areaTotal.toFixed(2)}m¬≤</strong></div>\r\n                  <div>‚úÇÔ∏è √Årea pe√ßas: <strong>{detalhe.areaPecas.toFixed(2)}m¬≤</strong></div>\r\n                  <div>üî≤ √Årea sobra: <strong>{detalhe.areaSobra.toFixed(2)}m¬≤</strong></div>\r\n                  <div>üíµ Venda pe√ßas: <strong className=\"text-green-700\">{formatBRL(detalhe.vendaPecas)}</strong></div>\r\n                  <div>üí∞ Custo sobra: <strong className=\"text-orange-700\">{formatBRL(detalhe.custoSobra)}</strong></div>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )}\r\n\r\n        {/* Resumo de Metragem - NOVO */}\r\n        {orcamento.detalhesChapas && orcamento.detalhesChapas.length > 0 && (\r\n          <div className=\"mt-4 pt-4 border-t border-slate-200\">\r\n            <h4 className=\"font-semibold text-slate-700 mb-3\">üìê Resumo de Metragem</h4>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-3\">\r\n              <div className=\"bg-green-50 rounded-lg p-3 border border-green-200\">\r\n                <div className=\"text-xs text-green-700 font-medium mb-1\">Pe√ßas Cobradas</div>\r\n                <div className=\"text-xl font-bold text-green-800\">\r\n                  {orcamento.detalhesChapas.reduce((sum, d) => sum + d.areaPecas, 0).toFixed(2)}m¬≤\r\n                </div>\r\n                <div className=\"text-xs text-green-600 mt-1\">\r\n                  {formatBRL(orcamento.detalhesChapas.reduce((sum, d) => sum + d.vendaPecas, 0))}\r\n                </div>\r\n              </div>\r\n              <div className=\"bg-orange-50 rounded-lg p-3 border border-orange-200\">\r\n                <div className=\"text-xs text-orange-700 font-medium mb-1\">Sobra Cobrada</div>\r\n                <div className=\"text-xl font-bold text-orange-800\">\r\n                  {orcamento.detalhesChapas.reduce((sum, d) => sum + d.areaSobra, 0).toFixed(2)}m¬≤\r\n                </div>\r\n                <div className=\"text-xs text-orange-600 mt-1\">\r\n                  {formatBRL(orcamento.detalhesChapas.reduce((sum, d) => sum + d.custoSobra, 0))} (pre√ßo custo)\r\n                </div>\r\n              </div>\r\n              <div className=\"bg-slate-100 rounded-lg p-3 border border-slate-300\">\r\n                <div className=\"text-xs text-slate-700 font-medium mb-1\">Total Geral</div>\r\n                <div className=\"text-xl font-bold text-slate-800\">\r\n                  {orcamento.detalhesChapas.reduce((sum, d) => sum + d.areaTotal, 0).toFixed(2)}m¬≤\r\n                </div>\r\n                <div className=\"text-xs text-slate-600 mt-1\">\r\n                  {((orcamento.detalhesChapas.reduce((sum, d) => sum + d.areaPecas, 0) / orcamento.detalhesChapas.reduce((sum, d) => sum + d.areaTotal, 0)) * 100).toFixed(1)}% aproveitamento\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Resumo Simplificado de Acabamentos e Recortes */}\r\n      <div className=\"mb-6 grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n        {orcamento.acabamentos > 0 && (\r\n          <div className=\"bg-blue-50 rounded-lg p-4 border border-blue-200\">\r\n            <div className=\"text-sm text-blue-700 font-medium mb-1\">Total Acabamentos</div>\r\n            <div className=\"text-2xl font-bold text-blue-800\">{formatBRL(orcamento.acabamentos)}</div>\r\n            <div className=\"text-xs text-blue-600 mt-1\">Ver detalhes em cada pe√ßa</div>\r\n          </div>\r\n        )}\r\n        {orcamento.recortes > 0 && (\r\n          <div className=\"bg-purple-50 rounded-lg p-4 border border-purple-200\">\r\n            <div className=\"text-sm text-purple-700 font-medium mb-1\">Total Recortes</div>\r\n            <div className=\"text-2xl font-bold text-purple-800\">{formatBRL(orcamento.recortes)}</div>\r\n            <div className=\"text-xs text-purple-600 mt-1\">Ver detalhes em cada pe√ßa</div>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Total Geral - CUSTO vs VENDA */}\r\n      <div className=\"mt-6 space-y-3\">\r\n        <div className=\"flex justify-between py-3 border-t-2 border-slate-400 bg-gradient-to-r from-slate-50 to-slate-100 px-4 rounded-lg\">\r\n          <span className=\"text-lg font-bold text-slate-700\">CUSTO TOTAL</span>\r\n          <span className=\"text-lg font-bold text-orange-600\">{formatBRL(orcamento.custoTotal)}</span>\r\n        </div>\r\n        <div className=\"flex justify-between py-3 bg-gradient-to-r from-green-50 to-emerald-50 px-4 rounded-lg border-2 border-green-200\">\r\n          <span className=\"text-xl font-bold text-slate-800\">VALOR DE VENDA</span>\r\n          <span className=\"text-xl font-bold text-green-600\">{formatBRL(orcamento.vendaTotal)}</span>\r\n        </div>\r\n        {orcamento.margemTotal > 0 && (\r\n          <div className=\"flex justify-between py-3 bg-gradient-to-r from-blue-50 to-indigo-50 px-4 rounded-lg border-2 border-blue-200\">\r\n            <span className=\"text-lg font-bold text-slate-800\">MARGEM DE LUCRO</span>\r\n            <span className=\"text-lg font-bold text-blue-600\">\r\n              {formatBRL(orcamento.margemTotal)}\r\n              <span className=\"text-sm ml-2\">({((orcamento.margemTotal / orcamento.vendaTotal) * 100).toFixed(1)}%)</span>\r\n            </span>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n\r\n// Componente de Plano de Corte da Chapa\r\nconst PlanoCorteChapa = ({ chapa, numero, onMoverPeca, onMoverPecaNaChapa, onGirarPeca, pecaArrastando, setPecaArrastando, todasChapas }) => {\r\n  const [escala, setEscala] = useState(0.15);\r\n  const canvasRef = useRef(null);\r\n  const [arrastandoPeca, setArrastandoPeca] = useState(null);\r\n  const [offset, setOffset] = useState({ x: 0, y: 0 });\r\n  const [pecaSelecionada, setPecaSelecionada] = useState(null);\r\n  const [chapaDestinoSelecionada, setChapaDestinoSelecionada] = useState(null);\r\n\r\n  useEffect(() => {\r\n    desenharChapa();\r\n  }, [chapa, escala, arrastandoPeca, pecaSelecionada]);\r\n\r\n  const desenharChapa = () => {\r\n    const canvas = canvasRef.current;\r\n    if (!canvas) return;\r\n\r\n    const ctx = canvas.getContext('2d');\r\n    const largura = chapa.material.comprimento * escala;\r\n    const altura = chapa.material.altura * escala;\r\n\r\n    canvas.width = largura + 100;\r\n    canvas.height = altura + 100;\r\n\r\n    // Fundo da chapa\r\n    ctx.fillStyle = '#f9fafb';\r\n    ctx.fillRect(50, 50, largura, altura);\r\n    ctx.strokeStyle = '#374151';\r\n    ctx.lineWidth = 2;\r\n    ctx.strokeRect(50, 50, largura, altura);\r\n\r\n    // Desenhar grid\r\n    ctx.strokeStyle = '#e5e7eb';\r\n    ctx.lineWidth = 0.5;\r\n    for (let i = 0; i <= chapa.material.comprimento; i += 500) {\r\n      const x = 50 + i * escala;\r\n      ctx.beginPath();\r\n      ctx.moveTo(x, 50);\r\n      ctx.lineTo(x, 50 + altura);\r\n      ctx.stroke();\r\n    }\r\n    for (let i = 0; i <= chapa.material.altura; i += 500) {\r\n      const y = 50 + i * escala;\r\n      ctx.beginPath();\r\n      ctx.moveTo(50, y);\r\n      ctx.lineTo(50 + largura, y);\r\n      ctx.stroke();\r\n    }\r\n\r\n    // Desenhar pe√ßas\r\n    const cores = ['#3b82f6','#10b981','#8b5cf6','#f59e0b','#ef4444','#06b6d4','#ec4899','#14b8a6'];\r\n    \r\n    chapa.pecas.forEach((peca, idx) => {\r\n      if (arrastandoPeca?.id === peca.id) return;\r\n\r\n      const x = 50 + peca.posX * escala;\r\n      const y = 50 + peca.posY * escala;\r\n      \r\n      // Considerar rota√ß√£o para dimens√µes\r\n      const w = (peca.rotacao === 90 ? peca.altura : peca.comprimento) * escala;\r\n      const h = (peca.rotacao === 90 ? peca.comprimento : peca.altura) * escala;\r\n\r\n      const ehSelecionada = pecaSelecionada === peca.id;\r\n      const cor = ehSelecionada ? '#10b981' : cores[idx % cores.length];\r\n      const r = parseInt(cor.slice(1, 3), 16);\r\n      const g = parseInt(cor.slice(3, 5), 16);\r\n      const b = parseInt(cor.slice(5, 7), 16);\r\n\r\n      // Preencher a pe√ßa com cor clara\r\n      ctx.fillStyle = `rgb(${r + (255-r)*0.7}, ${g + (255-g)*0.7}, ${b + (255-b)*0.7})`;\r\n      ctx.fillRect(x, y, w, h);\r\n\r\n      // Borda desenhada PARA DENTRO (inset de 1px) ‚Äî nunca sobrep√µe vizinhas\r\n      const bw = ehSelecionada ? 2 : 1.5;\r\n      ctx.strokeStyle = cor;\r\n      ctx.lineWidth = bw;\r\n      ctx.strokeRect(x + bw/2, y + bw/2, w - bw, h - bw);\r\n\r\n      // Desenhar acabamentos na pe√ßa\r\n      if (peca.acabamentos) {\r\n        const coresAcabamentos = {\r\n          esquadria: '#ef4444',\r\n          boleado: '#eab308',\r\n          polimento: '#3b82f6',\r\n          canal: '#f59e0b'\r\n        };\r\n        \r\n        const offsetCanal = 3 * escala; // Canal fica mais interno\r\n        \r\n        Object.keys(peca.acabamentos).forEach(tipoAcab => {\r\n          const acab = peca.acabamentos[tipoAcab];\r\n          if (!acab || !acab.ativo || !acab.lados) return;\r\n          \r\n          const cor = coresAcabamentos[tipoAcab];\r\n          const isCanal = tipoAcab === 'canal';\r\n          const offset = isCanal ? offsetCanal : 0;\r\n          \r\n          ctx.strokeStyle = cor;\r\n          ctx.lineWidth = 2;\r\n          ctx.setLineDash([4, 2]);\r\n          \r\n          // Superior\r\n          if (acab.lados.superior) {\r\n            ctx.beginPath();\r\n            ctx.moveTo(x + offset, y + offset);\r\n            ctx.lineTo(x + w - offset, y + offset);\r\n            ctx.stroke();\r\n          }\r\n          \r\n          // Inferior\r\n          if (acab.lados.inferior) {\r\n            ctx.beginPath();\r\n            ctx.moveTo(x + offset, y + h - offset);\r\n            ctx.lineTo(x + w - offset, y + h - offset);\r\n            ctx.stroke();\r\n          }\r\n          \r\n          // Esquerda\r\n          if (acab.lados.esquerda) {\r\n            ctx.beginPath();\r\n            ctx.moveTo(x + offset, y + offset);\r\n            ctx.lineTo(x + offset, y + h - offset);\r\n            ctx.stroke();\r\n          }\r\n          \r\n          // Direita\r\n          if (acab.lados.direita) {\r\n            ctx.beginPath();\r\n            ctx.moveTo(x + w - offset, y + offset);\r\n            ctx.lineTo(x + w - offset, y + h - offset);\r\n            ctx.stroke();\r\n          }\r\n          \r\n          ctx.setLineDash([]);\r\n        });\r\n      }\r\n\r\n      // Texto com nome e dimens√µes (considerando rota√ß√£o)\r\n      ctx.fillStyle = `rgb(${Math.max(0,r-40)}, ${Math.max(0,g-40)}, ${Math.max(0,b-40)})`;\r\n      ctx.font = 'bold 10px Arial';\r\n      ctx.textAlign = 'center';\r\n      \r\n      // Nome da pe√ßa (truncado se muito longo)\r\n      const nomePeca = peca.nome || `Pe√ßa #${idx + 1}`;\r\n      const nomeMaxLen = 15;\r\n      const nomeExibir = nomePeca.length > nomeMaxLen ? nomePeca.substring(0, nomeMaxLen) + '...' : nomePeca;\r\n      ctx.fillText(nomeExibir, x + w/2, y + h/2 - 8);\r\n      \r\n      // Dimens√µes\r\n      ctx.font = '9px Arial';\r\n      const dimensoes = peca.rotacao === 90 \r\n        ? `${peca.altura}x${peca.comprimento}` \r\n        : `${peca.comprimento}x${peca.altura}`;\r\n      ctx.fillText(dimensoes, x + w/2, y + h/2 + 3);\r\n      \r\n      // Indicador de rota√ß√£o\r\n      if (peca.rotacao === 90) {\r\n        ctx.font = 'bold 8px Arial';\r\n        ctx.fillText('‚Üª 90¬∞', x + w/2, y + h/2 + 13);\r\n      }\r\n    });\r\n\r\n    // Desenhar pe√ßa sendo arrastada\r\n    if (arrastandoPeca) {\r\n      const w = (arrastandoPeca.rotacao === 90 ? arrastandoPeca.altura : arrastandoPeca.comprimento) * escala;\r\n      const h = (arrastandoPeca.rotacao === 90 ? arrastandoPeca.comprimento : arrastandoPeca.altura) * escala;\r\n      \r\n      // Cor muda para vermelho se houver colis√£o\r\n      const cor = arrastandoPeca.colisao ? 'rgba(239, 68, 68, 0.7)' : 'rgba(59, 130, 246, 0.6)';\r\n      const corBorda = arrastandoPeca.colisao ? '#dc2626' : '#1e40af';\r\n      \r\n      ctx.fillStyle = cor;\r\n      ctx.fillRect(arrastandoPeca.x, arrastandoPeca.y, w, h);\r\n      ctx.strokeStyle = corBorda;\r\n      ctx.lineWidth = 2;\r\n      ctx.setLineDash([5, 5]);\r\n      ctx.strokeRect(arrastandoPeca.x, arrastandoPeca.y, w, h);\r\n      ctx.setLineDash([]);\r\n      \r\n      // Texto de aviso\r\n      if (arrastandoPeca.colisao) {\r\n        ctx.fillStyle = '#ffffff';\r\n        ctx.font = 'bold 10px Arial';\r\n        ctx.textAlign = 'center';\r\n        ctx.fillText('COLIS√ÉO!', arrastandoPeca.x + w/2, arrastandoPeca.y + h/2);\r\n      }\r\n    }\r\n\r\n    // Dimens√µes\r\n    ctx.fillStyle = '#374151';\r\n    ctx.font = 'bold 14px Arial';\r\n    ctx.textAlign = 'center';\r\n    ctx.fillText(`${chapa.material.comprimento} mm`, 50 + largura/2, 35);\r\n    ctx.save();\r\n    ctx.translate(35, 50 + altura/2);\r\n    ctx.rotate(-Math.PI/2);\r\n    ctx.fillText(`${chapa.material.altura} mm`, 0, 0);\r\n    ctx.restore();\r\n  };\r\n\r\n  const handleMouseDown = (e) => {\r\n    const canvas = canvasRef.current;\r\n    const rect = canvas.getBoundingClientRect();\r\n    const x = e.clientX - rect.left;\r\n    const y = e.clientY - rect.top;\r\n\r\n    // Verificar se clicou em alguma pe√ßa\r\n    const pecaClicada = chapa.pecas.find(peca => {\r\n      const px = 50 + peca.posX * escala;\r\n      const py = 50 + peca.posY * escala;\r\n      const pw = (peca.rotacao === 90 ? peca.altura : peca.comprimento) * escala;\r\n      const ph = (peca.rotacao === 90 ? peca.comprimento : peca.altura) * escala;\r\n      return x >= px && x <= px + pw && y >= py && y <= py + ph;\r\n    });\r\n\r\n    if (pecaClicada) {\r\n      setPecaSelecionada(pecaClicada.id);\r\n      const px = 50 + pecaClicada.posX * escala;\r\n      const py = 50 + pecaClicada.posY * escala;\r\n      setOffset({ x: x - px, y: y - py });\r\n      setArrastandoPeca({ ...pecaClicada, x: px, y: py });\r\n    } else {\r\n      setPecaSelecionada(null);\r\n    }\r\n  };\r\n\r\n  const handleMouseMove = (e) => {\r\n    if (!arrastandoPeca) return;\r\n    const canvas = canvasRef.current;\r\n    const rect = canvas.getBoundingClientRect();\r\n    const x = e.clientX - rect.left - offset.x;\r\n    const y = e.clientY - rect.top - offset.y;\r\n    \r\n    // Converter para coordenadas da chapa - SEM arredondamento para movimento suave\r\n    let novaX = Math.max(0, (x - 50) / escala);\r\n    let novaY = Math.max(0, (y - 50) / escala);\r\n    const espacamento = 4;\r\n    \r\n    // MAGNETISMO - Detectar proximidade com outras pe√ßas e bordas\r\n    const toleranciaMagnetismo = 20; // pixels de toler√¢ncia para ativar o magnetismo\r\n    const larguraPeca = arrastandoPeca.rotacao === 90 ? arrastandoPeca.altura : arrastandoPeca.comprimento;\r\n    const alturaPeca = arrastandoPeca.rotacao === 90 ? arrastandoPeca.comprimento : arrastandoPeca.altura;\r\n    \r\n    // MAGNETISMO NAS BORDAS DA CHAPA\r\n    // Borda esquerda\r\n    if (Math.abs(novaX - espacamento) < toleranciaMagnetismo) {\r\n      novaX = espacamento;\r\n    }\r\n    \r\n    // Borda superior\r\n    if (Math.abs(novaY - espacamento) < toleranciaMagnetismo) {\r\n      novaY = espacamento;\r\n    }\r\n    \r\n    // Borda direita\r\n    const distBordaDireita = Math.abs((novaX + larguraPeca + espacamento) - chapa.material.comprimento);\r\n    if (distBordaDireita < toleranciaMagnetismo) {\r\n      novaX = chapa.material.comprimento - larguraPeca - espacamento;\r\n    }\r\n    \r\n    // Borda inferior\r\n    const distBordaInferior = Math.abs((novaY + alturaPeca + espacamento) - chapa.material.altura);\r\n    if (distBordaInferior < toleranciaMagnetismo) {\r\n      novaY = chapa.material.altura - alturaPeca - espacamento;\r\n    }\r\n    \r\n    // MAGNETISMO ENTRE PE√áAS\r\n    chapa.pecas.forEach(p => {\r\n      if (p.id === arrastandoPeca.id) return;\r\n      \r\n      const larguraOutra = p.rotacao === 90 ? p.altura : p.comprimento;\r\n      const alturaOutra = p.rotacao === 90 ? p.comprimento : p.altura;\r\n      \r\n      // Magnetismo horizontal (alinhamento √† direita da pe√ßa existente)\r\n      const distDireita = Math.abs(novaX - (p.posX + larguraOutra + espacamento));\r\n      if (distDireita < toleranciaMagnetismo && \r\n          !(novaY + alturaPeca < p.posY || novaY > p.posY + alturaOutra)) {\r\n        novaX = p.posX + larguraOutra + espacamento;\r\n      }\r\n      \r\n      // Magnetismo horizontal (alinhamento √† esquerda da pe√ßa existente)\r\n      const distEsquerda = Math.abs((novaX + larguraPeca + espacamento) - p.posX);\r\n      if (distEsquerda < toleranciaMagnetismo && \r\n          !(novaY + alturaPeca < p.posY || novaY > p.posY + alturaOutra)) {\r\n        novaX = p.posX - larguraPeca - espacamento;\r\n      }\r\n      \r\n      // Magnetismo vertical (alinhamento abaixo da pe√ßa existente)\r\n      const distBaixo = Math.abs(novaY - (p.posY + alturaOutra + espacamento));\r\n      if (distBaixo < toleranciaMagnetismo && \r\n          !(novaX + larguraPeca < p.posX || novaX > p.posX + larguraOutra)) {\r\n        novaY = p.posY + alturaOutra + espacamento;\r\n      }\r\n      \r\n      // Magnetismo vertical (alinhamento acima da pe√ßa existente)\r\n      const distCima = Math.abs((novaY + alturaPeca + espacamento) - p.posY);\r\n      if (distCima < toleranciaMagnetismo && \r\n          !(novaX + larguraPeca < p.posX || novaX > p.posX + larguraOutra)) {\r\n        novaY = p.posY - alturaPeca - espacamento;\r\n      }\r\n      \r\n      // Alinhamento de bordas (mesmo Y)\r\n      if (Math.abs(novaY - p.posY) < toleranciaMagnetismo) {\r\n        novaY = p.posY;\r\n      }\r\n      \r\n      // Alinhamento de bordas (mesmo X)\r\n      if (Math.abs(novaX - p.posX) < toleranciaMagnetismo) {\r\n        novaX = p.posX;\r\n      }\r\n      \r\n      // Alinhamento de bordas inferiores\r\n      const distBordaInferiorPecas = Math.abs((novaY + alturaPeca) - (p.posY + alturaOutra));\r\n      if (distBordaInferiorPecas < toleranciaMagnetismo && \r\n          !(novaX + larguraPeca < p.posX || novaX > p.posX + larguraOutra)) {\r\n        novaY = (p.posY + alturaOutra) - alturaPeca;\r\n      }\r\n      \r\n      // Alinhamento de bordas direitas\r\n      const distBordaDireitaPecas = Math.abs((novaX + larguraPeca) - (p.posX + larguraOutra));\r\n      if (distBordaDireitaPecas < toleranciaMagnetismo && \r\n          !(novaY + alturaPeca < p.posY || novaY > p.posY + alturaOutra)) {\r\n        novaX = (p.posX + larguraOutra) - larguraPeca;\r\n      }\r\n    });\r\n    \r\n    // Verificar se a nova posi√ß√£o causaria colis√£o\r\n    const temColisao = chapa.pecas.some(p => {\r\n      if (p.id === arrastandoPeca.id) return false;\r\n      \r\n      const larguraOutra = p.rotacao === 90 ? p.altura : p.comprimento;\r\n      const alturaOutra = p.rotacao === 90 ? p.comprimento : p.altura;\r\n      \r\n      const centroNovaX = novaX + larguraPeca / 2;\r\n      const centroNovaY = novaY + alturaPeca / 2;\r\n      const centroPecaX = p.posX + larguraOutra / 2;\r\n      const centroPecaY = p.posY + alturaOutra / 2;\r\n      \r\n      const distanciaX = Math.abs(centroNovaX - centroPecaX);\r\n      const distanciaY = Math.abs(centroNovaY - centroPecaY);\r\n      \r\n      const distanciaMinX = (larguraPeca + larguraOutra) / 2 + espacamento;\r\n      const distanciaMinY = (alturaPeca + alturaOutra) / 2 + espacamento;\r\n      \r\n      return distanciaX < distanciaMinX && distanciaY < distanciaMinY;\r\n    });\r\n    \r\n    const foraDosLimites = \r\n      novaX + larguraPeca + espacamento > chapa.material.comprimento ||\r\n      novaY + alturaPeca + espacamento > chapa.material.altura ||\r\n      novaX < espacamento ||\r\n      novaY < espacamento;\r\n    \r\n    setArrastandoPeca({ \r\n      ...arrastandoPeca, \r\n      x: 50 + novaX * escala, \r\n      y: 50 + novaY * escala,\r\n      posXReal: novaX,\r\n      posYReal: novaY,\r\n      colisao: temColisao || foraDosLimites\r\n    });\r\n  };\r\n\r\n  const handleMouseUp = (e) => {\r\n    if (!arrastandoPeca) return;\r\n\r\n    // Usar as coordenadas j√° calculadas pelo magnetismo\r\n    const novaX = arrastandoPeca.posXReal !== undefined ? arrastandoPeca.posXReal : Math.max(0, Math.round((arrastandoPeca.x - 50) / escala));\r\n    const novaY = arrastandoPeca.posYReal !== undefined ? arrastandoPeca.posYReal : Math.max(0, Math.round((arrastandoPeca.y - 50) / escala));\r\n\r\n    const espacamento = 4;\r\n    const larguraPeca = arrastandoPeca.rotacao === 90 ? arrastandoPeca.altura : arrastandoPeca.comprimento;\r\n    const alturaPeca = arrastandoPeca.rotacao === 90 ? arrastandoPeca.comprimento : arrastandoPeca.altura;\r\n\r\n    // Verificar se est√° dentro dos limites da chapa\r\n    const dentroDosLimites = \r\n      novaX + larguraPeca + espacamento <= chapa.material.comprimento &&\r\n      novaY + alturaPeca + espacamento <= chapa.material.altura &&\r\n      novaX >= espacamento &&\r\n      novaY >= espacamento;\r\n\r\n    if (!dentroDosLimites) {\r\n      alert('A pe√ßa n√£o cabe nesta posi√ß√£o! Verifique os limites da chapa.');\r\n      setArrastandoPeca(null);\r\n      return;\r\n    }\r\n\r\n    // Verificar colis√£o com outras pe√ßas (respeitando 4mm de espa√ßamento)\r\n    const temColisao = chapa.pecas.some(p => {\r\n      if (p.id === arrastandoPeca.id) return false;\r\n      \r\n      const larguraOutra = p.rotacao === 90 ? p.altura : p.comprimento;\r\n      const alturaOutra = p.rotacao === 90 ? p.comprimento : p.altura;\r\n      \r\n      // Calcular dist√¢ncias entre centros\r\n      const centroNovaX = novaX + larguraPeca / 2;\r\n      const centroNovaY = novaY + alturaPeca / 2;\r\n      const centroPecaX = p.posX + larguraOutra / 2;\r\n      const centroPecaY = p.posY + alturaOutra / 2;\r\n      \r\n      const distanciaX = Math.abs(centroNovaX - centroPecaX);\r\n      const distanciaY = Math.abs(centroNovaY - centroPecaY);\r\n      \r\n      // Dist√¢ncia m√≠nima necess√°ria (metade de cada pe√ßa + espa√ßamento de 4mm)\r\n      const distanciaMinX = (larguraPeca + larguraOutra) / 2 + espacamento;\r\n      const distanciaMinY = (alturaPeca + alturaOutra) / 2 + espacamento;\r\n      \r\n      // H√° colis√£o se ambas as dist√¢ncias forem menores que o m√≠nimo\r\n      return distanciaX < distanciaMinX && distanciaY < distanciaMinY;\r\n    });\r\n\r\n    if (temColisao) {\r\n      alert('N√£o √© poss√≠vel posicionar a pe√ßa aqui! Ela precisa estar a pelo menos 4mm de dist√¢ncia das outras pe√ßas.');\r\n      setArrastandoPeca(null);\r\n      return;\r\n    }\r\n\r\n    // Posi√ß√£o v√°lida - mover a pe√ßa\r\n    onMoverPecaNaChapa(arrastandoPeca.id, chapa.id, novaX, novaY);\r\n    setArrastandoPeca(null);\r\n  };\r\n\r\n  return (\r\n    <div className=\"border border-gray-200 rounded-lg p-4\">\r\n      <div className=\"flex items-center justify-between mb-4\">\r\n        <div>\r\n          <h3 className=\"font-semibold text-lg\">Chapa #{numero}</h3>\r\n          <p className=\"text-sm text-gray-600\">{chapa.material.nome} - {chapa.pecas.length} pe√ßas</p>\r\n        </div>\r\n        <div className=\"flex items-center gap-2\">\r\n          <label className=\"text-sm\">Zoom:</label>\r\n          <input\r\n            type=\"range\"\r\n            min=\"0.05\"\r\n            max=\"0.3\"\r\n            step=\"0.01\"\r\n            value={escala}\r\n            onChange={(e) => setEscala(parseFloat(e.target.value))}\r\n            className=\"w-32\"\r\n          />\r\n        </div>\r\n      </div>\r\n      <div className=\"overflow-auto bg-white border border-gray-300 rounded\">\r\n        <canvas\r\n          ref={canvasRef}\r\n          onMouseDown={handleMouseDown}\r\n          onMouseMove={handleMouseMove}\r\n          onMouseUp={handleMouseUp}\r\n          onMouseLeave={handleMouseUp}\r\n          className=\"cursor-move\"\r\n        />\r\n      </div>\r\n      <div className=\"flex items-center justify-between mt-2 flex-wrap gap-2\">\r\n        <div>\r\n          <p className=\"text-xs text-gray-600\">\r\n            üñ±Ô∏è Arraste pe√ßas livremente. Magnetismo ativo (20mm): alinha com outras pe√ßas e bordas.\r\n          </p>\r\n          <p className=\"text-xs text-gray-500 mt-1\">\r\n            üí° Dica: O magnetismo facilita o alinhamento, mas voc√™ pode posicionar livremente em qualquer lugar!\r\n          </p>\r\n        </div>\r\n        <div className=\"flex gap-2 flex-wrap\">\r\n          {pecaSelecionada && (\r\n            <>\r\n              <button\r\n                onClick={() => {\r\n                  onGirarPeca(pecaSelecionada, chapa.id);\r\n                }}\r\n                className=\"flex items-center gap-1 bg-purple-600 text-white px-3 py-1 rounded text-sm hover:bg-purple-700\"\r\n              >\r\n                <span className=\"rotate-90 inline-block\">‚Üª</span>\r\n                Girar Pe√ßa (90¬∞)\r\n              </button>\r\n              \r\n              {/* Bot√£o para mover para outra chapa */}\r\n              {todasChapas && todasChapas.length > 1 && todasChapas.filter(c => c.materialId === chapa.materialId && c.id !== chapa.id).length > 0 && (\r\n                <div className=\"relative\">\r\n                  <button\r\n                    onClick={() => setChapaDestinoSelecionada(chapaDestinoSelecionada ? null : 'abrir')}\r\n                    className=\"flex items-center gap-1 bg-orange-600 text-white px-3 py-1 rounded text-sm hover:bg-orange-700\"\r\n                  >\r\n                    <Move size={14} />\r\n                    Mover para Outra Chapa\r\n                  </button>\r\n                  \r\n                  {chapaDestinoSelecionada === 'abrir' && (\r\n                    <div className=\"absolute bottom-full mb-2 right-0 bg-white border border-gray-300 rounded shadow-lg p-2 z-10 min-w-[200px]\">\r\n                      <p className=\"text-xs font-semibold mb-2 text-gray-700\">Selecione a chapa de destino:</p>\r\n                      <p className=\"text-xs text-blue-600 mb-2\">‚ú® O sistema encontrar√° automaticamente a melhor posi√ß√£o dispon√≠vel</p>\r\n                      {todasChapas\r\n                        .filter(c => c.materialId === chapa.materialId && c.id !== chapa.id)\r\n                        .map((chapaDestino, idx) => (\r\n                          <button\r\n                            key={chapaDestino.id}\r\n                            onClick={() => {\r\n                              const pecaAtual = chapa.pecas.find(p => p.id === pecaSelecionada);\r\n                              if (pecaAtual) {\r\n                                // Sistema encontra automaticamente a melhor posi√ß√£o\r\n                                onMoverPeca(pecaSelecionada, chapaDestino.id);\r\n                                setPecaSelecionada(null);\r\n                                setChapaDestinoSelecionada(null);\r\n                              }\r\n                            }}\r\n                            className=\"w-full text-left px-2 py-1 text-sm hover:bg-blue-50 rounded\"\r\n                          >\r\n                            Chapa #{todasChapas.findIndex(c => c.id === chapaDestino.id) + 1} - {chapaDestino.material.nome}\r\n                          </button>\r\n                        ))}\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              )}\r\n            </>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n\r\n\r\n\r\n// Exportar componente\r\nexport { SistemaOrcamentoMarmore };\r\n","import { useState, useEffect } from 'react';\r\nimport { TelaLogin } from './components/auth/TelaLogin';\r\nimport { SistemaOrcamentoMarmore } from './SistemaOrcamentoMarmore';\r\nimport { storage } from './utils/storage';\r\n\r\nexport default function App() {\r\n  const [logado, setLogado] = useState(false);\r\n\r\n  useEffect(() => {\r\n    setLogado(storage.isLogado());\r\n  }, []);\r\n\r\n  const handleLogout = () => {\r\n    storage.logout();\r\n    setLogado(false);\r\n  };\r\n\r\n  if (!logado) {\r\n    return <TelaLogin aoEntrar={() => setLogado(true)} />;\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <SistemaOrcamentoMarmore />\r\n      <button\r\n        onClick={handleLogout}\r\n        className=\"fixed bottom-4 right-4 bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg shadow-lg transition-colors duration-200 flex items-center gap-2\"\r\n      >\r\n        üö™ Sair\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n","import React from 'react'\r\nimport ReactDOM from 'react-dom/client'\r\nimport App from './App.jsx'\r\nimport './styles/index.css'\r\n\r\nReactDOM.createRoot(document.getElementById('root')).render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>\r\n)\r\n"],"names":["f","require$$0","k","l","m","n","p","q","c","a","g","b","d","e","h","reactJsxRuntime_production_min","jsxRuntimeModule","client","SENHA_DO_SISTEMA","STORAGE_KEYS","PRECOS_PADRAO","ESPACAMENTO_CHAPAS","storage","data","error","materiais","orcamentos","precos","logado","TelaLogin","aoEntrar","senha","setSenha","useState","erro","setErro","tentativas","setTentativas","bloqueado","setBloqueado","segundosRestantes","setSegundosRestantes","useEffect","timer","s","tentar","novas","jsx","jsxs","formatBRL","valor","mm2ToM2","areaMm2","calcularAreaM2","comprimentoMm","alturaMm","calcularCustosPeca","peca","material","largura","altura","area","custoMaterial","totalAcabamentos","detalhesAcabamentos","tipo","acab","totalMm","lados","metros","totalRecortes","detalhesRecortes","organizarPecasEmChapas","orcamento","todasPecas","amb","chapas","espacamento","pecasPorMaterial","materialId","colocada","chapa","pos","encontrarPosicaoNaChapa","novaChapa","ambientesAtualizados","tp","larguraChapa","alturaChapa","pecaLargura","pecaAltura","y","x","pLargura","pAltura","distanciaX","distanciaY","somaLarguras","somaAlturas","calcularOrcamentoComDetalhes","orcamentoAtual","custoChapas","vendaChapas","chapasPorMaterial","detalhesChapas","key","areaTotalChapa","areaPecasM2","larguraPeca","alturaPeca","areaSobraM2","vendaPecas","custoSobra","custoPecas","ambiente","ambIdx","pecaIdx","nomePeca","margemChapas","custoTotal","vendaTotal","margemTotal","usePrecos","setPrecos","precosSalvos","setPrecosSalvos","mostrarPainelPrecos","setMostrarPainelPrecos","chave","valorNumerico","prev","useMaterials","setMateriais","materialEditando","setMaterialEditando","novoMaterial","setNovoMaterial","materiaisSalvos","dados","adicionarMaterial","novoId","materialComId","resetNovoMaterial","excluirMaterial","atualizarMaterialSimples","novosDados","materiaisAtualizados","iniciarEdicao","cancelarEdicao","campo","useBudgets","setOrcamentos","setOrcamentoAtual","mostrarModalNovoOrcamento","setMostrarModalNovoOrcamento","nomeNovoOrcamento","setNomeNovoOrcamento","orcamentosSalvos","abrirModalNovoOrcamento","fecharModalNovoOrcamento","criarOrcamento","nome","nomeOrcamento","novoOrcamento","o","adicionarAmbiente","nomeAmbiente","novoAmbiente","orcamentoAtualizado","orc","removerAmbiente","ambienteId","carregarOrcamento","orcamentoId","excluirOrcamento","salvarOrcamentoAtual","novoNome","PlusCircle","Trash2","Edit2","Save","X","Move","Grid","FileText","Home","Package","Printer","SistemaOrcamentoMarmore","atualizarPreco","salvarPrecos","tela","setTela","mostrandoDetalhePeca","setMostrandoDetalhePeca","modoEdicaoPeca","setModoEdicaoPeca","pecaEditada","setPecaEditada","pecaParaExcluir","setPecaParaExcluir","pecaArrastando","setPecaArrastando","imprimirPlanoCorte","resolve","script","gerarPDFPlanoCorte","jsPDF","pdf","pageW","pageH","margin","headerH","idx","_a","legendaW","areaTop","areaLeft","areaRight","areaBottom","areaW","areaH","chapaW","_b","chapaH","_c","escalaX","escalaY","escala","desenhoW","desenhoH","desenhoX","desenhoY","cotaTopY","cotaLeftX","gridSpacing","i","cores","legendaItens","bordaW","inset","pIdx","px","py","pw","ph","cor","r","fontDim","dim","pecaCompExib","pecaAltExib","legendaX","legendaY","legendaLineH","legendaAltura","item","nomeExib","rot","confirmarCriacaoOrcamento","adicionarPeca","pecaComp","pecaAlt","chapaComp","chapaAlt","cabeNormal","cabeRotacionada","rotacaoInicial","novasPecas","ambientes","organizarPecasLocalmente","excluirPeca","pecaId","salvarEdicaoPeca","gerarEtiquetasPDF","gerarPDFComJsPDF","primeira","index","comp","larg","clienteNome","ambienteNome","pecaNome","materialNome","nomeArquivo","girarPeca","chapaId","novaRotacao","chapasAtualizadas","moverPecaNaChapa","novaX","novaY","encontrarMelhorPosicao","chapaDestino","incremento","larguraOutra","alturaOutra","centroNovaX","centroNovaY","centroPecaX","centroPecaY","distanciaMinX","distanciaMinY","moverPeca","novaChapaId","pecaMovida","posicao","copia","novosAcabamentos","_d","lado","mat","totalPecas","sum","orcCalc","input","AmbienteCard","ResumoOrcamento","PlanoCorteChapa","onAdicionarPeca","onExcluirPeca","onVisualizarPeca","onPedirConfirmacaoExclusao","expandido","setExpandido","mostrarForm","setMostrarForm","novaPeca","setNovaPeca","custosPeca","PreviewAcabamentos","detalhe","coresBg","coresAtivo","coresInativo","toggleLado","ladosSelecionados","todosAtivos","mostrarSempre","mini","canvasRef","useRef","desenharPreview","canvas","ctx","canvasWidth","canvasHeight","margemTop","margemLeft","margemRight","margemBottom","w","offsetX","offsetY","gradient","pecaGradient","coresAcabamentos","offsetCanal","tipoAcab","offset","nomeExibir","textWidth","qtd","custoParcial","vendaParcial","numero","onMoverPeca","onMoverPecaNaChapa","onGirarPeca","todasChapas","setEscala","arrastandoPeca","setArrastandoPeca","setOffset","pecaSelecionada","setPecaSelecionada","chapaDestinoSelecionada","setChapaDestinoSelecionada","desenharChapa","ehSelecionada","bw","nomeMaxLen","dimensoes","corBorda","handleMouseDown","rect","pecaClicada","handleMouseMove","toleranciaMagnetismo","temColisao","foraDosLimites","handleMouseUp","Fragment","App","setLogado","handleLogout","ReactDOM","React"],"mappings":"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","x_google_ignoreList":[0,1,2]}